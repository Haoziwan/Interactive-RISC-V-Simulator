var Yg=Object.defineProperty;var Gg=(e,s,i)=>s in e?Yg(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var $t=(e,s,i)=>Gg(e,typeof s!="symbol"?s+"":s,i);function Zg(e,s){for(var i=0;i<s.length;i++){const l=s[i];if(typeof l!="string"&&!Array.isArray(l)){for(const a in l)if(a!=="default"&&!(a in e)){const u=Object.getOwnPropertyDescriptor(l,a);u&&Object.defineProperty(e,a,u.get?u:{enumerable:!0,get:()=>l[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(a){if(a.ep)return;a.ep=!0;const u=i(a);fetch(a.href,u)}})();function sm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kc={exports:{}},Si={},Qc={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function Kg(){if(L0)return _e;L0=1;var e=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function N(A,V,K){this.props=A,this.context=V,this.refs=w,this.updater=K||v}N.prototype.isReactComponent={},N.prototype.setState=function(A,V){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,V,"setState")},N.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function E(){}E.prototype=N.prototype;function z(A,V,K){this.props=A,this.context=V,this.refs=w,this.updater=K||v}var M=z.prototype=new E;M.constructor=z,j(M,N.prototype),M.isPureReactComponent=!0;var _=Array.isArray,L=Object.prototype.hasOwnProperty,D={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function H(A,V,K){var re,oe={},ae=null,J=null;if(V!=null)for(re in V.ref!==void 0&&(J=V.ref),V.key!==void 0&&(ae=""+V.key),V)L.call(V,re)&&!R.hasOwnProperty(re)&&(oe[re]=V[re]);var ie=arguments.length-2;if(ie===1)oe.children=K;else if(1<ie){for(var pe=Array(ie),ce=0;ce<ie;ce++)pe[ce]=arguments[ce+2];oe.children=pe}if(A&&A.defaultProps)for(re in ie=A.defaultProps,ie)oe[re]===void 0&&(oe[re]=ie[re]);return{$$typeof:e,type:A,key:ae,ref:J,props:oe,_owner:D.current}}function k(A,V){return{$$typeof:e,type:A.type,key:V,ref:A.ref,props:A.props,_owner:A._owner}}function T(A){return typeof A=="object"&&A!==null&&A.$$typeof===e}function I(A){var V={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(K){return V[K]})}var $=/\/+/g;function W(A,V){return typeof A=="object"&&A!==null&&A.key!=null?I(""+A.key):V.toString(36)}function S(A,V,K,re,oe){var ae=typeof A;(ae==="undefined"||ae==="boolean")&&(A=null);var J=!1;if(A===null)J=!0;else switch(ae){case"string":case"number":J=!0;break;case"object":switch(A.$$typeof){case e:case s:J=!0}}if(J)return J=A,oe=oe(J),A=re===""?"."+W(J,0):re,_(oe)?(K="",A!=null&&(K=A.replace($,"$&/")+"/"),S(oe,V,K,"",function(ce){return ce})):oe!=null&&(T(oe)&&(oe=k(oe,K+(!oe.key||J&&J.key===oe.key?"":(""+oe.key).replace($,"$&/")+"/")+A)),V.push(oe)),1;if(J=0,re=re===""?".":re+":",_(A))for(var ie=0;ie<A.length;ie++){ae=A[ie];var pe=re+W(ae,ie);J+=S(ae,V,K,pe,oe)}else if(pe=b(A),typeof pe=="function")for(A=pe.call(A),ie=0;!(ae=A.next()).done;)ae=ae.value,pe=re+W(ae,ie++),J+=S(ae,V,K,pe,oe);else if(ae==="object")throw V=String(A),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return J}function O(A,V,K){if(A==null)return A;var re=[],oe=0;return S(A,re,"","",function(ae){return V.call(K,ae,oe++)}),re}function P(A){if(A._status===-1){var V=A._result;V=V(),V.then(function(K){(A._status===0||A._status===-1)&&(A._status=1,A._result=K)},function(K){(A._status===0||A._status===-1)&&(A._status=2,A._result=K)}),A._status===-1&&(A._status=0,A._result=V)}if(A._status===1)return A._result.default;throw A._result}var Y={current:null},X={transition:null},U={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:X,ReactCurrentOwner:D};function q(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:O,forEach:function(A,V,K){O(A,function(){V.apply(this,arguments)},K)},count:function(A){var V=0;return O(A,function(){V++}),V},toArray:function(A){return O(A,function(V){return V})||[]},only:function(A){if(!T(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},_e.Component=N,_e.Fragment=i,_e.Profiler=a,_e.PureComponent=z,_e.StrictMode=l,_e.Suspense=x,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,_e.act=q,_e.cloneElement=function(A,V,K){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var re=j({},A.props),oe=A.key,ae=A.ref,J=A._owner;if(V!=null){if(V.ref!==void 0&&(ae=V.ref,J=D.current),V.key!==void 0&&(oe=""+V.key),A.type&&A.type.defaultProps)var ie=A.type.defaultProps;for(pe in V)L.call(V,pe)&&!R.hasOwnProperty(pe)&&(re[pe]=V[pe]===void 0&&ie!==void 0?ie[pe]:V[pe])}var pe=arguments.length-2;if(pe===1)re.children=K;else if(1<pe){ie=Array(pe);for(var ce=0;ce<pe;ce++)ie[ce]=arguments[ce+2];re.children=ie}return{$$typeof:e,type:A.type,key:oe,ref:ae,props:re,_owner:J}},_e.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:u,_context:A},A.Consumer=A},_e.createElement=H,_e.createFactory=function(A){var V=H.bind(null,A);return V.type=A,V},_e.createRef=function(){return{current:null}},_e.forwardRef=function(A){return{$$typeof:f,render:A}},_e.isValidElement=T,_e.lazy=function(A){return{$$typeof:h,_payload:{_status:-1,_result:A},_init:P}},_e.memo=function(A,V){return{$$typeof:m,type:A,compare:V===void 0?null:V}},_e.startTransition=function(A){var V=X.transition;X.transition={};try{A()}finally{X.transition=V}},_e.unstable_act=q,_e.useCallback=function(A,V){return Y.current.useCallback(A,V)},_e.useContext=function(A){return Y.current.useContext(A)},_e.useDebugValue=function(){},_e.useDeferredValue=function(A){return Y.current.useDeferredValue(A)},_e.useEffect=function(A,V){return Y.current.useEffect(A,V)},_e.useId=function(){return Y.current.useId()},_e.useImperativeHandle=function(A,V,K){return Y.current.useImperativeHandle(A,V,K)},_e.useInsertionEffect=function(A,V){return Y.current.useInsertionEffect(A,V)},_e.useLayoutEffect=function(A,V){return Y.current.useLayoutEffect(A,V)},_e.useMemo=function(A,V){return Y.current.useMemo(A,V)},_e.useReducer=function(A,V,K){return Y.current.useReducer(A,V,K)},_e.useRef=function(A){return Y.current.useRef(A)},_e.useState=function(A){return Y.current.useState(A)},_e.useSyncExternalStore=function(A,V,K){return Y.current.useSyncExternalStore(A,V,K)},_e.useTransition=function(){return Y.current.useTransition()},_e.version="18.3.1",_e}var D0;function Zi(){return D0||(D0=1,Qc.exports=Kg()),Qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function Qg(){if($0)return Si;$0=1;var e=Zi(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(f,x,m){var h,y={},b=null,v=null;m!==void 0&&(b=""+m),x.key!==void 0&&(b=""+x.key),x.ref!==void 0&&(v=x.ref);for(h in x)l.call(x,h)&&!u.hasOwnProperty(h)&&(y[h]=x[h]);if(f&&f.defaultProps)for(h in x=f.defaultProps,x)y[h]===void 0&&(y[h]=x[h]);return{$$typeof:s,type:f,key:b,ref:v,props:y,_owner:a.current}}return Si.Fragment=i,Si.jsx=d,Si.jsxs=d,Si}var O0;function Jg(){return O0||(O0=1,Kc.exports=Qg()),Kc.exports}var r=Jg(),F=Zi();const Q=sm(F),im=Zg({__proto__:null,default:Q},[F]);var wl={},Jc={exports:{}},kt={},eu={exports:{}},tu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function ey(){return F0||(F0=1,function(e){function s(X,U){var q=X.length;X.push(U);e:for(;0<q;){var A=q-1>>>1,V=X[A];if(0<a(V,U))X[A]=U,X[q]=V,q=A;else break e}}function i(X){return X.length===0?null:X[0]}function l(X){if(X.length===0)return null;var U=X[0],q=X.pop();if(q!==U){X[0]=q;e:for(var A=0,V=X.length,K=V>>>1;A<K;){var re=2*(A+1)-1,oe=X[re],ae=re+1,J=X[ae];if(0>a(oe,q))ae<V&&0>a(J,oe)?(X[A]=J,X[ae]=q,A=ae):(X[A]=oe,X[re]=q,A=re);else if(ae<V&&0>a(J,q))X[A]=J,X[ae]=q,A=ae;else break e}}return U}function a(X,U){var q=X.sortIndex-U.sortIndex;return q!==0?q:X.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var x=[],m=[],h=1,y=null,b=3,v=!1,j=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(X){for(var U=i(m);U!==null;){if(U.callback===null)l(m);else if(U.startTime<=X)l(m),U.sortIndex=U.expirationTime,s(x,U);else break;U=i(m)}}function _(X){if(w=!1,M(X),!j)if(i(x)!==null)j=!0,P(L);else{var U=i(m);U!==null&&Y(_,U.startTime-X)}}function L(X,U){j=!1,w&&(w=!1,E(H),H=-1),v=!0;var q=b;try{for(M(U),y=i(x);y!==null&&(!(y.expirationTime>U)||X&&!I());){var A=y.callback;if(typeof A=="function"){y.callback=null,b=y.priorityLevel;var V=A(y.expirationTime<=U);U=e.unstable_now(),typeof V=="function"?y.callback=V:y===i(x)&&l(x),M(U)}else l(x);y=i(x)}if(y!==null)var K=!0;else{var re=i(m);re!==null&&Y(_,re.startTime-U),K=!1}return K}finally{y=null,b=q,v=!1}}var D=!1,R=null,H=-1,k=5,T=-1;function I(){return!(e.unstable_now()-T<k)}function $(){if(R!==null){var X=e.unstable_now();T=X;var U=!0;try{U=R(!0,X)}finally{U?W():(D=!1,R=null)}}else D=!1}var W;if(typeof z=="function")W=function(){z($)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,O=S.port2;S.port1.onmessage=$,W=function(){O.postMessage(null)}}else W=function(){N($,0)};function P(X){R=X,D||(D=!0,W())}function Y(X,U){H=N(function(){X(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,P(L))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return i(x)},e.unstable_next=function(X){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var q=b;b=U;try{return X()}finally{b=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,U){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var q=b;b=X;try{return U()}finally{b=q}},e.unstable_scheduleCallback=function(X,U,q){var A=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?A+q:A):q=A,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=q+V,X={id:h++,callback:U,priorityLevel:X,startTime:q,expirationTime:V,sortIndex:-1},q>A?(X.sortIndex=q,s(m,X),i(x)===null&&X===i(m)&&(w?(E(H),H=-1):w=!0,Y(_,q-A))):(X.sortIndex=V,s(x,X),j||v||(j=!0,P(L))),X},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(X){var U=b;return function(){var q=b;b=U;try{return X.apply(this,arguments)}finally{b=q}}}}(tu)),tu}var U0;function ty(){return U0||(U0=1,eu.exports=ey()),eu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function ny(){if(W0)return kt;W0=1;var e=Zi(),s=ty();function i(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,a={};function u(t,n){d(t,n),d(t+"Capture",n)}function d(t,n){for(a[t]=n,t=0;t<n.length;t++)l.add(n[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},y={};function b(t){return x.call(y,t)?!0:x.call(h,t)?!1:m.test(t)?y[t]=!0:(h[t]=!0,!1)}function v(t,n,o,c){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j(t,n,o,c){if(n===null||typeof n>"u"||v(t,n,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function w(t,n,o,c,p,g,C){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=g,this.removeEmptyString=C}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){N[t]=new w(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];N[n]=new w(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){N[t]=new w(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){N[t]=new w(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){N[t]=new w(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){N[t]=new w(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){N[t]=new w(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){N[t]=new w(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){N[t]=new w(t,5,!1,t.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function z(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(E,z);N[n]=new w(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(E,z);N[n]=new w(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(E,z);N[n]=new w(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){N[t]=new w(t,1,!1,t.toLowerCase(),null,!1,!1)}),N.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){N[t]=new w(t,1,!1,t.toLowerCase(),null,!0,!0)});function M(t,n,o,c){var p=N.hasOwnProperty(n)?N[n]:null;(p!==null?p.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(j(n,o,p,c)&&(o=null),c||p===null?b(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):p.mustUseProperty?t[p.propertyName]=o===null?p.type===3?!1:"":o:(n=p.attributeName,c=p.attributeNamespace,o===null?t.removeAttribute(n):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,c?t.setAttributeNS(c,n,o):t.setAttribute(n,o))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),D=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),X=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var q=Object.assign,A;function V(t){if(A===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);A=n&&n[1]||""}return`
`+A+t}var K=!1;function re(t,n){if(!t||K)return"";K=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(se){var c=se}Reflect.construct(t,[],n)}else{try{n.call()}catch(se){c=se}t.call(n.prototype)}else{try{throw Error()}catch(se){c=se}t()}}catch(se){if(se&&c&&typeof se.stack=="string"){for(var p=se.stack.split(`
`),g=c.stack.split(`
`),C=p.length-1,B=g.length-1;1<=C&&0<=B&&p[C]!==g[B];)B--;for(;1<=C&&0<=B;C--,B--)if(p[C]!==g[B]){if(C!==1||B!==1)do if(C--,B--,0>B||p[C]!==g[B]){var G=`
`+p[C].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=C&&0<=B);break}}}finally{K=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?V(t):""}function oe(t){switch(t.tag){case 5:return V(t.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return t=re(t.type,!1),t;case 11:return t=re(t.type.render,!1),t;case 1:return t=re(t.type,!0),t;default:return""}}function ae(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case D:return"Portal";case k:return"Profiler";case H:return"StrictMode";case W:return"Suspense";case S:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case $:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return n=t.displayName||null,n!==null?n:ae(t.type)||"Memo";case P:n=t._payload,t=t._init;try{return ae(t(n))}catch{}}return null}function J(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(n);case 8:return n===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ie(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ce(t){var n=pe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),c=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,g=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return p.call(this)},set:function(C){c=""+C,g.call(this,C)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function je(t){t._valueTracker||(t._valueTracker=ce(t))}function ke(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),c="";return t&&(c=pe(t)?t.checked?"true":"false":t.value),t=c,t!==o?(n.setValue(t),!0):!1}function Re(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function De(t,n){var o=n.checked;return q({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function $e(t,n){var o=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;o=ie(n.value!=null?n.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function st(t,n){n=n.checked,n!=null&&M(t,"checked",n,!1)}function Pe(t,n){st(t,n);var o=ie(n.value),c=n.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Qe(t,n.type,o):n.hasOwnProperty("defaultValue")&&Qe(t,n.type,ie(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function xe(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Qe(t,n,o){(n!=="number"||Re(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var gt=Array.isArray;function it(t,n,o,c){if(t=t.options,n){n={};for(var p=0;p<o.length;p++)n["$"+o[p]]=!0;for(o=0;o<t.length;o++)p=n.hasOwnProperty("$"+t[o].value),t[o].selected!==p&&(t[o].selected=p),p&&c&&(t[o].defaultSelected=!0)}else{for(o=""+ie(o),n=null,p=0;p<t.length;p++){if(t[p].value===o){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}n!==null||t[p].disabled||(n=t[p])}n!==null&&(n.selected=!0)}}function _t(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(i(91));return q({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qt(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(i(92));if(gt(o)){if(1<o.length)throw Error(i(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:ie(o)}}function Wt(t,n){var o=ie(n.value),c=ie(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function kn(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function mn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?mn(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var en,In=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,c,p){MSApp.execUnsafeLocalFunction(function(){return t(n,o,c,p)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(en=en||document.createElement("div"),en.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=en.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function tn(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var Xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zt=["Webkit","ms","Moz","O"];Object.keys(Xe).forEach(function(t){zt.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Xe[n]=Xe[t]})});function hn(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||Xe.hasOwnProperty(t)&&Xe[t]?(""+n).trim():n+"px"}function xn(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var c=o.indexOf("--")===0,p=hn(o,n[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,p):t[o]=p}}var Rn=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pt(t,n){if(n){if(Rn[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(i(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(i(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(i(61))}if(n.style!=null&&typeof n.style!="object")throw Error(i(62))}}function wt(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function vr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _n=null,gn=null,zn=null;function yn(t){if(t=ci(t)){if(typeof _n!="function")throw Error(i(280));var n=t.stateNode;n&&(n=Lo(n),_n(t.stateNode,t.type,n))}}function to(t){gn?zn?zn.push(t):zn=[t]:gn=t}function no(){if(gn){var t=gn,n=zn;if(zn=gn=null,yn(t),n)for(t=0;t<n.length;t++)yn(n[t])}}function ro(t,n){return t(n)}function so(){}var Fs=!1;function io(t,n,o){if(Fs)return t(n,o);Fs=!0;try{return ro(t,n,o)}finally{Fs=!1,(gn!==null||zn!==null)&&(so(),no())}}function wr(t,n){var o=t.stateNode;if(o===null)return null;var c=Lo(o);if(c===null)return null;o=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,n,typeof o));return o}var Us=!1;if(f)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Us=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Us=!1}function fa(t,n,o,c,p,g,C,B,G){var se=Array.prototype.slice.call(arguments,3);try{n.apply(o,se)}catch(fe){this.onError(fe)}}var jr=!1,Xr=null,Yr=!1,Ws=null,pa={onError:function(t){jr=!0,Xr=t}};function ma(t,n,o,c,p,g,C,B,G){jr=!1,Xr=null,fa.apply(pa,arguments)}function oo(t,n,o,c,p,g,C,B,G){if(ma.apply(this,arguments),jr){if(jr){var se=Xr;jr=!1,Xr=null}else throw Error(i(198));Yr||(Yr=!0,Ws=se)}}function Pn(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function lo(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function ao(t){if(Pn(t)!==t)throw Error(i(188))}function ha(t){var n=t.alternate;if(!n){if(n=Pn(t),n===null)throw Error(i(188));return n!==t?null:t}for(var o=t,c=n;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return ao(p),t;if(g===c)return ao(p),n;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=p,c=g;else{for(var C=!1,B=p.child;B;){if(B===o){C=!0,o=p,c=g;break}if(B===c){C=!0,c=p,o=g;break}B=B.sibling}if(!C){for(B=g.child;B;){if(B===o){C=!0,o=g,c=p;break}if(B===c){C=!0,c=g,o=p;break}B=B.sibling}if(!C)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:n}function co(t){return t=ha(t),t!==null?uo(t):null}function uo(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=uo(t);if(n!==null)return n;t=t.sibling}return null}var fo=s.unstable_scheduleCallback,po=s.unstable_cancelCallback,mo=s.unstable_shouldYield,xa=s.unstable_requestPaint,He=s.unstable_now,ga=s.unstable_getCurrentPriorityLevel,Bs=s.unstable_ImmediatePriority,ho=s.unstable_UserBlockingPriority,Gr=s.unstable_NormalPriority,xo=s.unstable_LowPriority,go=s.unstable_IdlePriority,Zr=null,Bt=null;function Hs(t){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Zr,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:fx,ux=Math.log,dx=Math.LN2;function fx(t){return t>>>=0,t===0?32:31-(ux(t)/dx|0)|0}var yo=64,bo=4194304;function Vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vo(t,n){var o=t.pendingLanes;if(o===0)return 0;var c=0,p=t.suspendedLanes,g=t.pingedLanes,C=o&268435455;if(C!==0){var B=C&~p;B!==0?c=Vs(B):(g&=C,g!==0&&(c=Vs(g)))}else C=o&~p,C!==0?c=Vs(C):g!==0&&(c=Vs(g));if(c===0)return 0;if(n!==0&&n!==c&&(n&p)===0&&(p=c&-c,g=n&-n,p>=g||p===16&&(g&4194240)!==0))return n;if((c&4)!==0&&(c|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=c;0<n;)o=31-nn(n),p=1<<o,c|=t[o],n&=~p;return c}function px(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mx(t,n){for(var o=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,g=t.pendingLanes;0<g;){var C=31-nn(g),B=1<<C,G=p[C];G===-1?((B&o)===0||(B&c)!==0)&&(p[C]=px(B,n)):G<=n&&(t.expiredLanes|=B),g&=~B}}function ya(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fd(){var t=yo;return yo<<=1,(yo&4194240)===0&&(yo=64),t}function ba(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function qs(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-nn(n),t[n]=o}function hx(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var p=31-nn(o),g=1<<p;n[p]=0,c[p]=-1,t[p]=-1,o&=~g}}function va(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var c=31-nn(o),p=1<<c;p&n|t[c]&n&&(t[c]|=n),o&=~p}}var Le=0;function pd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var md,wa,hd,xd,gd,Na=!1,wo=[],Xn=null,Yn=null,Gn=null,Xs=new Map,Ys=new Map,Zn=[],xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yd(t,n){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Xs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(n.pointerId)}}function Gs(t,n,o,c,p,g){return t===null||t.nativeEvent!==g?(t={blockedOn:n,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},n!==null&&(n=ci(n),n!==null&&wa(n)),t):(t.eventSystemFlags|=c,n=t.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),t)}function gx(t,n,o,c,p){switch(n){case"focusin":return Xn=Gs(Xn,t,n,o,c,p),!0;case"dragenter":return Yn=Gs(Yn,t,n,o,c,p),!0;case"mouseover":return Gn=Gs(Gn,t,n,o,c,p),!0;case"pointerover":var g=p.pointerId;return Xs.set(g,Gs(Xs.get(g)||null,t,n,o,c,p)),!0;case"gotpointercapture":return g=p.pointerId,Ys.set(g,Gs(Ys.get(g)||null,t,n,o,c,p)),!0}return!1}function bd(t){var n=Sr(t.target);if(n!==null){var o=Pn(n);if(o!==null){if(n=o.tag,n===13){if(n=lo(o),n!==null){t.blockedOn=n,gd(t.priority,function(){hd(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function No(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=Sa(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Mn=c,o.target.dispatchEvent(c),Mn=null}else return n=ci(o),n!==null&&wa(n),t.blockedOn=o,!1;n.shift()}return!0}function vd(t,n,o){No(t)&&o.delete(n)}function yx(){Na=!1,Xn!==null&&No(Xn)&&(Xn=null),Yn!==null&&No(Yn)&&(Yn=null),Gn!==null&&No(Gn)&&(Gn=null),Xs.forEach(vd),Ys.forEach(vd)}function Zs(t,n){t.blockedOn===n&&(t.blockedOn=null,Na||(Na=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,yx)))}function Ks(t){function n(p){return Zs(p,t)}if(0<wo.length){Zs(wo[0],t);for(var o=1;o<wo.length;o++){var c=wo[o];c.blockedOn===t&&(c.blockedOn=null)}}for(Xn!==null&&Zs(Xn,t),Yn!==null&&Zs(Yn,t),Gn!==null&&Zs(Gn,t),Xs.forEach(n),Ys.forEach(n),o=0;o<Zn.length;o++)c=Zn[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<Zn.length&&(o=Zn[0],o.blockedOn===null);)bd(o),o.blockedOn===null&&Zn.shift()}var Kr=_.ReactCurrentBatchConfig,jo=!0;function bx(t,n,o,c){var p=Le,g=Kr.transition;Kr.transition=null;try{Le=1,ja(t,n,o,c)}finally{Le=p,Kr.transition=g}}function vx(t,n,o,c){var p=Le,g=Kr.transition;Kr.transition=null;try{Le=4,ja(t,n,o,c)}finally{Le=p,Kr.transition=g}}function ja(t,n,o,c){if(jo){var p=Sa(t,n,o,c);if(p===null)Ua(t,n,c,So,o),yd(t,c);else if(gx(p,t,n,o,c))c.stopPropagation();else if(yd(t,c),n&4&&-1<xx.indexOf(t)){for(;p!==null;){var g=ci(p);if(g!==null&&md(g),g=Sa(t,n,o,c),g===null&&Ua(t,n,c,So,o),g===p)break;p=g}p!==null&&c.stopPropagation()}else Ua(t,n,c,null,o)}}var So=null;function Sa(t,n,o,c){if(So=null,t=vr(c),t=Sr(t),t!==null)if(n=Pn(t),n===null)t=null;else if(o=n.tag,o===13){if(t=lo(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return So=t,null}function wd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ga()){case Bs:return 1;case ho:return 4;case Gr:case xo:return 16;case go:return 536870912;default:return 16}default:return 16}}var Kn=null,Ea=null,Eo=null;function Nd(){if(Eo)return Eo;var t,n=Ea,o=n.length,c,p="value"in Kn?Kn.value:Kn.textContent,g=p.length;for(t=0;t<o&&n[t]===p[t];t++);var C=o-t;for(c=1;c<=C&&n[o-c]===p[g-c];c++);return Eo=p.slice(t,1<c?1-c:void 0)}function Co(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ko(){return!0}function jd(){return!1}function At(t){function n(o,c,p,g,C){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=C,this.currentTarget=null;for(var B in t)t.hasOwnProperty(B)&&(o=t[B],this[B]=o?o(g):g[B]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ko:jd,this.isPropagationStopped=jd,this}return q(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),n}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=At(Qr),Qs=q({},Qr,{view:0,detail:0}),wx=At(Qs),ka,Ia,Js,Io=q({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ma,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(ka=t.screenX-Js.screenX,Ia=t.screenY-Js.screenY):Ia=ka=0,Js=t),ka)},movementY:function(t){return"movementY"in t?t.movementY:Ia}}),Sd=At(Io),Nx=q({},Io,{dataTransfer:0}),jx=At(Nx),Sx=q({},Qs,{relatedTarget:0}),Ra=At(Sx),Ex=q({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Cx=At(Ex),kx=q({},Qr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ix=At(kx),Rx=q({},Qr,{data:0}),Ed=At(Rx),Mx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_x={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Px(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=zx[t])?!!n[t]:!1}function Ma(){return Px}var Ax=q({},Qs,{key:function(t){if(t.key){var n=Mx[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Co(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_x[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ma,charCode:function(t){return t.type==="keypress"?Co(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Co(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tx=At(Ax),Lx=q({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=At(Lx),Dx=q({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ma}),$x=At(Dx),Ox=q({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fx=At(Ox),Ux=q({},Io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wx=At(Ux),Bx=[9,13,27,32],_a=f&&"CompositionEvent"in window,ei=null;f&&"documentMode"in document&&(ei=document.documentMode);var Hx=f&&"TextEvent"in window&&!ei,kd=f&&(!_a||ei&&8<ei&&11>=ei),Id=" ",Rd=!1;function Md(t,n){switch(t){case"keyup":return Bx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _d(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function Vx(t,n){switch(t){case"compositionend":return _d(n);case"keypress":return n.which!==32?null:(Rd=!0,Id);case"textInput":return t=n.data,t===Id&&Rd?null:t;default:return null}}function qx(t,n){if(Jr)return t==="compositionend"||!_a&&Md(t,n)?(t=Nd(),Eo=Ea=Kn=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return kd&&n.locale!=="ko"?null:n.data;default:return null}}var Xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Xx[t.type]:n==="textarea"}function Pd(t,n,o,c){to(c),n=Po(n,"onChange"),0<n.length&&(o=new Ca("onChange","change",null,o,c),t.push({event:o,listeners:n}))}var ti=null,ni=null;function Yx(t){Kd(t,0)}function Ro(t){var n=ss(t);if(ke(n))return t}function Gx(t,n){if(t==="change")return n}var Ad=!1;if(f){var za;if(f){var Pa="oninput"in document;if(!Pa){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Pa=typeof Td.oninput=="function"}za=Pa}else za=!1;Ad=za&&(!document.documentMode||9<document.documentMode)}function Ld(){ti&&(ti.detachEvent("onpropertychange",Dd),ni=ti=null)}function Dd(t){if(t.propertyName==="value"&&Ro(ni)){var n=[];Pd(n,ni,t,vr(t)),io(Yx,n)}}function Zx(t,n,o){t==="focusin"?(Ld(),ti=n,ni=o,ti.attachEvent("onpropertychange",Dd)):t==="focusout"&&Ld()}function Kx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(ni)}function Qx(t,n){if(t==="click")return Ro(n)}function Jx(t,n){if(t==="input"||t==="change")return Ro(n)}function eg(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var rn=typeof Object.is=="function"?Object.is:eg;function ri(t,n){if(rn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),c=Object.keys(n);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!x.call(n,p)||!rn(t[p],n[p]))return!1}return!0}function $d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Od(t,n){var o=$d(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=n&&c>=n)return{node:o,offset:n-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=$d(o)}}function Fd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Fd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ud(){for(var t=window,n=Re();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=Re(t.document)}return n}function Aa(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function tg(t){var n=Ud(),o=t.focusedElem,c=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&Fd(o.ownerDocument.documentElement,o)){if(c!==null&&Aa(o)){if(n=c.start,t=c.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var p=o.textContent.length,g=Math.min(c.start,p);c=c.end===void 0?g:Math.min(c.end,p),!t.extend&&g>c&&(p=c,c=g,g=p),p=Od(o,g);var C=Od(o,c);p&&C&&(t.rangeCount!==1||t.anchorNode!==p.node||t.anchorOffset!==p.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),t.removeAllRanges(),g>c?(t.addRange(n),t.extend(C.node,C.offset)):(n.setEnd(C.node,C.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ng=f&&"documentMode"in document&&11>=document.documentMode,es=null,Ta=null,si=null,La=!1;function Wd(t,n,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;La||es==null||es!==Re(c)||(c=es,"selectionStart"in c&&Aa(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),si&&ri(si,c)||(si=c,c=Po(Ta,"onSelect"),0<c.length&&(n=new Ca("onSelect","select",null,n,o),t.push({event:n,listeners:c}),n.target=es)))}function Mo(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var ts={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},Da={},Bd={};f&&(Bd=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function _o(t){if(Da[t])return Da[t];if(!ts[t])return t;var n=ts[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in Bd)return Da[t]=n[o];return t}var Hd=_o("animationend"),Vd=_o("animationiteration"),qd=_o("animationstart"),Xd=_o("transitionend"),Yd=new Map,Gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(t,n){Yd.set(t,n),u(n,[t])}for(var $a=0;$a<Gd.length;$a++){var Oa=Gd[$a],rg=Oa.toLowerCase(),sg=Oa[0].toUpperCase()+Oa.slice(1);Qn(rg,"on"+sg)}Qn(Hd,"onAnimationEnd"),Qn(Vd,"onAnimationIteration"),Qn(qd,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(Xd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ig=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function Zd(t,n,o){var c=t.type||"unknown-event";t.currentTarget=o,oo(c,n,void 0,t),t.currentTarget=null}function Kd(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],p=c.event;c=c.listeners;e:{var g=void 0;if(n)for(var C=c.length-1;0<=C;C--){var B=c[C],G=B.instance,se=B.currentTarget;if(B=B.listener,G!==g&&p.isPropagationStopped())break e;Zd(p,B,se),g=G}else for(C=0;C<c.length;C++){if(B=c[C],G=B.instance,se=B.currentTarget,B=B.listener,G!==g&&p.isPropagationStopped())break e;Zd(p,B,se),g=G}}}if(Yr)throw t=Ws,Yr=!1,Ws=null,t}function Fe(t,n){var o=n[Xa];o===void 0&&(o=n[Xa]=new Set);var c=t+"__bubble";o.has(c)||(Qd(n,t,2,!1),o.add(c))}function Fa(t,n,o){var c=0;n&&(c|=4),Qd(o,t,c,n)}var zo="_reactListening"+Math.random().toString(36).slice(2);function oi(t){if(!t[zo]){t[zo]=!0,l.forEach(function(o){o!=="selectionchange"&&(ig.has(o)||Fa(o,!1,t),Fa(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[zo]||(n[zo]=!0,Fa("selectionchange",!1,n))}}function Qd(t,n,o,c){switch(wd(n)){case 1:var p=bx;break;case 4:p=vx;break;default:p=ja}o=p.bind(null,n,o,t),p=void 0,!Us||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(n,o,{capture:!0,passive:p}):t.addEventListener(n,o,!0):p!==void 0?t.addEventListener(n,o,{passive:p}):t.addEventListener(n,o,!1)}function Ua(t,n,o,c,p){var g=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var B=c.stateNode.containerInfo;if(B===p||B.nodeType===8&&B.parentNode===p)break;if(C===4)for(C=c.return;C!==null;){var G=C.tag;if((G===3||G===4)&&(G=C.stateNode.containerInfo,G===p||G.nodeType===8&&G.parentNode===p))return;C=C.return}for(;B!==null;){if(C=Sr(B),C===null)return;if(G=C.tag,G===5||G===6){c=g=C;continue e}B=B.parentNode}}c=c.return}io(function(){var se=g,fe=vr(o),me=[];e:{var de=Yd.get(t);if(de!==void 0){var ge=Ca,be=t;switch(t){case"keypress":if(Co(o)===0)break e;case"keydown":case"keyup":ge=Tx;break;case"focusin":be="focus",ge=Ra;break;case"focusout":be="blur",ge=Ra;break;case"beforeblur":case"afterblur":ge=Ra;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=jx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=$x;break;case Hd:case Vd:case qd:ge=Cx;break;case Xd:ge=Fx;break;case"scroll":ge=wx;break;case"wheel":ge=Wx;break;case"copy":case"cut":case"paste":ge=Ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Cd}var we=(n&4)!==0,Ke=!we&&t==="scroll",ee=we?de!==null?de+"Capture":null:de;we=[];for(var Z=se,te;Z!==null;){te=Z;var he=te.stateNode;if(te.tag===5&&he!==null&&(te=he,ee!==null&&(he=wr(Z,ee),he!=null&&we.push(li(Z,he,te)))),Ke)break;Z=Z.return}0<we.length&&(de=new ge(de,be,null,o,fe),me.push({event:de,listeners:we}))}}if((n&7)===0){e:{if(de=t==="mouseover"||t==="pointerover",ge=t==="mouseout"||t==="pointerout",de&&o!==Mn&&(be=o.relatedTarget||o.fromElement)&&(Sr(be)||be[An]))break e;if((ge||de)&&(de=fe.window===fe?fe:(de=fe.ownerDocument)?de.defaultView||de.parentWindow:window,ge?(be=o.relatedTarget||o.toElement,ge=se,be=be?Sr(be):null,be!==null&&(Ke=Pn(be),be!==Ke||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=se),ge!==be)){if(we=Sd,he="onMouseLeave",ee="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(we=Cd,he="onPointerLeave",ee="onPointerEnter",Z="pointer"),Ke=ge==null?de:ss(ge),te=be==null?de:ss(be),de=new we(he,Z+"leave",ge,o,fe),de.target=Ke,de.relatedTarget=te,he=null,Sr(fe)===se&&(we=new we(ee,Z+"enter",be,o,fe),we.target=te,we.relatedTarget=Ke,he=we),Ke=he,ge&&be)t:{for(we=ge,ee=be,Z=0,te=we;te;te=ns(te))Z++;for(te=0,he=ee;he;he=ns(he))te++;for(;0<Z-te;)we=ns(we),Z--;for(;0<te-Z;)ee=ns(ee),te--;for(;Z--;){if(we===ee||ee!==null&&we===ee.alternate)break t;we=ns(we),ee=ns(ee)}we=null}else we=null;ge!==null&&Jd(me,de,ge,we,!1),be!==null&&Ke!==null&&Jd(me,Ke,be,we,!0)}}e:{if(de=se?ss(se):window,ge=de.nodeName&&de.nodeName.toLowerCase(),ge==="select"||ge==="input"&&de.type==="file")var Ne=Gx;else if(zd(de))if(Ad)Ne=Jx;else{Ne=Kx;var Se=Zx}else(ge=de.nodeName)&&ge.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Ne=Qx);if(Ne&&(Ne=Ne(t,se))){Pd(me,Ne,o,fe);break e}Se&&Se(t,de,se),t==="focusout"&&(Se=de._wrapperState)&&Se.controlled&&de.type==="number"&&Qe(de,"number",de.value)}switch(Se=se?ss(se):window,t){case"focusin":(zd(Se)||Se.contentEditable==="true")&&(es=Se,Ta=se,si=null);break;case"focusout":si=Ta=es=null;break;case"mousedown":La=!0;break;case"contextmenu":case"mouseup":case"dragend":La=!1,Wd(me,o,fe);break;case"selectionchange":if(ng)break;case"keydown":case"keyup":Wd(me,o,fe)}var Ee;if(_a)e:{switch(t){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Jr?Md(t,o)&&(Ce="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ce="onCompositionStart");Ce&&(kd&&o.locale!=="ko"&&(Jr||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Jr&&(Ee=Nd()):(Kn=fe,Ea="value"in Kn?Kn.value:Kn.textContent,Jr=!0)),Se=Po(se,Ce),0<Se.length&&(Ce=new Ed(Ce,t,null,o,fe),me.push({event:Ce,listeners:Se}),Ee?Ce.data=Ee:(Ee=_d(o),Ee!==null&&(Ce.data=Ee)))),(Ee=Hx?Vx(t,o):qx(t,o))&&(se=Po(se,"onBeforeInput"),0<se.length&&(fe=new Ed("onBeforeInput","beforeinput",null,o,fe),me.push({event:fe,listeners:se}),fe.data=Ee))}Kd(me,n)})}function li(t,n,o){return{instance:t,listener:n,currentTarget:o}}function Po(t,n){for(var o=n+"Capture",c=[];t!==null;){var p=t,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=wr(t,o),g!=null&&c.unshift(li(t,g,p)),g=wr(t,n),g!=null&&c.push(li(t,g,p))),t=t.return}return c}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jd(t,n,o,c,p){for(var g=n._reactName,C=[];o!==null&&o!==c;){var B=o,G=B.alternate,se=B.stateNode;if(G!==null&&G===c)break;B.tag===5&&se!==null&&(B=se,p?(G=wr(o,g),G!=null&&C.unshift(li(o,G,B))):p||(G=wr(o,g),G!=null&&C.push(li(o,G,B)))),o=o.return}C.length!==0&&t.push({event:n,listeners:C})}var og=/\r\n?/g,lg=/\u0000|\uFFFD/g;function ef(t){return(typeof t=="string"?t:""+t).replace(og,`
`).replace(lg,"")}function Ao(t,n,o){if(n=ef(n),ef(t)!==n&&o)throw Error(i(425))}function To(){}var Wa=null,Ba=null;function Ha(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Va=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,cg=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(t){return tf.resolve(null).then(t).catch(ug)}:Va;function ug(t){setTimeout(function(){throw t})}function qa(t,n){var o=n,c=0;do{var p=o.nextSibling;if(t.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(c===0){t.removeChild(p),Ks(n);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=p}while(o);Ks(n)}function Jn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var rs=Math.random().toString(36).slice(2),bn="__reactFiber$"+rs,ai="__reactProps$"+rs,An="__reactContainer$"+rs,Xa="__reactEvents$"+rs,dg="__reactListeners$"+rs,fg="__reactHandles$"+rs;function Sr(t){var n=t[bn];if(n)return n;for(var o=t.parentNode;o;){if(n=o[An]||o[bn]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=nf(t);t!==null;){if(o=t[bn])return o;t=nf(t)}return n}t=o,o=t.parentNode}return null}function ci(t){return t=t[bn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(i(33))}function Lo(t){return t[ai]||null}var Ya=[],is=-1;function er(t){return{current:t}}function Ue(t){0>is||(t.current=Ya[is],Ya[is]=null,is--)}function Oe(t,n){is++,Ya[is]=t.current,t.current=n}var tr={},pt=er(tr),Nt=er(!1),Er=tr;function os(t,n){var o=t.type.contextTypes;if(!o)return tr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in o)p[g]=n[g];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=p),p}function jt(t){return t=t.childContextTypes,t!=null}function Do(){Ue(Nt),Ue(pt)}function rf(t,n,o){if(pt.current!==tr)throw Error(i(168));Oe(pt,n),Oe(Nt,o)}function sf(t,n,o){var c=t.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var p in c)if(!(p in n))throw Error(i(108,J(t)||"Unknown",p));return q({},o,c)}function $o(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,Er=pt.current,Oe(pt,t),Oe(Nt,Nt.current),!0}function of(t,n,o){var c=t.stateNode;if(!c)throw Error(i(169));o?(t=sf(t,n,Er),c.__reactInternalMemoizedMergedChildContext=t,Ue(Nt),Ue(pt),Oe(pt,t)):Ue(Nt),Oe(Nt,o)}var Tn=null,Oo=!1,Ga=!1;function lf(t){Tn===null?Tn=[t]:Tn.push(t)}function pg(t){Oo=!0,lf(t)}function nr(){if(!Ga&&Tn!==null){Ga=!0;var t=0,n=Le;try{var o=Tn;for(Le=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}Tn=null,Oo=!1}catch(p){throw Tn!==null&&(Tn=Tn.slice(t+1)),fo(Bs,nr),p}finally{Le=n,Ga=!1}}return null}var ls=[],as=0,Fo=null,Uo=0,Ht=[],Vt=0,Cr=null,Ln=1,Dn="";function kr(t,n){ls[as++]=Uo,ls[as++]=Fo,Fo=t,Uo=n}function af(t,n,o){Ht[Vt++]=Ln,Ht[Vt++]=Dn,Ht[Vt++]=Cr,Cr=t;var c=Ln;t=Dn;var p=32-nn(c)-1;c&=~(1<<p),o+=1;var g=32-nn(n)+p;if(30<g){var C=p-p%5;g=(c&(1<<C)-1).toString(32),c>>=C,p-=C,Ln=1<<32-nn(n)+p|o<<p|c,Dn=g+t}else Ln=1<<g|o<<p|c,Dn=t}function Za(t){t.return!==null&&(kr(t,1),af(t,1,0))}function Ka(t){for(;t===Fo;)Fo=ls[--as],ls[as]=null,Uo=ls[--as],ls[as]=null;for(;t===Cr;)Cr=Ht[--Vt],Ht[Vt]=null,Dn=Ht[--Vt],Ht[Vt]=null,Ln=Ht[--Vt],Ht[Vt]=null}var Tt=null,Lt=null,Be=!1,sn=null;function cf(t,n){var o=Gt(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function uf(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Tt=t,Lt=Jn(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Tt=t,Lt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Cr!==null?{id:Ln,overflow:Dn}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Gt(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,Tt=t,Lt=null,!0):!1;default:return!1}}function Qa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ja(t){if(Be){var n=Lt;if(n){var o=n;if(!uf(t,n)){if(Qa(t))throw Error(i(418));n=Jn(o.nextSibling);var c=Tt;n&&uf(t,n)?cf(c,o):(t.flags=t.flags&-4097|2,Be=!1,Tt=t)}}else{if(Qa(t))throw Error(i(418));t.flags=t.flags&-4097|2,Be=!1,Tt=t}}}function df(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function Wo(t){if(t!==Tt)return!1;if(!Be)return df(t),Be=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Ha(t.type,t.memoizedProps)),n&&(n=Lt)){if(Qa(t))throw ff(),Error(i(418));for(;n;)cf(t,n),n=Jn(n.nextSibling)}if(df(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){Lt=Jn(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}Lt=null}}else Lt=Tt?Jn(t.stateNode.nextSibling):null;return!0}function ff(){for(var t=Lt;t;)t=Jn(t.nextSibling)}function cs(){Lt=Tt=null,Be=!1}function ec(t){sn===null?sn=[t]:sn.push(t)}var mg=_.ReactCurrentBatchConfig;function ui(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(i(309));var c=o.stateNode}if(!c)throw Error(i(147,t));var p=c,g=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===g?n.ref:(n=function(C){var B=p.refs;C===null?delete B[g]:B[g]=C},n._stringRef=g,n)}if(typeof t!="string")throw Error(i(284));if(!o._owner)throw Error(i(290,t))}return t}function Bo(t,n){throw t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function pf(t){var n=t._init;return n(t._payload)}function mf(t){function n(ee,Z){if(t){var te=ee.deletions;te===null?(ee.deletions=[Z],ee.flags|=16):te.push(Z)}}function o(ee,Z){if(!t)return null;for(;Z!==null;)n(ee,Z),Z=Z.sibling;return null}function c(ee,Z){for(ee=new Map;Z!==null;)Z.key!==null?ee.set(Z.key,Z):ee.set(Z.index,Z),Z=Z.sibling;return ee}function p(ee,Z){return ee=ur(ee,Z),ee.index=0,ee.sibling=null,ee}function g(ee,Z,te){return ee.index=te,t?(te=ee.alternate,te!==null?(te=te.index,te<Z?(ee.flags|=2,Z):te):(ee.flags|=2,Z)):(ee.flags|=1048576,Z)}function C(ee){return t&&ee.alternate===null&&(ee.flags|=2),ee}function B(ee,Z,te,he){return Z===null||Z.tag!==6?(Z=Vc(te,ee.mode,he),Z.return=ee,Z):(Z=p(Z,te),Z.return=ee,Z)}function G(ee,Z,te,he){var Ne=te.type;return Ne===R?fe(ee,Z,te.props.children,he,te.key):Z!==null&&(Z.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===P&&pf(Ne)===Z.type)?(he=p(Z,te.props),he.ref=ui(ee,Z,te),he.return=ee,he):(he=pl(te.type,te.key,te.props,null,ee.mode,he),he.ref=ui(ee,Z,te),he.return=ee,he)}function se(ee,Z,te,he){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==te.containerInfo||Z.stateNode.implementation!==te.implementation?(Z=qc(te,ee.mode,he),Z.return=ee,Z):(Z=p(Z,te.children||[]),Z.return=ee,Z)}function fe(ee,Z,te,he,Ne){return Z===null||Z.tag!==7?(Z=Tr(te,ee.mode,he,Ne),Z.return=ee,Z):(Z=p(Z,te),Z.return=ee,Z)}function me(ee,Z,te){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Vc(""+Z,ee.mode,te),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case L:return te=pl(Z.type,Z.key,Z.props,null,ee.mode,te),te.ref=ui(ee,null,Z),te.return=ee,te;case D:return Z=qc(Z,ee.mode,te),Z.return=ee,Z;case P:var he=Z._init;return me(ee,he(Z._payload),te)}if(gt(Z)||U(Z))return Z=Tr(Z,ee.mode,te,null),Z.return=ee,Z;Bo(ee,Z)}return null}function de(ee,Z,te,he){var Ne=Z!==null?Z.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Ne!==null?null:B(ee,Z,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return te.key===Ne?G(ee,Z,te,he):null;case D:return te.key===Ne?se(ee,Z,te,he):null;case P:return Ne=te._init,de(ee,Z,Ne(te._payload),he)}if(gt(te)||U(te))return Ne!==null?null:fe(ee,Z,te,he,null);Bo(ee,te)}return null}function ge(ee,Z,te,he,Ne){if(typeof he=="string"&&he!==""||typeof he=="number")return ee=ee.get(te)||null,B(Z,ee,""+he,Ne);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case L:return ee=ee.get(he.key===null?te:he.key)||null,G(Z,ee,he,Ne);case D:return ee=ee.get(he.key===null?te:he.key)||null,se(Z,ee,he,Ne);case P:var Se=he._init;return ge(ee,Z,te,Se(he._payload),Ne)}if(gt(he)||U(he))return ee=ee.get(te)||null,fe(Z,ee,he,Ne,null);Bo(Z,he)}return null}function be(ee,Z,te,he){for(var Ne=null,Se=null,Ee=Z,Ce=Z=0,at=null;Ee!==null&&Ce<te.length;Ce++){Ee.index>Ce?(at=Ee,Ee=null):at=Ee.sibling;var Te=de(ee,Ee,te[Ce],he);if(Te===null){Ee===null&&(Ee=at);break}t&&Ee&&Te.alternate===null&&n(ee,Ee),Z=g(Te,Z,Ce),Se===null?Ne=Te:Se.sibling=Te,Se=Te,Ee=at}if(Ce===te.length)return o(ee,Ee),Be&&kr(ee,Ce),Ne;if(Ee===null){for(;Ce<te.length;Ce++)Ee=me(ee,te[Ce],he),Ee!==null&&(Z=g(Ee,Z,Ce),Se===null?Ne=Ee:Se.sibling=Ee,Se=Ee);return Be&&kr(ee,Ce),Ne}for(Ee=c(ee,Ee);Ce<te.length;Ce++)at=ge(Ee,ee,Ce,te[Ce],he),at!==null&&(t&&at.alternate!==null&&Ee.delete(at.key===null?Ce:at.key),Z=g(at,Z,Ce),Se===null?Ne=at:Se.sibling=at,Se=at);return t&&Ee.forEach(function(dr){return n(ee,dr)}),Be&&kr(ee,Ce),Ne}function we(ee,Z,te,he){var Ne=U(te);if(typeof Ne!="function")throw Error(i(150));if(te=Ne.call(te),te==null)throw Error(i(151));for(var Se=Ne=null,Ee=Z,Ce=Z=0,at=null,Te=te.next();Ee!==null&&!Te.done;Ce++,Te=te.next()){Ee.index>Ce?(at=Ee,Ee=null):at=Ee.sibling;var dr=de(ee,Ee,Te.value,he);if(dr===null){Ee===null&&(Ee=at);break}t&&Ee&&dr.alternate===null&&n(ee,Ee),Z=g(dr,Z,Ce),Se===null?Ne=dr:Se.sibling=dr,Se=dr,Ee=at}if(Te.done)return o(ee,Ee),Be&&kr(ee,Ce),Ne;if(Ee===null){for(;!Te.done;Ce++,Te=te.next())Te=me(ee,Te.value,he),Te!==null&&(Z=g(Te,Z,Ce),Se===null?Ne=Te:Se.sibling=Te,Se=Te);return Be&&kr(ee,Ce),Ne}for(Ee=c(ee,Ee);!Te.done;Ce++,Te=te.next())Te=ge(Ee,ee,Ce,Te.value,he),Te!==null&&(t&&Te.alternate!==null&&Ee.delete(Te.key===null?Ce:Te.key),Z=g(Te,Z,Ce),Se===null?Ne=Te:Se.sibling=Te,Se=Te);return t&&Ee.forEach(function(Xg){return n(ee,Xg)}),Be&&kr(ee,Ce),Ne}function Ke(ee,Z,te,he){if(typeof te=="object"&&te!==null&&te.type===R&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case L:e:{for(var Ne=te.key,Se=Z;Se!==null;){if(Se.key===Ne){if(Ne=te.type,Ne===R){if(Se.tag===7){o(ee,Se.sibling),Z=p(Se,te.props.children),Z.return=ee,ee=Z;break e}}else if(Se.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===P&&pf(Ne)===Se.type){o(ee,Se.sibling),Z=p(Se,te.props),Z.ref=ui(ee,Se,te),Z.return=ee,ee=Z;break e}o(ee,Se);break}else n(ee,Se);Se=Se.sibling}te.type===R?(Z=Tr(te.props.children,ee.mode,he,te.key),Z.return=ee,ee=Z):(he=pl(te.type,te.key,te.props,null,ee.mode,he),he.ref=ui(ee,Z,te),he.return=ee,ee=he)}return C(ee);case D:e:{for(Se=te.key;Z!==null;){if(Z.key===Se)if(Z.tag===4&&Z.stateNode.containerInfo===te.containerInfo&&Z.stateNode.implementation===te.implementation){o(ee,Z.sibling),Z=p(Z,te.children||[]),Z.return=ee,ee=Z;break e}else{o(ee,Z);break}else n(ee,Z);Z=Z.sibling}Z=qc(te,ee.mode,he),Z.return=ee,ee=Z}return C(ee);case P:return Se=te._init,Ke(ee,Z,Se(te._payload),he)}if(gt(te))return be(ee,Z,te,he);if(U(te))return we(ee,Z,te,he);Bo(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,Z!==null&&Z.tag===6?(o(ee,Z.sibling),Z=p(Z,te),Z.return=ee,ee=Z):(o(ee,Z),Z=Vc(te,ee.mode,he),Z.return=ee,ee=Z),C(ee)):o(ee,Z)}return Ke}var us=mf(!0),hf=mf(!1),Ho=er(null),Vo=null,ds=null,tc=null;function nc(){tc=ds=Vo=null}function rc(t){var n=Ho.current;Ue(Ho),t._currentValue=n}function sc(t,n,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),t===o)break;t=t.return}}function fs(t,n){Vo=t,tc=ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(St=!0),t.firstContext=null)}function qt(t){var n=t._currentValue;if(tc!==t)if(t={context:t,memoizedValue:n,next:null},ds===null){if(Vo===null)throw Error(i(308));ds=t,Vo.dependencies={lanes:0,firstContext:t}}else ds=ds.next=t;return n}var Ir=null;function ic(t){Ir===null?Ir=[t]:Ir.push(t)}function xf(t,n,o,c){var p=n.interleaved;return p===null?(o.next=o,ic(n)):(o.next=p.next,p.next=o),n.interleaved=o,$n(t,c)}function $n(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var rr=!1;function oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function sr(t,n,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ae&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,$n(t,o)}return p=c.interleaved,p===null?(n.next=n,ic(c)):(n.next=p.next,p.next=n),c.interleaved=n,$n(t,o)}function qo(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var c=n.lanes;c&=t.pendingLanes,o|=c,n.lanes=o,va(t,o)}}function yf(t,n){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var C={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};g===null?p=g=C:g=g.next=C,o=o.next}while(o!==null);g===null?p=g=n:g=g.next=n}else p=g=n;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function Xo(t,n,o,c){var p=t.updateQueue;rr=!1;var g=p.firstBaseUpdate,C=p.lastBaseUpdate,B=p.shared.pending;if(B!==null){p.shared.pending=null;var G=B,se=G.next;G.next=null,C===null?g=se:C.next=se,C=G;var fe=t.alternate;fe!==null&&(fe=fe.updateQueue,B=fe.lastBaseUpdate,B!==C&&(B===null?fe.firstBaseUpdate=se:B.next=se,fe.lastBaseUpdate=G))}if(g!==null){var me=p.baseState;C=0,fe=se=G=null,B=g;do{var de=B.lane,ge=B.eventTime;if((c&de)===de){fe!==null&&(fe=fe.next={eventTime:ge,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var be=t,we=B;switch(de=n,ge=o,we.tag){case 1:if(be=we.payload,typeof be=="function"){me=be.call(ge,me,de);break e}me=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=we.payload,de=typeof be=="function"?be.call(ge,me,de):be,de==null)break e;me=q({},me,de);break e;case 2:rr=!0}}B.callback!==null&&B.lane!==0&&(t.flags|=64,de=p.effects,de===null?p.effects=[B]:de.push(B))}else ge={eventTime:ge,lane:de,tag:B.tag,payload:B.payload,callback:B.callback,next:null},fe===null?(se=fe=ge,G=me):fe=fe.next=ge,C|=de;if(B=B.next,B===null){if(B=p.shared.pending,B===null)break;de=B,B=de.next,de.next=null,p.lastBaseUpdate=de,p.shared.pending=null}}while(!0);if(fe===null&&(G=me),p.baseState=G,p.firstBaseUpdate=se,p.lastBaseUpdate=fe,n=p.shared.interleaved,n!==null){p=n;do C|=p.lane,p=p.next;while(p!==n)}else g===null&&(p.shared.lanes=0);_r|=C,t.lanes=C,t.memoizedState=me}}function bf(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var c=t[n],p=c.callback;if(p!==null){if(c.callback=null,c=o,typeof p!="function")throw Error(i(191,p));p.call(c)}}}var di={},vn=er(di),fi=er(di),pi=er(di);function Rr(t){if(t===di)throw Error(i(174));return t}function lc(t,n){switch(Oe(pi,n),Oe(fi,t),Oe(vn,di),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Jt(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Jt(n,t)}Ue(vn),Oe(vn,n)}function ps(){Ue(vn),Ue(fi),Ue(pi)}function vf(t){Rr(pi.current);var n=Rr(vn.current),o=Jt(n,t.type);n!==o&&(Oe(fi,t),Oe(vn,o))}function ac(t){fi.current===t&&(Ue(vn),Ue(fi))}var Ve=er(0);function Yo(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var cc=[];function uc(){for(var t=0;t<cc.length;t++)cc[t]._workInProgressVersionPrimary=null;cc.length=0}var Go=_.ReactCurrentDispatcher,dc=_.ReactCurrentBatchConfig,Mr=0,qe=null,et=null,ot=null,Zo=!1,mi=!1,hi=0,hg=0;function mt(){throw Error(i(321))}function fc(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!rn(t[o],n[o]))return!1;return!0}function pc(t,n,o,c,p,g){if(Mr=g,qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Go.current=t===null||t.memoizedState===null?bg:vg,t=o(c,p),mi){g=0;do{if(mi=!1,hi=0,25<=g)throw Error(i(301));g+=1,ot=et=null,n.updateQueue=null,Go.current=wg,t=o(c,p)}while(mi)}if(Go.current=Jo,n=et!==null&&et.next!==null,Mr=0,ot=et=qe=null,Zo=!1,n)throw Error(i(300));return t}function mc(){var t=hi!==0;return hi=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?qe.memoizedState=ot=t:ot=ot.next=t,ot}function Xt(){if(et===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var n=ot===null?qe.memoizedState:ot.next;if(n!==null)ot=n,et=t;else{if(t===null)throw Error(i(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},ot===null?qe.memoizedState=ot=t:ot=ot.next=t}return ot}function xi(t,n){return typeof n=="function"?n(t):n}function hc(t){var n=Xt(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=et,p=c.baseQueue,g=o.pending;if(g!==null){if(p!==null){var C=p.next;p.next=g.next,g.next=C}c.baseQueue=p=g,o.pending=null}if(p!==null){g=p.next,c=c.baseState;var B=C=null,G=null,se=g;do{var fe=se.lane;if((Mr&fe)===fe)G!==null&&(G=G.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),c=se.hasEagerState?se.eagerState:t(c,se.action);else{var me={lane:fe,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};G===null?(B=G=me,C=c):G=G.next=me,qe.lanes|=fe,_r|=fe}se=se.next}while(se!==null&&se!==g);G===null?C=c:G.next=B,rn(c,n.memoizedState)||(St=!0),n.memoizedState=c,n.baseState=C,n.baseQueue=G,o.lastRenderedState=c}if(t=o.interleaved,t!==null){p=t;do g=p.lane,qe.lanes|=g,_r|=g,p=p.next;while(p!==t)}else p===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function xc(t){var n=Xt(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,p=o.pending,g=n.memoizedState;if(p!==null){o.pending=null;var C=p=p.next;do g=t(g,C.action),C=C.next;while(C!==p);rn(g,n.memoizedState)||(St=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),o.lastRenderedState=g}return[g,c]}function wf(){}function Nf(t,n){var o=qe,c=Xt(),p=n(),g=!rn(c.memoizedState,p);if(g&&(c.memoizedState=p,St=!0),c=c.queue,gc(Ef.bind(null,o,c,t),[t]),c.getSnapshot!==n||g||ot!==null&&ot.memoizedState.tag&1){if(o.flags|=2048,gi(9,Sf.bind(null,o,c,p,n),void 0,null),lt===null)throw Error(i(349));(Mr&30)!==0||jf(o,n,p)}return p}function jf(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=qe.updateQueue,n===null?(n={lastEffect:null,stores:null},qe.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Sf(t,n,o,c){n.value=o,n.getSnapshot=c,Cf(n)&&kf(t)}function Ef(t,n,o){return o(function(){Cf(n)&&kf(t)})}function Cf(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!rn(t,o)}catch{return!0}}function kf(t){var n=$n(t,1);n!==null&&cn(n,t,1,-1)}function If(t){var n=wn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},n.queue=t,t=t.dispatch=yg.bind(null,qe,t),[n.memoizedState,t]}function gi(t,n,o,c){return t={tag:t,create:n,destroy:o,deps:c,next:null},n=qe.updateQueue,n===null?(n={lastEffect:null,stores:null},qe.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,n.lastEffect=t)),t}function Rf(){return Xt().memoizedState}function Ko(t,n,o,c){var p=wn();qe.flags|=t,p.memoizedState=gi(1|n,o,void 0,c===void 0?null:c)}function Qo(t,n,o,c){var p=Xt();c=c===void 0?null:c;var g=void 0;if(et!==null){var C=et.memoizedState;if(g=C.destroy,c!==null&&fc(c,C.deps)){p.memoizedState=gi(n,o,g,c);return}}qe.flags|=t,p.memoizedState=gi(1|n,o,g,c)}function Mf(t,n){return Ko(8390656,8,t,n)}function gc(t,n){return Qo(2048,8,t,n)}function _f(t,n){return Qo(4,2,t,n)}function zf(t,n){return Qo(4,4,t,n)}function Pf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Af(t,n,o){return o=o!=null?o.concat([t]):null,Qo(4,4,Pf.bind(null,n,t),o)}function yc(){}function Tf(t,n){var o=Xt();n=n===void 0?null:n;var c=o.memoizedState;return c!==null&&n!==null&&fc(n,c[1])?c[0]:(o.memoizedState=[t,n],t)}function Lf(t,n){var o=Xt();n=n===void 0?null:n;var c=o.memoizedState;return c!==null&&n!==null&&fc(n,c[1])?c[0]:(t=t(),o.memoizedState=[t,n],t)}function Df(t,n,o){return(Mr&21)===0?(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=o):(rn(o,n)||(o=fd(),qe.lanes|=o,_r|=o,t.baseState=!0),n)}function xg(t,n){var o=Le;Le=o!==0&&4>o?o:4,t(!0);var c=dc.transition;dc.transition={};try{t(!1),n()}finally{Le=o,dc.transition=c}}function $f(){return Xt().memoizedState}function gg(t,n,o){var c=ar(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Of(t))Ff(n,o);else if(o=xf(t,n,o,c),o!==null){var p=bt();cn(o,t,c,p),Uf(o,n,c)}}function yg(t,n,o){var c=ar(t),p={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Of(t))Ff(n,p);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var C=n.lastRenderedState,B=g(C,o);if(p.hasEagerState=!0,p.eagerState=B,rn(B,C)){var G=n.interleaved;G===null?(p.next=p,ic(n)):(p.next=G.next,G.next=p),n.interleaved=p;return}}catch{}finally{}o=xf(t,n,p,c),o!==null&&(p=bt(),cn(o,t,c,p),Uf(o,n,c))}}function Of(t){var n=t.alternate;return t===qe||n!==null&&n===qe}function Ff(t,n){mi=Zo=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function Uf(t,n,o){if((o&4194240)!==0){var c=n.lanes;c&=t.pendingLanes,o|=c,n.lanes=o,va(t,o)}}var Jo={readContext:qt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},bg={readContext:qt,useCallback:function(t,n){return wn().memoizedState=[t,n===void 0?null:n],t},useContext:qt,useEffect:Mf,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,Ko(4194308,4,Pf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return Ko(4194308,4,t,n)},useInsertionEffect:function(t,n){return Ko(4,2,t,n)},useMemo:function(t,n){var o=wn();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var c=wn();return n=o!==void 0?o(n):n,c.memoizedState=c.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},c.queue=t,t=t.dispatch=gg.bind(null,qe,t),[c.memoizedState,t]},useRef:function(t){var n=wn();return t={current:t},n.memoizedState=t},useState:If,useDebugValue:yc,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=If(!1),n=t[0];return t=xg.bind(null,t[1]),wn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var c=qe,p=wn();if(Be){if(o===void 0)throw Error(i(407));o=o()}else{if(o=n(),lt===null)throw Error(i(349));(Mr&30)!==0||jf(c,n,o)}p.memoizedState=o;var g={value:o,getSnapshot:n};return p.queue=g,Mf(Ef.bind(null,c,g,t),[t]),c.flags|=2048,gi(9,Sf.bind(null,c,g,o,n),void 0,null),o},useId:function(){var t=wn(),n=lt.identifierPrefix;if(Be){var o=Dn,c=Ln;o=(c&~(1<<32-nn(c)-1)).toString(32)+o,n=":"+n+"R"+o,o=hi++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=hg++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},vg={readContext:qt,useCallback:Tf,useContext:qt,useEffect:gc,useImperativeHandle:Af,useInsertionEffect:_f,useLayoutEffect:zf,useMemo:Lf,useReducer:hc,useRef:Rf,useState:function(){return hc(xi)},useDebugValue:yc,useDeferredValue:function(t){var n=Xt();return Df(n,et.memoizedState,t)},useTransition:function(){var t=hc(xi)[0],n=Xt().memoizedState;return[t,n]},useMutableSource:wf,useSyncExternalStore:Nf,useId:$f,unstable_isNewReconciler:!1},wg={readContext:qt,useCallback:Tf,useContext:qt,useEffect:gc,useImperativeHandle:Af,useInsertionEffect:_f,useLayoutEffect:zf,useMemo:Lf,useReducer:xc,useRef:Rf,useState:function(){return xc(xi)},useDebugValue:yc,useDeferredValue:function(t){var n=Xt();return et===null?n.memoizedState=t:Df(n,et.memoizedState,t)},useTransition:function(){var t=xc(xi)[0],n=Xt().memoizedState;return[t,n]},useMutableSource:wf,useSyncExternalStore:Nf,useId:$f,unstable_isNewReconciler:!1};function on(t,n){if(t&&t.defaultProps){n=q({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function bc(t,n,o,c){n=t.memoizedState,o=o(c,n),o=o==null?n:q({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var el={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var c=bt(),p=ar(t),g=On(c,p);g.payload=n,o!=null&&(g.callback=o),n=sr(t,g,p),n!==null&&(cn(n,t,p,c),qo(n,t,p))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var c=bt(),p=ar(t),g=On(c,p);g.tag=1,g.payload=n,o!=null&&(g.callback=o),n=sr(t,g,p),n!==null&&(cn(n,t,p,c),qo(n,t,p))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=bt(),c=ar(t),p=On(o,c);p.tag=2,n!=null&&(p.callback=n),n=sr(t,p,c),n!==null&&(cn(n,t,c,o),qo(n,t,c))}};function Wf(t,n,o,c,p,g,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,g,C):n.prototype&&n.prototype.isPureReactComponent?!ri(o,c)||!ri(p,g):!0}function Bf(t,n,o){var c=!1,p=tr,g=n.contextType;return typeof g=="object"&&g!==null?g=qt(g):(p=jt(n)?Er:pt.current,c=n.contextTypes,g=(c=c!=null)?os(t,p):tr),n=new n(o,g),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=el,t.stateNode=n,n._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=p,t.__reactInternalMemoizedMaskedChildContext=g),n}function Hf(t,n,o,c){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,c),n.state!==t&&el.enqueueReplaceState(n,n.state,null)}function vc(t,n,o,c){var p=t.stateNode;p.props=o,p.state=t.memoizedState,p.refs={},oc(t);var g=n.contextType;typeof g=="object"&&g!==null?p.context=qt(g):(g=jt(n)?Er:pt.current,p.context=os(t,g)),p.state=t.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(bc(t,n,g,o),p.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&el.enqueueReplaceState(p,p.state,null),Xo(t,o,p,c),p.state=t.memoizedState),typeof p.componentDidMount=="function"&&(t.flags|=4194308)}function ms(t,n){try{var o="",c=n;do o+=oe(c),c=c.return;while(c);var p=o}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:n,stack:p,digest:null}}function wc(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function Nc(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Ng=typeof WeakMap=="function"?WeakMap:Map;function Vf(t,n,o){o=On(-1,o),o.tag=3,o.payload={element:null};var c=n.value;return o.callback=function(){ll||(ll=!0,Dc=c),Nc(t,n)},o}function qf(t,n,o){o=On(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var p=n.value;o.payload=function(){return c(p)},o.callback=function(){Nc(t,n)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(o.callback=function(){Nc(t,n),typeof c!="function"&&(or===null?or=new Set([this]):or.add(this));var C=n.stack;this.componentDidCatch(n.value,{componentStack:C!==null?C:""})}),o}function Xf(t,n,o){var c=t.pingCache;if(c===null){c=t.pingCache=new Ng;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(o)||(p.add(o),t=Lg.bind(null,t,n,o),n.then(t,t))}function Yf(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Gf(t,n,o,c,p){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=On(-1,1),n.tag=2,sr(o,n,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=p,t)}var jg=_.ReactCurrentOwner,St=!1;function yt(t,n,o,c){n.child=t===null?hf(n,null,o,c):us(n,t.child,o,c)}function Zf(t,n,o,c,p){o=o.render;var g=n.ref;return fs(n,p),c=pc(t,n,o,c,g,p),o=mc(),t!==null&&!St?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~p,Fn(t,n,p)):(Be&&o&&Za(n),n.flags|=1,yt(t,n,c,p),n.child)}function Kf(t,n,o,c,p){if(t===null){var g=o.type;return typeof g=="function"&&!Hc(g)&&g.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=g,Qf(t,n,g,c,p)):(t=pl(o.type,null,c,n,n.mode,p),t.ref=n.ref,t.return=n,n.child=t)}if(g=t.child,(t.lanes&p)===0){var C=g.memoizedProps;if(o=o.compare,o=o!==null?o:ri,o(C,c)&&t.ref===n.ref)return Fn(t,n,p)}return n.flags|=1,t=ur(g,c),t.ref=n.ref,t.return=n,n.child=t}function Qf(t,n,o,c,p){if(t!==null){var g=t.memoizedProps;if(ri(g,c)&&t.ref===n.ref)if(St=!1,n.pendingProps=c=g,(t.lanes&p)!==0)(t.flags&131072)!==0&&(St=!0);else return n.lanes=t.lanes,Fn(t,n,p)}return jc(t,n,o,c,p)}function Jf(t,n,o){var c=n.pendingProps,p=c.children,g=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(xs,Dt),Dt|=o;else{if((o&1073741824)===0)return t=g!==null?g.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Oe(xs,Dt),Dt|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:o,Oe(xs,Dt),Dt|=c}else g!==null?(c=g.baseLanes|o,n.memoizedState=null):c=o,Oe(xs,Dt),Dt|=c;return yt(t,n,p,o),n.child}function e0(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function jc(t,n,o,c,p){var g=jt(o)?Er:pt.current;return g=os(n,g),fs(n,p),o=pc(t,n,o,c,g,p),c=mc(),t!==null&&!St?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~p,Fn(t,n,p)):(Be&&c&&Za(n),n.flags|=1,yt(t,n,o,p),n.child)}function t0(t,n,o,c,p){if(jt(o)){var g=!0;$o(n)}else g=!1;if(fs(n,p),n.stateNode===null)nl(t,n),Bf(n,o,c),vc(n,o,c,p),c=!0;else if(t===null){var C=n.stateNode,B=n.memoizedProps;C.props=B;var G=C.context,se=o.contextType;typeof se=="object"&&se!==null?se=qt(se):(se=jt(o)?Er:pt.current,se=os(n,se));var fe=o.getDerivedStateFromProps,me=typeof fe=="function"||typeof C.getSnapshotBeforeUpdate=="function";me||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B!==c||G!==se)&&Hf(n,C,c,se),rr=!1;var de=n.memoizedState;C.state=de,Xo(n,c,C,p),G=n.memoizedState,B!==c||de!==G||Nt.current||rr?(typeof fe=="function"&&(bc(n,o,fe,c),G=n.memoizedState),(B=rr||Wf(n,o,B,c,de,G,se))?(me||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(n.flags|=4194308)):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=G),C.props=c,C.state=G,C.context=se,c=B):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{C=n.stateNode,gf(t,n),B=n.memoizedProps,se=n.type===n.elementType?B:on(n.type,B),C.props=se,me=n.pendingProps,de=C.context,G=o.contextType,typeof G=="object"&&G!==null?G=qt(G):(G=jt(o)?Er:pt.current,G=os(n,G));var ge=o.getDerivedStateFromProps;(fe=typeof ge=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B!==me||de!==G)&&Hf(n,C,c,G),rr=!1,de=n.memoizedState,C.state=de,Xo(n,c,C,p);var be=n.memoizedState;B!==me||de!==be||Nt.current||rr?(typeof ge=="function"&&(bc(n,o,ge,c),be=n.memoizedState),(se=rr||Wf(n,o,se,c,de,be,G)||!1)?(fe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(c,be,G),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(c,be,G)),typeof C.componentDidUpdate=="function"&&(n.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof C.componentDidUpdate!="function"||B===t.memoizedProps&&de===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&de===t.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=be),C.props=c,C.state=be,C.context=G,c=se):(typeof C.componentDidUpdate!="function"||B===t.memoizedProps&&de===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&de===t.memoizedState||(n.flags|=1024),c=!1)}return Sc(t,n,o,c,g,p)}function Sc(t,n,o,c,p,g){e0(t,n);var C=(n.flags&128)!==0;if(!c&&!C)return p&&of(n,o,!1),Fn(t,n,g);c=n.stateNode,jg.current=n;var B=C&&typeof o.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,t!==null&&C?(n.child=us(n,t.child,null,g),n.child=us(n,null,B,g)):yt(t,n,B,g),n.memoizedState=c.state,p&&of(n,o,!0),n.child}function n0(t){var n=t.stateNode;n.pendingContext?rf(t,n.pendingContext,n.pendingContext!==n.context):n.context&&rf(t,n.context,!1),lc(t,n.containerInfo)}function r0(t,n,o,c,p){return cs(),ec(p),n.flags|=256,yt(t,n,o,c),n.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function s0(t,n,o){var c=n.pendingProps,p=Ve.current,g=!1,C=(n.flags&128)!==0,B;if((B=C)||(B=t!==null&&t.memoizedState===null?!1:(p&2)!==0),B?(g=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(p|=1),Oe(Ve,p&1),t===null)return Ja(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(C=c.children,t=c.fallback,g?(c=n.mode,g=n.child,C={mode:"hidden",children:C},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=C):g=ml(C,c,0,null),t=Tr(t,c,o,null),g.return=n,t.return=n,g.sibling=t,n.child=g,n.child.memoizedState=Cc(o),n.memoizedState=Ec,t):kc(n,C));if(p=t.memoizedState,p!==null&&(B=p.dehydrated,B!==null))return Sg(t,n,C,c,B,p,o);if(g){g=c.fallback,C=n.mode,p=t.child,B=p.sibling;var G={mode:"hidden",children:c.children};return(C&1)===0&&n.child!==p?(c=n.child,c.childLanes=0,c.pendingProps=G,n.deletions=null):(c=ur(p,G),c.subtreeFlags=p.subtreeFlags&14680064),B!==null?g=ur(B,g):(g=Tr(g,C,o,null),g.flags|=2),g.return=n,c.return=n,c.sibling=g,n.child=c,c=g,g=n.child,C=t.child.memoizedState,C=C===null?Cc(o):{baseLanes:C.baseLanes|o,cachePool:null,transitions:C.transitions},g.memoizedState=C,g.childLanes=t.childLanes&~o,n.memoizedState=Ec,c}return g=t.child,t=g.sibling,c=ur(g,{mode:"visible",children:c.children}),(n.mode&1)===0&&(c.lanes=o),c.return=n,c.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=c,n.memoizedState=null,c}function kc(t,n){return n=ml({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function tl(t,n,o,c){return c!==null&&ec(c),us(n,t.child,null,o),t=kc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Sg(t,n,o,c,p,g,C){if(o)return n.flags&256?(n.flags&=-257,c=wc(Error(i(422))),tl(t,n,C,c)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(g=c.fallback,p=n.mode,c=ml({mode:"visible",children:c.children},p,0,null),g=Tr(g,p,C,null),g.flags|=2,c.return=n,g.return=n,c.sibling=g,n.child=c,(n.mode&1)!==0&&us(n,t.child,null,C),n.child.memoizedState=Cc(C),n.memoizedState=Ec,g);if((n.mode&1)===0)return tl(t,n,C,null);if(p.data==="$!"){if(c=p.nextSibling&&p.nextSibling.dataset,c)var B=c.dgst;return c=B,g=Error(i(419)),c=wc(g,c,void 0),tl(t,n,C,c)}if(B=(C&t.childLanes)!==0,St||B){if(c=lt,c!==null){switch(C&-C){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(c.suspendedLanes|C))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,$n(t,p),cn(c,t,p,-1))}return Bc(),c=wc(Error(i(421))),tl(t,n,C,c)}return p.data==="$?"?(n.flags|=128,n.child=t.child,n=Dg.bind(null,t),p._reactRetry=n,null):(t=g.treeContext,Lt=Jn(p.nextSibling),Tt=n,Be=!0,sn=null,t!==null&&(Ht[Vt++]=Ln,Ht[Vt++]=Dn,Ht[Vt++]=Cr,Ln=t.id,Dn=t.overflow,Cr=n),n=kc(n,c.children),n.flags|=4096,n)}function i0(t,n,o){t.lanes|=n;var c=t.alternate;c!==null&&(c.lanes|=n),sc(t.return,n,o)}function Ic(t,n,o,c,p){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=p)}function o0(t,n,o){var c=n.pendingProps,p=c.revealOrder,g=c.tail;if(yt(t,n,c.children,o),c=Ve.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i0(t,o,n);else if(t.tag===19)i0(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Oe(Ve,c),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(o=n.child,p=null;o!==null;)t=o.alternate,t!==null&&Yo(t)===null&&(p=o),o=o.sibling;o=p,o===null?(p=n.child,n.child=null):(p=o.sibling,o.sibling=null),Ic(n,!1,p,o,g);break;case"backwards":for(o=null,p=n.child,n.child=null;p!==null;){if(t=p.alternate,t!==null&&Yo(t)===null){n.child=p;break}t=p.sibling,p.sibling=o,o=p,p=t}Ic(n,!0,o,null,g);break;case"together":Ic(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function nl(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Fn(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),_r|=n.lanes,(o&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,o=ur(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=ur(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function Eg(t,n,o){switch(n.tag){case 3:n0(n),cs();break;case 5:vf(n);break;case 1:jt(n.type)&&$o(n);break;case 4:lc(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,p=n.memoizedProps.value;Oe(Ho,c._currentValue),c._currentValue=p;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(Oe(Ve,Ve.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?s0(t,n,o):(Oe(Ve,Ve.current&1),t=Fn(t,n,o),t!==null?t.sibling:null);Oe(Ve,Ve.current&1);break;case 19:if(c=(o&n.childLanes)!==0,(t.flags&128)!==0){if(c)return o0(t,n,o);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Oe(Ve,Ve.current),c)break;return null;case 22:case 23:return n.lanes=0,Jf(t,n,o)}return Fn(t,n,o)}var l0,Rc,a0,c0;l0=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Rc=function(){},a0=function(t,n,o,c){var p=t.memoizedProps;if(p!==c){t=n.stateNode,Rr(vn.current);var g=null;switch(o){case"input":p=De(t,p),c=De(t,c),g=[];break;case"select":p=q({},p,{value:void 0}),c=q({},c,{value:void 0}),g=[];break;case"textarea":p=_t(t,p),c=_t(t,c),g=[];break;default:typeof p.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=To)}Pt(o,c);var C;o=null;for(se in p)if(!c.hasOwnProperty(se)&&p.hasOwnProperty(se)&&p[se]!=null)if(se==="style"){var B=p[se];for(C in B)B.hasOwnProperty(C)&&(o||(o={}),o[C]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(a.hasOwnProperty(se)?g||(g=[]):(g=g||[]).push(se,null));for(se in c){var G=c[se];if(B=p!=null?p[se]:void 0,c.hasOwnProperty(se)&&G!==B&&(G!=null||B!=null))if(se==="style")if(B){for(C in B)!B.hasOwnProperty(C)||G&&G.hasOwnProperty(C)||(o||(o={}),o[C]="");for(C in G)G.hasOwnProperty(C)&&B[C]!==G[C]&&(o||(o={}),o[C]=G[C])}else o||(g||(g=[]),g.push(se,o)),o=G;else se==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,B=B?B.__html:void 0,G!=null&&B!==G&&(g=g||[]).push(se,G)):se==="children"?typeof G!="string"&&typeof G!="number"||(g=g||[]).push(se,""+G):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(a.hasOwnProperty(se)?(G!=null&&se==="onScroll"&&Fe("scroll",t),g||B===G||(g=[])):(g=g||[]).push(se,G))}o&&(g=g||[]).push("style",o);var se=g;(n.updateQueue=se)&&(n.flags|=4)}},c0=function(t,n,o,c){o!==c&&(n.flags|=4)};function yi(t,n){if(!Be)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function ht(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(n)for(var p=t.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&14680064,c|=p.flags&14680064,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=o,n}function Cg(t,n,o){var c=n.pendingProps;switch(Ka(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(n),null;case 1:return jt(n.type)&&Do(),ht(n),null;case 3:return c=n.stateNode,ps(),Ue(Nt),Ue(pt),uc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Wo(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,sn!==null&&(Fc(sn),sn=null))),Rc(t,n),ht(n),null;case 5:ac(n);var p=Rr(pi.current);if(o=n.type,t!==null&&n.stateNode!=null)a0(t,n,o,c,p),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(i(166));return ht(n),null}if(t=Rr(vn.current),Wo(n)){c=n.stateNode,o=n.type;var g=n.memoizedProps;switch(c[bn]=n,c[ai]=g,t=(n.mode&1)!==0,o){case"dialog":Fe("cancel",c),Fe("close",c);break;case"iframe":case"object":case"embed":Fe("load",c);break;case"video":case"audio":for(p=0;p<ii.length;p++)Fe(ii[p],c);break;case"source":Fe("error",c);break;case"img":case"image":case"link":Fe("error",c),Fe("load",c);break;case"details":Fe("toggle",c);break;case"input":$e(c,g),Fe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Fe("invalid",c);break;case"textarea":Qt(c,g),Fe("invalid",c)}Pt(o,g),p=null;for(var C in g)if(g.hasOwnProperty(C)){var B=g[C];C==="children"?typeof B=="string"?c.textContent!==B&&(g.suppressHydrationWarning!==!0&&Ao(c.textContent,B,t),p=["children",B]):typeof B=="number"&&c.textContent!==""+B&&(g.suppressHydrationWarning!==!0&&Ao(c.textContent,B,t),p=["children",""+B]):a.hasOwnProperty(C)&&B!=null&&C==="onScroll"&&Fe("scroll",c)}switch(o){case"input":je(c),xe(c,g,!0);break;case"textarea":je(c),kn(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=To)}c=p,n.updateQueue=c,c!==null&&(n.flags|=4)}else{C=p.nodeType===9?p:p.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mn(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=C.createElement(o,{is:c.is}):(t=C.createElement(o),o==="select"&&(C=t,c.multiple?C.multiple=!0:c.size&&(C.size=c.size))):t=C.createElementNS(t,o),t[bn]=n,t[ai]=c,l0(t,n,!1,!1),n.stateNode=t;e:{switch(C=wt(o,c),o){case"dialog":Fe("cancel",t),Fe("close",t),p=c;break;case"iframe":case"object":case"embed":Fe("load",t),p=c;break;case"video":case"audio":for(p=0;p<ii.length;p++)Fe(ii[p],t);p=c;break;case"source":Fe("error",t),p=c;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),p=c;break;case"details":Fe("toggle",t),p=c;break;case"input":$e(t,c),p=De(t,c),Fe("invalid",t);break;case"option":p=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},p=q({},c,{value:void 0}),Fe("invalid",t);break;case"textarea":Qt(t,c),p=_t(t,c),Fe("invalid",t);break;default:p=c}Pt(o,p),B=p;for(g in B)if(B.hasOwnProperty(g)){var G=B[g];g==="style"?xn(t,G):g==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&In(t,G)):g==="children"?typeof G=="string"?(o!=="textarea"||G!=="")&&tn(t,G):typeof G=="number"&&tn(t,""+G):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(a.hasOwnProperty(g)?G!=null&&g==="onScroll"&&Fe("scroll",t):G!=null&&M(t,g,G,C))}switch(o){case"input":je(t),xe(t,c,!1);break;case"textarea":je(t),kn(t);break;case"option":c.value!=null&&t.setAttribute("value",""+ie(c.value));break;case"select":t.multiple=!!c.multiple,g=c.value,g!=null?it(t,!!c.multiple,g,!1):c.defaultValue!=null&&it(t,!!c.multiple,c.defaultValue,!0);break;default:typeof p.onClick=="function"&&(t.onclick=To)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return ht(n),null;case 6:if(t&&n.stateNode!=null)c0(t,n,t.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(i(166));if(o=Rr(pi.current),Rr(vn.current),Wo(n)){if(c=n.stateNode,o=n.memoizedProps,c[bn]=n,(g=c.nodeValue!==o)&&(t=Tt,t!==null))switch(t.tag){case 3:Ao(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ao(c.nodeValue,o,(t.mode&1)!==0)}g&&(n.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[bn]=n,n.stateNode=c}return ht(n),null;case 13:if(Ue(Ve),c=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&Lt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)ff(),cs(),n.flags|=98560,g=!1;else if(g=Wo(n),c!==null&&c.dehydrated!==null){if(t===null){if(!g)throw Error(i(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[bn]=n}else cs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ht(n),g=!1}else sn!==null&&(Fc(sn),sn=null),g=!0;if(!g)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Ve.current&1)!==0?tt===0&&(tt=3):Bc())),n.updateQueue!==null&&(n.flags|=4),ht(n),null);case 4:return ps(),Rc(t,n),t===null&&oi(n.stateNode.containerInfo),ht(n),null;case 10:return rc(n.type._context),ht(n),null;case 17:return jt(n.type)&&Do(),ht(n),null;case 19:if(Ue(Ve),g=n.memoizedState,g===null)return ht(n),null;if(c=(n.flags&128)!==0,C=g.rendering,C===null)if(c)yi(g,!1);else{if(tt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(C=Yo(t),C!==null){for(n.flags|=128,yi(g,!1),c=C.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=o,o=n.child;o!==null;)g=o,t=c,g.flags&=14680066,C=g.alternate,C===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=C.childLanes,g.lanes=C.lanes,g.child=C.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=C.memoizedProps,g.memoizedState=C.memoizedState,g.updateQueue=C.updateQueue,g.type=C.type,t=C.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Oe(Ve,Ve.current&1|2),n.child}t=t.sibling}g.tail!==null&&He()>gs&&(n.flags|=128,c=!0,yi(g,!1),n.lanes=4194304)}else{if(!c)if(t=Yo(C),t!==null){if(n.flags|=128,c=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),yi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!C.alternate&&!Be)return ht(n),null}else 2*He()-g.renderingStartTime>gs&&o!==1073741824&&(n.flags|=128,c=!0,yi(g,!1),n.lanes=4194304);g.isBackwards?(C.sibling=n.child,n.child=C):(o=g.last,o!==null?o.sibling=C:n.child=C,g.last=C)}return g.tail!==null?(n=g.tail,g.rendering=n,g.tail=n.sibling,g.renderingStartTime=He(),n.sibling=null,o=Ve.current,Oe(Ve,c?o&1|2:o&1),n):(ht(n),null);case 22:case 23:return Wc(),c=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(n.flags|=8192),c&&(n.mode&1)!==0?(Dt&1073741824)!==0&&(ht(n),n.subtreeFlags&6&&(n.flags|=8192)):ht(n),null;case 24:return null;case 25:return null}throw Error(i(156,n.tag))}function kg(t,n){switch(Ka(n),n.tag){case 1:return jt(n.type)&&Do(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ps(),Ue(Nt),Ue(pt),uc(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return ac(n),null;case 13:if(Ue(Ve),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));cs()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Ue(Ve),null;case 4:return ps(),null;case 10:return rc(n.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}var rl=!1,xt=!1,Ig=typeof WeakSet=="function"?WeakSet:Set,ye=null;function hs(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){Ye(t,n,c)}else o.current=null}function Mc(t,n,o){try{o()}catch(c){Ye(t,n,c)}}var u0=!1;function Rg(t,n){if(Wa=jo,t=Ud(),Aa(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var C=0,B=-1,G=-1,se=0,fe=0,me=t,de=null;t:for(;;){for(var ge;me!==o||p!==0&&me.nodeType!==3||(B=C+p),me!==g||c!==0&&me.nodeType!==3||(G=C+c),me.nodeType===3&&(C+=me.nodeValue.length),(ge=me.firstChild)!==null;)de=me,me=ge;for(;;){if(me===t)break t;if(de===o&&++se===p&&(B=C),de===g&&++fe===c&&(G=C),(ge=me.nextSibling)!==null)break;me=de,de=me.parentNode}me=ge}o=B===-1||G===-1?null:{start:B,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ba={focusedElem:t,selectionRange:o},jo=!1,ye=n;ye!==null;)if(n=ye,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ye=t;else for(;ye!==null;){n=ye;try{var be=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var we=be.memoizedProps,Ke=be.memoizedState,ee=n.stateNode,Z=ee.getSnapshotBeforeUpdate(n.elementType===n.type?we:on(n.type,we),Ke);ee.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var te=n.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(he){Ye(n,n.return,he)}if(t=n.sibling,t!==null){t.return=n.return,ye=t;break}ye=n.return}return be=u0,u0=!1,be}function bi(t,n,o){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&t)===t){var g=p.destroy;p.destroy=void 0,g!==void 0&&Mc(n,o,g)}p=p.next}while(p!==c)}}function sl(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==n)}}function _c(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function d0(t){var n=t.alternate;n!==null&&(t.alternate=null,d0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[bn],delete n[ai],delete n[Xa],delete n[dg],delete n[fg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function f0(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||f0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zc(t,n,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=To));else if(c!==4&&(t=t.child,t!==null))for(zc(t,n,o),t=t.sibling;t!==null;)zc(t,n,o),t=t.sibling}function Pc(t,n,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(Pc(t,n,o),t=t.sibling;t!==null;)Pc(t,n,o),t=t.sibling}var dt=null,ln=!1;function ir(t,n,o){for(o=o.child;o!==null;)m0(t,n,o),o=o.sibling}function m0(t,n,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Zr,o)}catch{}switch(o.tag){case 5:xt||hs(o,n);case 6:var c=dt,p=ln;dt=null,ir(t,n,o),dt=c,ln=p,dt!==null&&(ln?(t=dt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):dt.removeChild(o.stateNode));break;case 18:dt!==null&&(ln?(t=dt,o=o.stateNode,t.nodeType===8?qa(t.parentNode,o):t.nodeType===1&&qa(t,o),Ks(t)):qa(dt,o.stateNode));break;case 4:c=dt,p=ln,dt=o.stateNode.containerInfo,ln=!0,ir(t,n,o),dt=c,ln=p;break;case 0:case 11:case 14:case 15:if(!xt&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){p=c=c.next;do{var g=p,C=g.destroy;g=g.tag,C!==void 0&&((g&2)!==0||(g&4)!==0)&&Mc(o,n,C),p=p.next}while(p!==c)}ir(t,n,o);break;case 1:if(!xt&&(hs(o,n),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(B){Ye(o,n,B)}ir(t,n,o);break;case 21:ir(t,n,o);break;case 22:o.mode&1?(xt=(c=xt)||o.memoizedState!==null,ir(t,n,o),xt=c):ir(t,n,o);break;default:ir(t,n,o)}}function h0(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Ig),n.forEach(function(c){var p=$g.bind(null,t,c);o.has(c)||(o.add(c),c.then(p,p))})}}function an(t,n){var o=n.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c];try{var g=t,C=n,B=C;e:for(;B!==null;){switch(B.tag){case 5:dt=B.stateNode,ln=!1;break e;case 3:dt=B.stateNode.containerInfo,ln=!0;break e;case 4:dt=B.stateNode.containerInfo,ln=!0;break e}B=B.return}if(dt===null)throw Error(i(160));m0(g,C,p),dt=null,ln=!1;var G=p.alternate;G!==null&&(G.return=null),p.return=null}catch(se){Ye(p,n,se)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)x0(n,t),n=n.sibling}function x0(t,n){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(n,t),Nn(t),c&4){try{bi(3,t,t.return),sl(3,t)}catch(we){Ye(t,t.return,we)}try{bi(5,t,t.return)}catch(we){Ye(t,t.return,we)}}break;case 1:an(n,t),Nn(t),c&512&&o!==null&&hs(o,o.return);break;case 5:if(an(n,t),Nn(t),c&512&&o!==null&&hs(o,o.return),t.flags&32){var p=t.stateNode;try{tn(p,"")}catch(we){Ye(t,t.return,we)}}if(c&4&&(p=t.stateNode,p!=null)){var g=t.memoizedProps,C=o!==null?o.memoizedProps:g,B=t.type,G=t.updateQueue;if(t.updateQueue=null,G!==null)try{B==="input"&&g.type==="radio"&&g.name!=null&&st(p,g),wt(B,C);var se=wt(B,g);for(C=0;C<G.length;C+=2){var fe=G[C],me=G[C+1];fe==="style"?xn(p,me):fe==="dangerouslySetInnerHTML"?In(p,me):fe==="children"?tn(p,me):M(p,fe,me,se)}switch(B){case"input":Pe(p,g);break;case"textarea":Wt(p,g);break;case"select":var de=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var ge=g.value;ge!=null?it(p,!!g.multiple,ge,!1):de!==!!g.multiple&&(g.defaultValue!=null?it(p,!!g.multiple,g.defaultValue,!0):it(p,!!g.multiple,g.multiple?[]:"",!1))}p[ai]=g}catch(we){Ye(t,t.return,we)}}break;case 6:if(an(n,t),Nn(t),c&4){if(t.stateNode===null)throw Error(i(162));p=t.stateNode,g=t.memoizedProps;try{p.nodeValue=g}catch(we){Ye(t,t.return,we)}}break;case 3:if(an(n,t),Nn(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Ks(n.containerInfo)}catch(we){Ye(t,t.return,we)}break;case 4:an(n,t),Nn(t);break;case 13:an(n,t),Nn(t),p=t.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(Lc=He())),c&4&&h0(t);break;case 22:if(fe=o!==null&&o.memoizedState!==null,t.mode&1?(xt=(se=xt)||fe,an(n,t),xt=se):an(n,t),Nn(t),c&8192){if(se=t.memoizedState!==null,(t.stateNode.isHidden=se)&&!fe&&(t.mode&1)!==0)for(ye=t,fe=t.child;fe!==null;){for(me=ye=fe;ye!==null;){switch(de=ye,ge=de.child,de.tag){case 0:case 11:case 14:case 15:bi(4,de,de.return);break;case 1:hs(de,de.return);var be=de.stateNode;if(typeof be.componentWillUnmount=="function"){c=de,o=de.return;try{n=c,be.props=n.memoizedProps,be.state=n.memoizedState,be.componentWillUnmount()}catch(we){Ye(c,o,we)}}break;case 5:hs(de,de.return);break;case 22:if(de.memoizedState!==null){b0(me);continue}}ge!==null?(ge.return=de,ye=ge):b0(me)}fe=fe.sibling}e:for(fe=null,me=t;;){if(me.tag===5){if(fe===null){fe=me;try{p=me.stateNode,se?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(B=me.stateNode,G=me.memoizedProps.style,C=G!=null&&G.hasOwnProperty("display")?G.display:null,B.style.display=hn("display",C))}catch(we){Ye(t,t.return,we)}}}else if(me.tag===6){if(fe===null)try{me.stateNode.nodeValue=se?"":me.memoizedProps}catch(we){Ye(t,t.return,we)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===t)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===t)break e;for(;me.sibling===null;){if(me.return===null||me.return===t)break e;fe===me&&(fe=null),me=me.return}fe===me&&(fe=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:an(n,t),Nn(t),c&4&&h0(t);break;case 21:break;default:an(n,t),Nn(t)}}function Nn(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(f0(o)){var c=o;break e}o=o.return}throw Error(i(160))}switch(c.tag){case 5:var p=c.stateNode;c.flags&32&&(tn(p,""),c.flags&=-33);var g=p0(t);Pc(t,g,p);break;case 3:case 4:var C=c.stateNode.containerInfo,B=p0(t);zc(t,B,C);break;default:throw Error(i(161))}}catch(G){Ye(t,t.return,G)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Mg(t,n,o){ye=t,g0(t)}function g0(t,n,o){for(var c=(t.mode&1)!==0;ye!==null;){var p=ye,g=p.child;if(p.tag===22&&c){var C=p.memoizedState!==null||rl;if(!C){var B=p.alternate,G=B!==null&&B.memoizedState!==null||xt;B=rl;var se=xt;if(rl=C,(xt=G)&&!se)for(ye=p;ye!==null;)C=ye,G=C.child,C.tag===22&&C.memoizedState!==null?v0(p):G!==null?(G.return=C,ye=G):v0(p);for(;g!==null;)ye=g,g0(g),g=g.sibling;ye=p,rl=B,xt=se}y0(t)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,ye=g):y0(t)}}function y0(t){for(;ye!==null;){var n=ye;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:xt||sl(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!xt)if(o===null)c.componentDidMount();else{var p=n.elementType===n.type?o.memoizedProps:on(n.type,o.memoizedProps);c.componentDidUpdate(p,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=n.updateQueue;g!==null&&bf(n,g,c);break;case 3:var C=n.updateQueue;if(C!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}bf(n,C,o)}break;case 5:var B=n.stateNode;if(o===null&&n.flags&4){o=B;var G=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&o.focus();break;case"img":G.src&&(o.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var se=n.alternate;if(se!==null){var fe=se.memoizedState;if(fe!==null){var me=fe.dehydrated;me!==null&&Ks(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}xt||n.flags&512&&_c(n)}catch(de){Ye(n,n.return,de)}}if(n===t){ye=null;break}if(o=n.sibling,o!==null){o.return=n.return,ye=o;break}ye=n.return}}function b0(t){for(;ye!==null;){var n=ye;if(n===t){ye=null;break}var o=n.sibling;if(o!==null){o.return=n.return,ye=o;break}ye=n.return}}function v0(t){for(;ye!==null;){var n=ye;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{sl(4,n)}catch(G){Ye(n,o,G)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var p=n.return;try{c.componentDidMount()}catch(G){Ye(n,p,G)}}var g=n.return;try{_c(n)}catch(G){Ye(n,g,G)}break;case 5:var C=n.return;try{_c(n)}catch(G){Ye(n,C,G)}}}catch(G){Ye(n,n.return,G)}if(n===t){ye=null;break}var B=n.sibling;if(B!==null){B.return=n.return,ye=B;break}ye=n.return}}var _g=Math.ceil,il=_.ReactCurrentDispatcher,Ac=_.ReactCurrentOwner,Yt=_.ReactCurrentBatchConfig,Ae=0,lt=null,Je=null,ft=0,Dt=0,xs=er(0),tt=0,vi=null,_r=0,ol=0,Tc=0,wi=null,Et=null,Lc=0,gs=1/0,Un=null,ll=!1,Dc=null,or=null,al=!1,lr=null,cl=0,Ni=0,$c=null,ul=-1,dl=0;function bt(){return(Ae&6)!==0?He():ul!==-1?ul:ul=He()}function ar(t){return(t.mode&1)===0?1:(Ae&2)!==0&&ft!==0?ft&-ft:mg.transition!==null?(dl===0&&(dl=fd()),dl):(t=Le,t!==0||(t=window.event,t=t===void 0?16:wd(t.type)),t)}function cn(t,n,o,c){if(50<Ni)throw Ni=0,$c=null,Error(i(185));qs(t,o,c),((Ae&2)===0||t!==lt)&&(t===lt&&((Ae&2)===0&&(ol|=o),tt===4&&cr(t,ft)),Ct(t,c),o===1&&Ae===0&&(n.mode&1)===0&&(gs=He()+500,Oo&&nr()))}function Ct(t,n){var o=t.callbackNode;mx(t,n);var c=vo(t,t===lt?ft:0);if(c===0)o!==null&&po(o),t.callbackNode=null,t.callbackPriority=0;else if(n=c&-c,t.callbackPriority!==n){if(o!=null&&po(o),n===1)t.tag===0?pg(N0.bind(null,t)):lf(N0.bind(null,t)),cg(function(){(Ae&6)===0&&nr()}),o=null;else{switch(pd(c)){case 1:o=Bs;break;case 4:o=ho;break;case 16:o=Gr;break;case 536870912:o=go;break;default:o=Gr}o=M0(o,w0.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function w0(t,n){if(ul=-1,dl=0,(Ae&6)!==0)throw Error(i(327));var o=t.callbackNode;if(ys()&&t.callbackNode!==o)return null;var c=vo(t,t===lt?ft:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||n)n=fl(t,c);else{n=c;var p=Ae;Ae|=2;var g=S0();(lt!==t||ft!==n)&&(Un=null,gs=He()+500,Pr(t,n));do try{Ag();break}catch(B){j0(t,B)}while(!0);nc(),il.current=g,Ae=p,Je!==null?n=0:(lt=null,ft=0,n=tt)}if(n!==0){if(n===2&&(p=ya(t),p!==0&&(c=p,n=Oc(t,p))),n===1)throw o=vi,Pr(t,0),cr(t,c),Ct(t,He()),o;if(n===6)cr(t,c);else{if(p=t.current.alternate,(c&30)===0&&!zg(p)&&(n=fl(t,c),n===2&&(g=ya(t),g!==0&&(c=g,n=Oc(t,g))),n===1))throw o=vi,Pr(t,0),cr(t,c),Ct(t,He()),o;switch(t.finishedWork=p,t.finishedLanes=c,n){case 0:case 1:throw Error(i(345));case 2:Ar(t,Et,Un);break;case 3:if(cr(t,c),(c&130023424)===c&&(n=Lc+500-He(),10<n)){if(vo(t,0)!==0)break;if(p=t.suspendedLanes,(p&c)!==c){bt(),t.pingedLanes|=t.suspendedLanes&p;break}t.timeoutHandle=Va(Ar.bind(null,t,Et,Un),n);break}Ar(t,Et,Un);break;case 4:if(cr(t,c),(c&4194240)===c)break;for(n=t.eventTimes,p=-1;0<c;){var C=31-nn(c);g=1<<C,C=n[C],C>p&&(p=C),c&=~g}if(c=p,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*_g(c/1960))-c,10<c){t.timeoutHandle=Va(Ar.bind(null,t,Et,Un),c);break}Ar(t,Et,Un);break;case 5:Ar(t,Et,Un);break;default:throw Error(i(329))}}}return Ct(t,He()),t.callbackNode===o?w0.bind(null,t):null}function Oc(t,n){var o=wi;return t.current.memoizedState.isDehydrated&&(Pr(t,n).flags|=256),t=fl(t,n),t!==2&&(n=Et,Et=o,n!==null&&Fc(n)),t}function Fc(t){Et===null?Et=t:Et.push.apply(Et,t)}function zg(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var p=o[c],g=p.getSnapshot;p=p.value;try{if(!rn(g(),p))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function cr(t,n){for(n&=~Tc,n&=~ol,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-nn(n),c=1<<o;t[o]=-1,n&=~c}}function N0(t){if((Ae&6)!==0)throw Error(i(327));ys();var n=vo(t,0);if((n&1)===0)return Ct(t,He()),null;var o=fl(t,n);if(t.tag!==0&&o===2){var c=ya(t);c!==0&&(n=c,o=Oc(t,c))}if(o===1)throw o=vi,Pr(t,0),cr(t,n),Ct(t,He()),o;if(o===6)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ar(t,Et,Un),Ct(t,He()),null}function Uc(t,n){var o=Ae;Ae|=1;try{return t(n)}finally{Ae=o,Ae===0&&(gs=He()+500,Oo&&nr())}}function zr(t){lr!==null&&lr.tag===0&&(Ae&6)===0&&ys();var n=Ae;Ae|=1;var o=Yt.transition,c=Le;try{if(Yt.transition=null,Le=1,t)return t()}finally{Le=c,Yt.transition=o,Ae=n,(Ae&6)===0&&nr()}}function Wc(){Dt=xs.current,Ue(xs)}function Pr(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,ag(o)),Je!==null)for(o=Je.return;o!==null;){var c=o;switch(Ka(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Do();break;case 3:ps(),Ue(Nt),Ue(pt),uc();break;case 5:ac(c);break;case 4:ps();break;case 13:Ue(Ve);break;case 19:Ue(Ve);break;case 10:rc(c.type._context);break;case 22:case 23:Wc()}o=o.return}if(lt=t,Je=t=ur(t.current,null),ft=Dt=n,tt=0,vi=null,Tc=ol=_r=0,Et=wi=null,Ir!==null){for(n=0;n<Ir.length;n++)if(o=Ir[n],c=o.interleaved,c!==null){o.interleaved=null;var p=c.next,g=o.pending;if(g!==null){var C=g.next;g.next=p,c.next=C}o.pending=c}Ir=null}return t}function j0(t,n){do{var o=Je;try{if(nc(),Go.current=Jo,Zo){for(var c=qe.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}Zo=!1}if(Mr=0,ot=et=qe=null,mi=!1,hi=0,Ac.current=null,o===null||o.return===null){tt=1,vi=n,Je=null;break}e:{var g=t,C=o.return,B=o,G=n;if(n=ft,B.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var se=G,fe=B,me=fe.tag;if((fe.mode&1)===0&&(me===0||me===11||me===15)){var de=fe.alternate;de?(fe.updateQueue=de.updateQueue,fe.memoizedState=de.memoizedState,fe.lanes=de.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var ge=Yf(C);if(ge!==null){ge.flags&=-257,Gf(ge,C,B,g,n),ge.mode&1&&Xf(g,se,n),n=ge,G=se;var be=n.updateQueue;if(be===null){var we=new Set;we.add(G),n.updateQueue=we}else be.add(G);break e}else{if((n&1)===0){Xf(g,se,n),Bc();break e}G=Error(i(426))}}else if(Be&&B.mode&1){var Ke=Yf(C);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),Gf(Ke,C,B,g,n),ec(ms(G,B));break e}}g=G=ms(G,B),tt!==4&&(tt=2),wi===null?wi=[g]:wi.push(g),g=C;do{switch(g.tag){case 3:g.flags|=65536,n&=-n,g.lanes|=n;var ee=Vf(g,G,n);yf(g,ee);break e;case 1:B=G;var Z=g.type,te=g.stateNode;if((g.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(or===null||!or.has(te)))){g.flags|=65536,n&=-n,g.lanes|=n;var he=qf(g,B,n);yf(g,he);break e}}g=g.return}while(g!==null)}C0(o)}catch(Ne){n=Ne,Je===o&&o!==null&&(Je=o=o.return);continue}break}while(!0)}function S0(){var t=il.current;return il.current=Jo,t===null?Jo:t}function Bc(){(tt===0||tt===3||tt===2)&&(tt=4),lt===null||(_r&268435455)===0&&(ol&268435455)===0||cr(lt,ft)}function fl(t,n){var o=Ae;Ae|=2;var c=S0();(lt!==t||ft!==n)&&(Un=null,Pr(t,n));do try{Pg();break}catch(p){j0(t,p)}while(!0);if(nc(),Ae=o,il.current=c,Je!==null)throw Error(i(261));return lt=null,ft=0,tt}function Pg(){for(;Je!==null;)E0(Je)}function Ag(){for(;Je!==null&&!mo();)E0(Je)}function E0(t){var n=R0(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,n===null?C0(t):Je=n,Ac.current=null}function C0(t){var n=t;do{var o=n.alternate;if(t=n.return,(n.flags&32768)===0){if(o=Cg(o,n,Dt),o!==null){Je=o;return}}else{if(o=kg(o,n),o!==null){o.flags&=32767,Je=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Je=null;return}}if(n=n.sibling,n!==null){Je=n;return}Je=n=t}while(n!==null);tt===0&&(tt=5)}function Ar(t,n,o){var c=Le,p=Yt.transition;try{Yt.transition=null,Le=1,Tg(t,n,o,c)}finally{Yt.transition=p,Le=c}return null}function Tg(t,n,o,c){do ys();while(lr!==null);if((Ae&6)!==0)throw Error(i(327));o=t.finishedWork;var p=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var g=o.lanes|o.childLanes;if(hx(t,g),t===lt&&(Je=lt=null,ft=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||al||(al=!0,M0(Gr,function(){return ys(),null})),g=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||g){g=Yt.transition,Yt.transition=null;var C=Le;Le=1;var B=Ae;Ae|=4,Ac.current=null,Rg(t,o),x0(o,t),tg(Ba),jo=!!Wa,Ba=Wa=null,t.current=o,Mg(o),xa(),Ae=B,Le=C,Yt.transition=g}else t.current=o;if(al&&(al=!1,lr=t,cl=p),g=t.pendingLanes,g===0&&(or=null),Hs(o.stateNode),Ct(t,He()),n!==null)for(c=t.onRecoverableError,o=0;o<n.length;o++)p=n[o],c(p.value,{componentStack:p.stack,digest:p.digest});if(ll)throw ll=!1,t=Dc,Dc=null,t;return(cl&1)!==0&&t.tag!==0&&ys(),g=t.pendingLanes,(g&1)!==0?t===$c?Ni++:(Ni=0,$c=t):Ni=0,nr(),null}function ys(){if(lr!==null){var t=pd(cl),n=Yt.transition,o=Le;try{if(Yt.transition=null,Le=16>t?16:t,lr===null)var c=!1;else{if(t=lr,lr=null,cl=0,(Ae&6)!==0)throw Error(i(331));var p=Ae;for(Ae|=4,ye=t.current;ye!==null;){var g=ye,C=g.child;if((ye.flags&16)!==0){var B=g.deletions;if(B!==null){for(var G=0;G<B.length;G++){var se=B[G];for(ye=se;ye!==null;){var fe=ye;switch(fe.tag){case 0:case 11:case 15:bi(8,fe,g)}var me=fe.child;if(me!==null)me.return=fe,ye=me;else for(;ye!==null;){fe=ye;var de=fe.sibling,ge=fe.return;if(d0(fe),fe===se){ye=null;break}if(de!==null){de.return=ge,ye=de;break}ye=ge}}}var be=g.alternate;if(be!==null){var we=be.child;if(we!==null){be.child=null;do{var Ke=we.sibling;we.sibling=null,we=Ke}while(we!==null)}}ye=g}}if((g.subtreeFlags&2064)!==0&&C!==null)C.return=g,ye=C;else e:for(;ye!==null;){if(g=ye,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:bi(9,g,g.return)}var ee=g.sibling;if(ee!==null){ee.return=g.return,ye=ee;break e}ye=g.return}}var Z=t.current;for(ye=Z;ye!==null;){C=ye;var te=C.child;if((C.subtreeFlags&2064)!==0&&te!==null)te.return=C,ye=te;else e:for(C=Z;ye!==null;){if(B=ye,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:sl(9,B)}}catch(Ne){Ye(B,B.return,Ne)}if(B===C){ye=null;break e}var he=B.sibling;if(he!==null){he.return=B.return,ye=he;break e}ye=B.return}}if(Ae=p,nr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Zr,t)}catch{}c=!0}return c}finally{Le=o,Yt.transition=n}}return!1}function k0(t,n,o){n=ms(o,n),n=Vf(t,n,1),t=sr(t,n,1),n=bt(),t!==null&&(qs(t,1,n),Ct(t,n))}function Ye(t,n,o){if(t.tag===3)k0(t,t,o);else for(;n!==null;){if(n.tag===3){k0(n,t,o);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(or===null||!or.has(c))){t=ms(o,t),t=qf(n,t,1),n=sr(n,t,1),t=bt(),n!==null&&(qs(n,1,t),Ct(n,t));break}}n=n.return}}function Lg(t,n,o){var c=t.pingCache;c!==null&&c.delete(n),n=bt(),t.pingedLanes|=t.suspendedLanes&o,lt===t&&(ft&o)===o&&(tt===4||tt===3&&(ft&130023424)===ft&&500>He()-Lc?Pr(t,0):Tc|=o),Ct(t,n)}function I0(t,n){n===0&&((t.mode&1)===0?n=1:(n=bo,bo<<=1,(bo&130023424)===0&&(bo=4194304)));var o=bt();t=$n(t,n),t!==null&&(qs(t,n,o),Ct(t,o))}function Dg(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),I0(t,o)}function $g(t,n){var o=0;switch(t.tag){case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(i(314))}c!==null&&c.delete(n),I0(t,o)}var R0;R0=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||Nt.current)St=!0;else{if((t.lanes&o)===0&&(n.flags&128)===0)return St=!1,Eg(t,n,o);St=(t.flags&131072)!==0}else St=!1,Be&&(n.flags&1048576)!==0&&af(n,Uo,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;nl(t,n),t=n.pendingProps;var p=os(n,pt.current);fs(n,o),p=pc(null,n,c,t,p,o);var g=mc();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,jt(c)?(g=!0,$o(n)):g=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,oc(n),p.updater=el,n.stateNode=p,p._reactInternals=n,vc(n,c,t,o),n=Sc(null,n,c,!0,g,o)):(n.tag=0,Be&&g&&Za(n),yt(null,n,p,o),n=n.child),n;case 16:c=n.elementType;e:{switch(nl(t,n),t=n.pendingProps,p=c._init,c=p(c._payload),n.type=c,p=n.tag=Fg(c),t=on(c,t),p){case 0:n=jc(null,n,c,t,o);break e;case 1:n=t0(null,n,c,t,o);break e;case 11:n=Zf(null,n,c,t,o);break e;case 14:n=Kf(null,n,c,on(c.type,t),o);break e}throw Error(i(306,c,""))}return n;case 0:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:on(c,p),jc(t,n,c,p,o);case 1:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:on(c,p),t0(t,n,c,p,o);case 3:e:{if(n0(n),t===null)throw Error(i(387));c=n.pendingProps,g=n.memoizedState,p=g.element,gf(t,n),Xo(n,c,null,o);var C=n.memoizedState;if(c=C.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){p=ms(Error(i(423)),n),n=r0(t,n,c,o,p);break e}else if(c!==p){p=ms(Error(i(424)),n),n=r0(t,n,c,o,p);break e}else for(Lt=Jn(n.stateNode.containerInfo.firstChild),Tt=n,Be=!0,sn=null,o=hf(n,null,c,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(cs(),c===p){n=Fn(t,n,o);break e}yt(t,n,c,o)}n=n.child}return n;case 5:return vf(n),t===null&&Ja(n),c=n.type,p=n.pendingProps,g=t!==null?t.memoizedProps:null,C=p.children,Ha(c,p)?C=null:g!==null&&Ha(c,g)&&(n.flags|=32),e0(t,n),yt(t,n,C,o),n.child;case 6:return t===null&&Ja(n),null;case 13:return s0(t,n,o);case 4:return lc(n,n.stateNode.containerInfo),c=n.pendingProps,t===null?n.child=us(n,null,c,o):yt(t,n,c,o),n.child;case 11:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:on(c,p),Zf(t,n,c,p,o);case 7:return yt(t,n,n.pendingProps,o),n.child;case 8:return yt(t,n,n.pendingProps.children,o),n.child;case 12:return yt(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(c=n.type._context,p=n.pendingProps,g=n.memoizedProps,C=p.value,Oe(Ho,c._currentValue),c._currentValue=C,g!==null)if(rn(g.value,C)){if(g.children===p.children&&!Nt.current){n=Fn(t,n,o);break e}}else for(g=n.child,g!==null&&(g.return=n);g!==null;){var B=g.dependencies;if(B!==null){C=g.child;for(var G=B.firstContext;G!==null;){if(G.context===c){if(g.tag===1){G=On(-1,o&-o),G.tag=2;var se=g.updateQueue;if(se!==null){se=se.shared;var fe=se.pending;fe===null?G.next=G:(G.next=fe.next,fe.next=G),se.pending=G}}g.lanes|=o,G=g.alternate,G!==null&&(G.lanes|=o),sc(g.return,o,n),B.lanes|=o;break}G=G.next}}else if(g.tag===10)C=g.type===n.type?null:g.child;else if(g.tag===18){if(C=g.return,C===null)throw Error(i(341));C.lanes|=o,B=C.alternate,B!==null&&(B.lanes|=o),sc(C,o,n),C=g.sibling}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===n){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}yt(t,n,p.children,o),n=n.child}return n;case 9:return p=n.type,c=n.pendingProps.children,fs(n,o),p=qt(p),c=c(p),n.flags|=1,yt(t,n,c,o),n.child;case 14:return c=n.type,p=on(c,n.pendingProps),p=on(c.type,p),Kf(t,n,c,p,o);case 15:return Qf(t,n,n.type,n.pendingProps,o);case 17:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:on(c,p),nl(t,n),n.tag=1,jt(c)?(t=!0,$o(n)):t=!1,fs(n,o),Bf(n,c,p),vc(n,c,p,o),Sc(null,n,c,!0,t,o);case 19:return o0(t,n,o);case 22:return Jf(t,n,o)}throw Error(i(156,n.tag))};function M0(t,n){return fo(t,n)}function Og(t,n,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,n,o,c){return new Og(t,n,o,c)}function Hc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fg(t){if(typeof t=="function")return Hc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$)return 11;if(t===O)return 14}return 2}function ur(t,n){var o=t.alternate;return o===null?(o=Gt(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function pl(t,n,o,c,p,g){var C=2;if(c=t,typeof t=="function")Hc(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case R:return Tr(o.children,p,g,n);case H:C=8,p|=8;break;case k:return t=Gt(12,o,n,p|2),t.elementType=k,t.lanes=g,t;case W:return t=Gt(13,o,n,p),t.elementType=W,t.lanes=g,t;case S:return t=Gt(19,o,n,p),t.elementType=S,t.lanes=g,t;case Y:return ml(o,p,g,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T:C=10;break e;case I:C=9;break e;case $:C=11;break e;case O:C=14;break e;case P:C=16,c=null;break e}throw Error(i(130,t==null?t:typeof t,""))}return n=Gt(C,o,n,p),n.elementType=t,n.type=c,n.lanes=g,n}function Tr(t,n,o,c){return t=Gt(7,t,c,n),t.lanes=o,t}function ml(t,n,o,c){return t=Gt(22,t,c,n),t.elementType=Y,t.lanes=o,t.stateNode={isHidden:!1},t}function Vc(t,n,o){return t=Gt(6,t,null,n),t.lanes=o,t}function qc(t,n,o){return n=Gt(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Ug(t,n,o,c,p){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ba(0),this.expirationTimes=ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.identifierPrefix=c,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Xc(t,n,o,c,p,g,C,B,G){return t=new Ug(t,n,o,B,G),n===1?(n=1,g===!0&&(n|=8)):n=0,g=Gt(3,null,null,n),t.current=g,g.stateNode=t,g.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(g),t}function Wg(t,n,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:c==null?null:""+c,children:t,containerInfo:n,implementation:o}}function _0(t){if(!t)return tr;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(i(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(jt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(i(171))}if(t.tag===1){var o=t.type;if(jt(o))return sf(t,o,n)}return n}function z0(t,n,o,c,p,g,C,B,G){return t=Xc(o,c,!0,t,p,g,C,B,G),t.context=_0(null),o=t.current,c=bt(),p=ar(o),g=On(c,p),g.callback=n??null,sr(o,g,p),t.current.lanes=p,qs(t,p,c),Ct(t,c),t}function hl(t,n,o,c){var p=n.current,g=bt(),C=ar(p);return o=_0(o),n.context===null?n.context=o:n.pendingContext=o,n=On(g,C),n.payload={element:t},c=c===void 0?null:c,c!==null&&(n.callback=c),t=sr(p,n,C),t!==null&&(cn(t,p,C,g),qo(t,p,C)),C}function xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function Yc(t,n){P0(t,n),(t=t.alternate)&&P0(t,n)}function Bg(){return null}var A0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gc(t){this._internalRoot=t}gl.prototype.render=Gc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));hl(t,n,null,null)},gl.prototype.unmount=Gc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;zr(function(){hl(null,t,null,null)}),n[An]=null}};function gl(t){this._internalRoot=t}gl.prototype.unstable_scheduleHydration=function(t){if(t){var n=xd();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Zn.length&&n!==0&&n<Zn[o].priority;o++);Zn.splice(o,0,t),o===0&&bd(t)}};function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T0(){}function Hg(t,n,o,c,p){if(p){if(typeof c=="function"){var g=c;c=function(){var se=xl(C);g.call(se)}}var C=z0(n,c,t,0,null,!1,!1,"",T0);return t._reactRootContainer=C,t[An]=C.current,oi(t.nodeType===8?t.parentNode:t),zr(),C}for(;p=t.lastChild;)t.removeChild(p);if(typeof c=="function"){var B=c;c=function(){var se=xl(G);B.call(se)}}var G=Xc(t,0,!1,null,null,!1,!1,"",T0);return t._reactRootContainer=G,t[An]=G.current,oi(t.nodeType===8?t.parentNode:t),zr(function(){hl(n,G,o,c)}),G}function bl(t,n,o,c,p){var g=o._reactRootContainer;if(g){var C=g;if(typeof p=="function"){var B=p;p=function(){var G=xl(C);B.call(G)}}hl(n,C,t,p)}else C=Hg(o,n,t,p,c);return xl(C)}md=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=Vs(n.pendingLanes);o!==0&&(va(n,o|1),Ct(n,He()),(Ae&6)===0&&(gs=He()+500,nr()))}break;case 13:zr(function(){var c=$n(t,1);if(c!==null){var p=bt();cn(c,t,1,p)}}),Yc(t,1)}},wa=function(t){if(t.tag===13){var n=$n(t,134217728);if(n!==null){var o=bt();cn(n,t,134217728,o)}Yc(t,134217728)}},hd=function(t){if(t.tag===13){var n=ar(t),o=$n(t,n);if(o!==null){var c=bt();cn(o,t,n,c)}Yc(t,n)}},xd=function(){return Le},gd=function(t,n){var o=Le;try{return Le=t,n()}finally{Le=o}},_n=function(t,n,o){switch(n){case"input":if(Pe(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var c=o[n];if(c!==t&&c.form===t.form){var p=Lo(c);if(!p)throw Error(i(90));ke(c),Pe(c,p)}}}break;case"textarea":Wt(t,o);break;case"select":n=o.value,n!=null&&it(t,!!o.multiple,n,!1)}},ro=Uc,so=zr;var Vg={usingClientEntryPoint:!1,Events:[ci,ss,Lo,to,no,Uc]},ji={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qg={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=co(t),t===null?null:t.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||Bg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{Zr=vl.inject(qg),Bt=vl}catch{}}return kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vg,kt.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(n))throw Error(i(200));return Wg(t,n,null,o)},kt.createRoot=function(t,n){if(!Zc(t))throw Error(i(299));var o=!1,c="",p=A0;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=Xc(t,1,!1,null,null,o,!1,c,p),t[An]=n.current,oi(t.nodeType===8?t.parentNode:t),new Gc(n)},kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=co(n),t=t===null?null:t.stateNode,t},kt.flushSync=function(t){return zr(t)},kt.hydrate=function(t,n,o){if(!yl(n))throw Error(i(200));return bl(null,t,n,!0,o)},kt.hydrateRoot=function(t,n,o){if(!Zc(t))throw Error(i(405));var c=o!=null&&o.hydratedSources||null,p=!1,g="",C=A0;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),n=z0(n,null,t,1,o??null,p,!1,g,C),t[An]=n.current,oi(t),c)for(t=0;t<c.length;t++)o=c[t],p=o._getVersion,p=p(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,p]:n.mutableSourceEagerHydrationData.push(o,p);return new gl(n)},kt.render=function(t,n,o){if(!yl(n))throw Error(i(200));return bl(null,t,n,!1,o)},kt.unmountComponentAtNode=function(t){if(!yl(t))throw Error(i(40));return t._reactRootContainer?(zr(function(){bl(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1},kt.unstable_batchedUpdates=Uc,kt.unstable_renderSubtreeIntoContainer=function(t,n,o,c){if(!yl(o))throw Error(i(200));if(t==null||t._reactInternals===void 0)throw Error(i(38));return bl(t,n,o,!1,c)},kt.version="18.3.1-next-f1338f8080-20240426",kt}var B0;function om(){if(B0)return Jc.exports;B0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Jc.exports=ny(),Jc.exports}var H0;function ry(){if(H0)return wl;H0=1;var e=om();return wl.createRoot=e.createRoot,wl.hydrateRoot=e.hydrateRoot,wl}var sy=ry();const{createElement:Ls,createContext:iy,forwardRef:lm,useCallback:It,useContext:am,useEffect:Wr,useImperativeHandle:cm,useLayoutEffect:oy,useMemo:ly,useRef:Rt,useState:Ms}=im,V0=im[`useId${Math.random()}`.slice(0,5)],ay=oy,ea=iy(null);ea.displayName="PanelGroupContext";const Br=ay,cy=typeof V0=="function"?V0:()=>null;let uy=0;function Wu(e=null){const s=cy(),i=Rt(e||s||null);return i.current===null&&(i.current=""+uy++),e??i.current}function um({children:e,className:s="",collapsedSize:i,collapsible:l,defaultSize:a,forwardedRef:u,id:d,maxSize:f,minSize:x,onCollapse:m,onExpand:h,onResize:y,order:b,style:v,tagName:j="div",...w}){const N=am(ea);if(N===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:E,expandPanel:z,getPanelSize:M,getPanelStyle:_,groupId:L,isPanelCollapsed:D,reevaluatePanelConstraints:R,registerPanel:H,resizePanel:k,unregisterPanel:T}=N,I=Wu(d),$=Rt({callbacks:{onCollapse:m,onExpand:h,onResize:y},constraints:{collapsedSize:i,collapsible:l,defaultSize:a,maxSize:f,minSize:x},id:I,idIsFromProps:d!==void 0,order:b});Rt({didLogMissingDefaultSizeWarning:!1}),Br(()=>{const{callbacks:S,constraints:O}=$.current,P={...O};$.current.id=I,$.current.idIsFromProps=d!==void 0,$.current.order=b,S.onCollapse=m,S.onExpand=h,S.onResize=y,O.collapsedSize=i,O.collapsible=l,O.defaultSize=a,O.maxSize=f,O.minSize=x,(P.collapsedSize!==O.collapsedSize||P.collapsible!==O.collapsible||P.maxSize!==O.maxSize||P.minSize!==O.minSize)&&R($.current,P)}),Br(()=>{const S=$.current;return H(S),()=>{T(S)}},[b,I,H,T]),cm(u,()=>({collapse:()=>{E($.current)},expand:S=>{z($.current,S)},getId(){return I},getSize(){return M($.current)},isCollapsed(){return D($.current)},isExpanded(){return!D($.current)},resize:S=>{k($.current,S)}}),[E,z,M,D,I,k]);const W=_($.current,a);return Ls(j,{...w,children:e,className:s,id:d,style:{...W,...v},"data-panel":"","data-panel-collapsible":l||void 0,"data-panel-group-id":L,"data-panel-id":I,"data-panel-size":parseFloat(""+W.flexGrow).toFixed(1)})}const Tl=lm((e,s)=>Ls(um,{...e,forwardedRef:s}));um.displayName="Panel";Tl.displayName="forwardRef(Panel)";let vu=null,Or=null;function dy(e,s){if(s){const i=(s&hm)!==0,l=(s&xm)!==0,a=(s&gm)!==0,u=(s&ym)!==0;if(i)return a?"se-resize":u?"ne-resize":"e-resize";if(l)return a?"sw-resize":u?"nw-resize":"w-resize";if(a)return"s-resize";if(u)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function fy(){Or!==null&&(document.head.removeChild(Or),vu=null,Or=null)}function nu(e,s){const i=dy(e,s);vu!==i&&(vu=i,Or===null&&(Or=document.createElement("style"),document.head.appendChild(Or)),Or.innerHTML=`*{cursor: ${i}!important;}`)}function dm(e){return e.type==="keydown"}function fm(e){return e.type.startsWith("pointer")}function pm(e){return e.type.startsWith("mouse")}function ta(e){if(fm(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(pm(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function py(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function my(e,s,i){return e.x<s.x+s.width&&e.x+e.width>s.x&&e.y<s.y+s.height&&e.y+e.height>s.y}function hy(e,s){if(e===s)throw new Error("Cannot compare node with itself");const i={a:Y0(e),b:Y0(s)};let l;for(;i.a.at(-1)===i.b.at(-1);)e=i.a.pop(),s=i.b.pop(),l=e;Me(l,"Stacking order can only be calculated for elements with a common ancestor");const a={a:X0(q0(i.a)),b:X0(q0(i.b))};if(a.a===a.b){const u=l.childNodes,d={a:i.a.at(-1),b:i.b.at(-1)};let f=u.length;for(;f--;){const x=u[f];if(x===d.a)return 1;if(x===d.b)return-1}}return Math.sign(a.a-a.b)}const xy=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function gy(e){var s;const i=getComputedStyle((s=mm(e))!==null&&s!==void 0?s:e).display;return i==="flex"||i==="inline-flex"}function yy(e){const s=getComputedStyle(e);return!!(s.position==="fixed"||s.zIndex!=="auto"&&(s.position!=="static"||gy(e))||+s.opacity<1||"transform"in s&&s.transform!=="none"||"webkitTransform"in s&&s.webkitTransform!=="none"||"mixBlendMode"in s&&s.mixBlendMode!=="normal"||"filter"in s&&s.filter!=="none"||"webkitFilter"in s&&s.webkitFilter!=="none"||"isolation"in s&&s.isolation==="isolate"||xy.test(s.willChange)||s.webkitOverflowScrolling==="touch")}function q0(e){let s=e.length;for(;s--;){const i=e[s];if(Me(i,"Missing node"),yy(i))return i}return null}function X0(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Y0(e){const s=[];for(;e;)s.push(e),e=mm(e);return s}function mm(e){const{parentNode:s}=e;return s&&s instanceof ShadowRoot?s.host:s}const hm=1,xm=2,gm=4,ym=8,by=py()==="coarse";let fn=[],_s=!1,hr=new Map,na=new Map;const Oi=new Set;function vy(e,s,i,l,a){var u;const{ownerDocument:d}=s,f={direction:i,element:s,hitAreaMargins:l,setResizeHandlerState:a},x=(u=hr.get(d))!==null&&u!==void 0?u:0;return hr.set(d,x+1),Oi.add(f),Fl(),function(){var h;na.delete(e),Oi.delete(f);const y=(h=hr.get(d))!==null&&h!==void 0?h:1;if(hr.set(d,y-1),Fl(),y===1&&hr.delete(d),fn.includes(f)){const b=fn.indexOf(f);b>=0&&fn.splice(b,1),Hu(),a("up",!0,null)}}}function G0(e){const{target:s}=e,{x:i,y:l}=ta(e);_s=!0,Bu({target:s,x:i,y:l}),Fl(),fn.length>0&&(Ul("down",e),e.preventDefault(),e.stopPropagation())}function Ei(e){const{x:s,y:i}=ta(e);if(_s&&e.buttons===0&&(_s=!1,Ul("up",e)),!_s){const{target:l}=e;Bu({target:l,x:s,y:i})}Ul("move",e),Hu(),fn.length>0&&e.preventDefault()}function bs(e){const{target:s}=e,{x:i,y:l}=ta(e);na.clear(),_s=!1,fn.length>0&&e.preventDefault(),Ul("up",e),Bu({target:s,x:i,y:l}),Hu(),Fl()}function Bu({target:e,x:s,y:i}){fn.splice(0);let l=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(l=e),Oi.forEach(a=>{const{element:u,hitAreaMargins:d}=a,f=u.getBoundingClientRect(),{bottom:x,left:m,right:h,top:y}=f,b=by?d.coarse:d.fine;if(s>=m-b&&s<=h+b&&i>=y-b&&i<=x+b){if(l!==null&&document.contains(l)&&u!==l&&!u.contains(l)&&!l.contains(u)&&hy(l,u)>0){let j=l,w=!1;for(;j&&!j.contains(u);){if(my(j.getBoundingClientRect(),f)){w=!0;break}j=j.parentElement}if(w)return}fn.push(a)}})}function ru(e,s){na.set(e,s)}function Hu(){let e=!1,s=!1;fn.forEach(l=>{const{direction:a}=l;a==="horizontal"?e=!0:s=!0});let i=0;na.forEach(l=>{i|=l}),e&&s?nu("intersection",i):e?nu("horizontal",i):s?nu("vertical",i):fy()}function Fl(){hr.forEach((e,s)=>{const{body:i}=s;i.removeEventListener("contextmenu",bs),i.removeEventListener("pointerdown",G0),i.removeEventListener("pointerleave",Ei),i.removeEventListener("pointermove",Ei)}),window.removeEventListener("pointerup",bs),window.removeEventListener("pointercancel",bs),Oi.size>0&&(_s?(fn.length>0&&hr.forEach((e,s)=>{const{body:i}=s;e>0&&(i.addEventListener("contextmenu",bs),i.addEventListener("pointerleave",Ei),i.addEventListener("pointermove",Ei))}),window.addEventListener("pointerup",bs),window.addEventListener("pointercancel",bs)):hr.forEach((e,s)=>{const{body:i}=s;e>0&&(i.addEventListener("pointerdown",G0,{capture:!0}),i.addEventListener("pointermove",Ei))}))}function Ul(e,s){Oi.forEach(i=>{const{setResizeHandlerState:l}=i,a=fn.includes(i);l(e,a,s)})}function wy(){const[e,s]=Ms(0);return It(()=>s(i=>i+1),[])}function Me(e,s){if(!e)throw console.error(s),Error(s)}const Vu=10;function Vr(e,s,i=Vu){return e.toFixed(i)===s.toFixed(i)?0:e>s?1:-1}function Bn(e,s,i=Vu){return Vr(e,s,i)===0}function Ot(e,s,i){return Vr(e,s,i)===0}function Ny(e,s,i){if(e.length!==s.length)return!1;for(let l=0;l<e.length;l++){const a=e[l],u=s[l];if(!Ot(a,u,i))return!1}return!0}function Cs({panelConstraints:e,panelIndex:s,size:i}){const l=e[s];Me(l!=null,`Panel constraints not found for index ${s}`);let{collapsedSize:a=0,collapsible:u,maxSize:d=100,minSize:f=0}=l;if(Vr(i,f)<0)if(u){const x=(a+f)/2;Vr(i,x)<0?i=a:i=f}else i=f;return i=Math.min(d,i),i=parseFloat(i.toFixed(Vu)),i}function zi({delta:e,initialLayout:s,panelConstraints:i,pivotIndices:l,prevLayout:a,trigger:u}){if(Ot(e,0))return s;const d=[...s],[f,x]=l;Me(f!=null,"Invalid first pivot index"),Me(x!=null,"Invalid second pivot index");let m=0;if(u==="keyboard"){{const y=e<0?x:f,b=i[y];Me(b,`Panel constraints not found for index ${y}`);const{collapsedSize:v=0,collapsible:j,minSize:w=0}=b;if(j){const N=s[y];if(Me(N!=null,`Previous layout not found for panel index ${y}`),Ot(N,v)){const E=w-N;Vr(E,Math.abs(e))>0&&(e=e<0?0-E:E)}}}{const y=e<0?f:x,b=i[y];Me(b,`No panel constraints found for index ${y}`);const{collapsedSize:v=0,collapsible:j,minSize:w=0}=b;if(j){const N=s[y];if(Me(N!=null,`Previous layout not found for panel index ${y}`),Ot(N,w)){const E=N-v;Vr(E,Math.abs(e))>0&&(e=e<0?0-E:E)}}}}{const y=e<0?1:-1;let b=e<0?x:f,v=0;for(;;){const w=s[b];Me(w!=null,`Previous layout not found for panel index ${b}`);const E=Cs({panelConstraints:i,panelIndex:b,size:100})-w;if(v+=E,b+=y,b<0||b>=i.length)break}const j=Math.min(Math.abs(e),Math.abs(v));e=e<0?0-j:j}{let b=e<0?f:x;for(;b>=0&&b<i.length;){const v=Math.abs(e)-Math.abs(m),j=s[b];Me(j!=null,`Previous layout not found for panel index ${b}`);const w=j-v,N=Cs({panelConstraints:i,panelIndex:b,size:w});if(!Ot(j,N)&&(m+=j-N,d[b]=N,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?b--:b++}}if(Ny(a,d))return a;{const y=e<0?x:f,b=s[y];Me(b!=null,`Previous layout not found for panel index ${y}`);const v=b+m,j=Cs({panelConstraints:i,panelIndex:y,size:v});if(d[y]=j,!Ot(j,v)){let w=v-j,E=e<0?x:f;for(;E>=0&&E<i.length;){const z=d[E];Me(z!=null,`Previous layout not found for panel index ${E}`);const M=z+w,_=Cs({panelConstraints:i,panelIndex:E,size:M});if(Ot(z,_)||(w-=_-z,d[E]=_),Ot(w,0))break;e>0?E--:E++}}}const h=d.reduce((y,b)=>b+y,0);return Ot(h,100)?d:a}function jy({layout:e,panelsArray:s,pivotIndices:i}){let l=0,a=100,u=0,d=0;const f=i[0];Me(f!=null,"No pivot index found"),s.forEach((y,b)=>{const{constraints:v}=y,{maxSize:j=100,minSize:w=0}=v;b===f?(l=w,a=j):(u+=w,d+=j)});const x=Math.min(a,100-u),m=Math.max(l,100-d),h=e[f];return{valueMax:x,valueMin:m,valueNow:h}}function Fi(e,s=document){return Array.from(s.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function bm(e,s,i=document){const a=Fi(e,i).findIndex(u=>u.getAttribute("data-panel-resize-handle-id")===s);return a??null}function vm(e,s,i){const l=bm(e,s,i);return l!=null?[l,l+1]:[-1,-1]}function wm(e,s=document){var i;if(s instanceof HTMLElement&&(s==null||(i=s.dataset)===null||i===void 0?void 0:i.panelGroupId)==e)return s;const l=s.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return l||null}function ra(e,s=document){const i=s.querySelector(`[data-panel-resize-handle-id="${e}"]`);return i||null}function Sy(e,s,i,l=document){var a,u,d,f;const x=ra(s,l),m=Fi(e,l),h=x?m.indexOf(x):-1,y=(a=(u=i[h])===null||u===void 0?void 0:u.id)!==null&&a!==void 0?a:null,b=(d=(f=i[h+1])===null||f===void 0?void 0:f.id)!==null&&d!==void 0?d:null;return[y,b]}function Ey({committedValuesRef:e,eagerValuesRef:s,groupId:i,layout:l,panelDataArray:a,panelGroupElement:u,setLayout:d}){Rt({didWarnAboutMissingResizeHandle:!1}),Br(()=>{if(!u)return;const f=Fi(i,u);for(let x=0;x<a.length-1;x++){const{valueMax:m,valueMin:h,valueNow:y}=jy({layout:l,panelsArray:a,pivotIndices:[x,x+1]}),b=f[x];if(b!=null){const v=a[x];Me(v,`No panel data found for index "${x}"`),b.setAttribute("aria-controls",v.id),b.setAttribute("aria-valuemax",""+Math.round(m)),b.setAttribute("aria-valuemin",""+Math.round(h)),b.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{f.forEach((x,m)=>{x.removeAttribute("aria-controls"),x.removeAttribute("aria-valuemax"),x.removeAttribute("aria-valuemin"),x.removeAttribute("aria-valuenow")})}},[i,l,a,u]),Wr(()=>{if(!u)return;const f=s.current;Me(f,"Eager values not found");const{panelDataArray:x}=f,m=wm(i,u);Me(m!=null,`No group found for id "${i}"`);const h=Fi(i,u);Me(h,`No resize handles found for group id "${i}"`);const y=h.map(b=>{const v=b.getAttribute("data-panel-resize-handle-id");Me(v,"Resize handle element has no handle id attribute");const[j,w]=Sy(i,v,x,u);if(j==null||w==null)return()=>{};const N=E=>{if(!E.defaultPrevented)switch(E.key){case"Enter":{E.preventDefault();const z=x.findIndex(M=>M.id===j);if(z>=0){const M=x[z];Me(M,`No panel data found for index ${z}`);const _=l[z],{collapsedSize:L=0,collapsible:D,minSize:R=0}=M.constraints;if(_!=null&&D){const H=zi({delta:Ot(_,L)?R-L:L-_,initialLayout:l,panelConstraints:x.map(k=>k.constraints),pivotIndices:vm(i,v,u),prevLayout:l,trigger:"keyboard"});l!==H&&d(H)}}break}}};return b.addEventListener("keydown",N),()=>{b.removeEventListener("keydown",N)}});return()=>{y.forEach(b=>b())}},[u,e,s,i,l,a,d])}function Z0(e,s){if(e.length!==s.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==s[i])return!1;return!0}function Nm(e,s){const i=e==="horizontal",{x:l,y:a}=ta(s);return i?l:a}function Cy(e,s,i,l,a){const u=i==="horizontal",d=ra(s,a);Me(d,`No resize handle element found for id "${s}"`);const f=d.getAttribute("data-panel-group-id");Me(f,"Resize handle element has no group id attribute");let{initialCursorPosition:x}=l;const m=Nm(i,e),h=wm(f,a);Me(h,`No group element found for id "${f}"`);const y=h.getBoundingClientRect(),b=u?y.width:y.height;return(m-x)/b*100}function ky(e,s,i,l,a,u){if(dm(e)){const d=i==="horizontal";let f=0;e.shiftKey?f=100:a!=null?f=a:f=10;let x=0;switch(e.key){case"ArrowDown":x=d?0:f;break;case"ArrowLeft":x=d?-f:0;break;case"ArrowRight":x=d?f:0;break;case"ArrowUp":x=d?0:-f;break;case"End":x=100;break;case"Home":x=-100;break}return x}else return l==null?0:Cy(e,s,i,l,u)}function Iy({panelDataArray:e}){const s=Array(e.length),i=e.map(u=>u.constraints);let l=0,a=100;for(let u=0;u<e.length;u++){const d=i[u];Me(d,`Panel constraints not found for index ${u}`);const{defaultSize:f}=d;f!=null&&(l++,s[u]=f,a-=f)}for(let u=0;u<e.length;u++){const d=i[u];Me(d,`Panel constraints not found for index ${u}`);const{defaultSize:f}=d;if(f!=null)continue;const x=e.length-l,m=a/x;l++,s[u]=m,a-=m}return s}function vs(e,s,i){s.forEach((l,a)=>{const u=e[a];Me(u,`Panel data not found for index ${a}`);const{callbacks:d,constraints:f,id:x}=u,{collapsedSize:m=0,collapsible:h}=f,y=i[x];if(y==null||l!==y){i[x]=l;const{onCollapse:b,onExpand:v,onResize:j}=d;j&&j(l,y),h&&(b||v)&&(v&&(y==null||Bn(y,m))&&!Bn(l,m)&&v(),b&&(y==null||!Bn(y,m))&&Bn(l,m)&&b())}})}function Nl(e,s){if(e.length!==s.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=s[i])return!1;return!0}function Ry({defaultSize:e,dragState:s,layout:i,panelData:l,panelIndex:a,precision:u=3}){const d=i[a];let f;return d==null?f=e!=null?e.toPrecision(u):"1":l.length===1?f="1":f=d.toPrecision(u),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:s!==null?"none":void 0}}function My(e,s=10){let i=null;return(...a)=>{i!==null&&clearTimeout(i),i=setTimeout(()=>{e(...a)},s)}}function K0(e){try{if(typeof localStorage<"u")e.getItem=s=>localStorage.getItem(s),e.setItem=(s,i)=>{localStorage.setItem(s,i)};else throw new Error("localStorage not supported in this environment")}catch(s){console.error(s),e.getItem=()=>null,e.setItem=()=>{}}}function jm(e){return`react-resizable-panels:${e}`}function Sm(e){return e.map(s=>{const{constraints:i,id:l,idIsFromProps:a,order:u}=s;return a?l:u?`${u}:${JSON.stringify(i)}`:JSON.stringify(i)}).sort((s,i)=>s.localeCompare(i)).join(",")}function Em(e,s){try{const i=jm(e),l=s.getItem(i);if(l){const a=JSON.parse(l);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function _y(e,s,i){var l,a;const u=(l=Em(e,i))!==null&&l!==void 0?l:{},d=Sm(s);return(a=u[d])!==null&&a!==void 0?a:null}function zy(e,s,i,l,a){var u;const d=jm(e),f=Sm(s),x=(u=Em(e,a))!==null&&u!==void 0?u:{};x[f]={expandToSizes:Object.fromEntries(i.entries()),layout:l};try{a.setItem(d,JSON.stringify(x))}catch(m){console.error(m)}}function Q0({layout:e,panelConstraints:s}){const i=[...e],l=i.reduce((u,d)=>u+d,0);if(i.length!==s.length)throw Error(`Invalid ${s.length} panel layout: ${i.map(u=>`${u}%`).join(", ")}`);if(!Ot(l,100)&&i.length>0)for(let u=0;u<s.length;u++){const d=i[u];Me(d!=null,`No layout data found for index ${u}`);const f=100/l*d;i[u]=f}let a=0;for(let u=0;u<s.length;u++){const d=i[u];Me(d!=null,`No layout data found for index ${u}`);const f=Cs({panelConstraints:s,panelIndex:u,size:d});d!=f&&(a+=d-f,i[u]=f)}if(!Ot(a,0))for(let u=0;u<s.length;u++){const d=i[u];Me(d!=null,`No layout data found for index ${u}`);const f=d+a,x=Cs({panelConstraints:s,panelIndex:u,size:f});if(d!==x&&(a-=x-d,i[u]=x,Ot(a,0)))break}return i}const Py=100,Pi={getItem:e=>(K0(Pi),Pi.getItem(e)),setItem:(e,s)=>{K0(Pi),Pi.setItem(e,s)}},J0={};function Cm({autoSaveId:e=null,children:s,className:i="",direction:l,forwardedRef:a,id:u=null,onLayout:d=null,keyboardResizeBy:f=null,storage:x=Pi,style:m,tagName:h="div",...y}){const b=Wu(u),v=Rt(null),[j,w]=Ms(null),[N,E]=Ms([]),z=wy(),M=Rt({}),_=Rt(new Map),L=Rt(0),D=Rt({autoSaveId:e,direction:l,dragState:j,id:b,keyboardResizeBy:f,onLayout:d,storage:x}),R=Rt({layout:N,panelDataArray:[],panelDataArrayChanged:!1});Rt({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),cm(a,()=>({getId:()=>D.current.id,getLayout:()=>{const{layout:K}=R.current;return K},setLayout:K=>{const{onLayout:re}=D.current,{layout:oe,panelDataArray:ae}=R.current,J=Q0({layout:K,panelConstraints:ae.map(ie=>ie.constraints)});Z0(oe,J)||(E(J),R.current.layout=J,re&&re(J),vs(ae,J,M.current))}}),[]),Br(()=>{D.current.autoSaveId=e,D.current.direction=l,D.current.dragState=j,D.current.id=b,D.current.onLayout=d,D.current.storage=x}),Ey({committedValuesRef:D,eagerValuesRef:R,groupId:b,layout:N,panelDataArray:R.current.panelDataArray,setLayout:E,panelGroupElement:v.current}),Wr(()=>{const{panelDataArray:K}=R.current;if(e){if(N.length===0||N.length!==K.length)return;let re=J0[e];re==null&&(re=My(zy,Py),J0[e]=re);const oe=[...K],ae=new Map(_.current);re(e,oe,ae,N,x)}},[e,N,x]),Wr(()=>{});const H=It(K=>{const{onLayout:re}=D.current,{layout:oe,panelDataArray:ae}=R.current;if(K.constraints.collapsible){const J=ae.map(je=>je.constraints),{collapsedSize:ie=0,panelSize:pe,pivotIndices:ce}=Lr(ae,K,oe);if(Me(pe!=null,`Panel size not found for panel "${K.id}"`),!Bn(pe,ie)){_.current.set(K.id,pe);const ke=Es(ae,K)===ae.length-1?pe-ie:ie-pe,Re=zi({delta:ke,initialLayout:oe,panelConstraints:J,pivotIndices:ce,prevLayout:oe,trigger:"imperative-api"});Nl(oe,Re)||(E(Re),R.current.layout=Re,re&&re(Re),vs(ae,Re,M.current))}}},[]),k=It((K,re)=>{const{onLayout:oe}=D.current,{layout:ae,panelDataArray:J}=R.current;if(K.constraints.collapsible){const ie=J.map(De=>De.constraints),{collapsedSize:pe=0,panelSize:ce=0,minSize:je=0,pivotIndices:ke}=Lr(J,K,ae),Re=re??je;if(Bn(ce,pe)){const De=_.current.get(K.id),$e=De!=null&&De>=Re?De:Re,Pe=Es(J,K)===J.length-1?ce-$e:$e-ce,xe=zi({delta:Pe,initialLayout:ae,panelConstraints:ie,pivotIndices:ke,prevLayout:ae,trigger:"imperative-api"});Nl(ae,xe)||(E(xe),R.current.layout=xe,oe&&oe(xe),vs(J,xe,M.current))}}},[]),T=It(K=>{const{layout:re,panelDataArray:oe}=R.current,{panelSize:ae}=Lr(oe,K,re);return Me(ae!=null,`Panel size not found for panel "${K.id}"`),ae},[]),I=It((K,re)=>{const{panelDataArray:oe}=R.current,ae=Es(oe,K);return Ry({defaultSize:re,dragState:j,layout:N,panelData:oe,panelIndex:ae})},[j,N]),$=It(K=>{const{layout:re,panelDataArray:oe}=R.current,{collapsedSize:ae=0,collapsible:J,panelSize:ie}=Lr(oe,K,re);return Me(ie!=null,`Panel size not found for panel "${K.id}"`),J===!0&&Bn(ie,ae)},[]),W=It(K=>{const{layout:re,panelDataArray:oe}=R.current,{collapsedSize:ae=0,collapsible:J,panelSize:ie}=Lr(oe,K,re);return Me(ie!=null,`Panel size not found for panel "${K.id}"`),!J||Vr(ie,ae)>0},[]),S=It(K=>{const{panelDataArray:re}=R.current;re.push(K),re.sort((oe,ae)=>{const J=oe.order,ie=ae.order;return J==null&&ie==null?0:J==null?-1:ie==null?1:J-ie}),R.current.panelDataArrayChanged=!0,z()},[z]);Br(()=>{if(R.current.panelDataArrayChanged){R.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:re,storage:oe}=D.current,{layout:ae,panelDataArray:J}=R.current;let ie=null;if(K){const ce=_y(K,J,oe);ce&&(_.current=new Map(Object.entries(ce.expandToSizes)),ie=ce.layout)}ie==null&&(ie=Iy({panelDataArray:J}));const pe=Q0({layout:ie,panelConstraints:J.map(ce=>ce.constraints)});Z0(ae,pe)||(E(pe),R.current.layout=pe,re&&re(pe),vs(J,pe,M.current))}}),Br(()=>{const K=R.current;return()=>{K.layout=[]}},[]);const O=It(K=>{let re=!1;const oe=v.current;return oe&&window.getComputedStyle(oe,null).getPropertyValue("direction")==="rtl"&&(re=!0),function(J){J.preventDefault();const ie=v.current;if(!ie)return()=>null;const{direction:pe,dragState:ce,id:je,keyboardResizeBy:ke,onLayout:Re}=D.current,{layout:De,panelDataArray:$e}=R.current,{initialLayout:st}=ce??{},Pe=vm(je,K,ie);let xe=ky(J,K,pe,ce,ke,ie);const Qe=pe==="horizontal";Qe&&re&&(xe=-xe);const gt=$e.map(Qt=>Qt.constraints),it=zi({delta:xe,initialLayout:st??De,panelConstraints:gt,pivotIndices:Pe,prevLayout:De,trigger:dm(J)?"keyboard":"mouse-or-touch"}),_t=!Nl(De,it);(fm(J)||pm(J))&&L.current!=xe&&(L.current=xe,!_t&&xe!==0?Qe?ru(K,xe<0?hm:xm):ru(K,xe<0?gm:ym):ru(K,0)),_t&&(E(it),R.current.layout=it,Re&&Re(it),vs($e,it,M.current))}},[]),P=It((K,re)=>{const{onLayout:oe}=D.current,{layout:ae,panelDataArray:J}=R.current,ie=J.map(De=>De.constraints),{panelSize:pe,pivotIndices:ce}=Lr(J,K,ae);Me(pe!=null,`Panel size not found for panel "${K.id}"`);const ke=Es(J,K)===J.length-1?pe-re:re-pe,Re=zi({delta:ke,initialLayout:ae,panelConstraints:ie,pivotIndices:ce,prevLayout:ae,trigger:"imperative-api"});Nl(ae,Re)||(E(Re),R.current.layout=Re,oe&&oe(Re),vs(J,Re,M.current))},[]),Y=It((K,re)=>{const{layout:oe,panelDataArray:ae}=R.current,{collapsedSize:J=0,collapsible:ie}=re,{collapsedSize:pe=0,collapsible:ce,maxSize:je=100,minSize:ke=0}=K.constraints,{panelSize:Re}=Lr(ae,K,oe);Re!=null&&(ie&&ce&&Bn(Re,J)?Bn(J,pe)||P(K,pe):Re<ke?P(K,ke):Re>je&&P(K,je))},[P]),X=It((K,re)=>{const{direction:oe}=D.current,{layout:ae}=R.current;if(!v.current)return;const J=ra(K,v.current);Me(J,`Drag handle element not found for id "${K}"`);const ie=Nm(oe,re);w({dragHandleId:K,dragHandleRect:J.getBoundingClientRect(),initialCursorPosition:ie,initialLayout:ae})},[]),U=It(()=>{w(null)},[]),q=It(K=>{const{panelDataArray:re}=R.current,oe=Es(re,K);oe>=0&&(re.splice(oe,1),delete M.current[K.id],R.current.panelDataArrayChanged=!0,z())},[z]),A=ly(()=>({collapsePanel:H,direction:l,dragState:j,expandPanel:k,getPanelSize:T,getPanelStyle:I,groupId:b,isPanelCollapsed:$,isPanelExpanded:W,reevaluatePanelConstraints:Y,registerPanel:S,registerResizeHandle:O,resizePanel:P,startDragging:X,stopDragging:U,unregisterPanel:q,panelGroupElement:v.current}),[H,j,l,k,T,I,b,$,W,Y,S,O,P,X,U,q]),V={display:"flex",flexDirection:l==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ls(ea.Provider,{value:A},Ls(h,{...y,children:s,className:i,id:u,ref:v,style:{...V,...m},"data-panel-group":"","data-panel-group-direction":l,"data-panel-group-id":b}))}const km=lm((e,s)=>Ls(Cm,{...e,forwardedRef:s}));Cm.displayName="PanelGroup";km.displayName="forwardRef(PanelGroup)";function Es(e,s){return e.findIndex(i=>i===s||i.id===s.id)}function Lr(e,s,i){const l=Es(e,s),u=l===e.length-1?[l-1,l]:[l,l+1],d=i[l];return{...s.constraints,panelSize:d,pivotIndices:u}}function Ay({disabled:e,handleId:s,resizeHandler:i,panelGroupElement:l}){Wr(()=>{if(e||i==null||l==null)return;const a=ra(s,l);if(a==null)return;const u=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),i(d);break}case"F6":{d.preventDefault();const f=a.getAttribute("data-panel-group-id");Me(f,`No group element found for id "${f}"`);const x=Fi(f,l),m=bm(f,s,l);Me(m!==null,`No resize element found for id "${s}"`);const h=d.shiftKey?m>0?m-1:x.length-1:m+1<x.length?m+1:0;x[h].focus();break}}};return a.addEventListener("keydown",u),()=>{a.removeEventListener("keydown",u)}},[l,e,s,i])}function wu({children:e=null,className:s="",disabled:i=!1,hitAreaMargins:l,id:a,onBlur:u,onDragging:d,onFocus:f,style:x={},tabIndex:m=0,tagName:h="div",...y}){var b,v;const j=Rt(null),w=Rt({onDragging:d});Wr(()=>{w.current.onDragging=d});const N=am(ea);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:E,groupId:z,registerResizeHandle:M,startDragging:_,stopDragging:L,panelGroupElement:D}=N,R=Wu(a),[H,k]=Ms("inactive"),[T,I]=Ms(!1),[$,W]=Ms(null),S=Rt({state:H});Br(()=>{S.current.state=H}),Wr(()=>{if(i)W(null);else{const X=M(R);W(()=>X)}},[i,R,M]);const O=(b=l==null?void 0:l.coarse)!==null&&b!==void 0?b:15,P=(v=l==null?void 0:l.fine)!==null&&v!==void 0?v:5;return Wr(()=>{if(i||$==null)return;const X=j.current;return Me(X,"Element ref not attached"),vy(R,X,E,{coarse:O,fine:P},(q,A,V)=>{if(A)switch(q){case"down":{k("drag"),Me(V,'Expected event to be defined for "down" action'),_(R,V);const{onDragging:K}=w.current;K&&K(!0);break}case"move":{const{state:K}=S.current;K!=="drag"&&k("hover"),Me(V,'Expected event to be defined for "move" action'),$(V);break}case"up":{k("hover"),L();const{onDragging:K}=w.current;K&&K(!1);break}}else k("inactive")})},[O,E,i,P,M,R,$,_,L]),Ay({disabled:i,handleId:R,resizeHandler:$,panelGroupElement:D}),Ls(h,{...y,children:e,className:s,id:a,onBlur:()=>{I(!1),u==null||u()},onFocus:()=>{I(!0),f==null||f()},ref:j,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...x},tabIndex:m,"data-panel-group-direction":E,"data-panel-group-id":z,"data-resize-handle":"","data-resize-handle-active":H==="drag"?"pointer":T?"keyboard":void 0,"data-resize-handle-state":H,"data-panel-resize-handle-enabled":!i,"data-panel-resize-handle-id":R})}wu.displayName="PanelResizeHandle";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ty={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(e,s)=>{const i=F.forwardRef(({color:l="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:f="",children:x,...m},h)=>F.createElement("svg",{ref:h,...Ty,width:a,height:a,stroke:l,strokeWidth:d?Number(u)*24/Number(a):u,className:["lucide",`lucide-${Ly(e)}`,f].join(" "),...m},[...s.map(([y,b])=>F.createElement(y,b)),...Array.isArray(x)?x:[x]]));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Ie("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Ie("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Ie("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Ie("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ie("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Ie("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Ie("FileInput",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Ie("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Ie("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ie("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Ie("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ie("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Ie("SplitSquareHorizontal",[["path",{d:"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3",key:"lubmu8"}],["path",{d:"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3",key:"1ag34g"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Ie("StepBack",[["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["polygon",{points:"14,20 4,12 14,4",key:"ypakod"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Ie("StepForward",[["line",{x1:"6",x2:"6",y1:"4",y2:"20",key:"fy8qot"}],["polygon",{points:"10,4 20,12 10,20",key:"1mc1pf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=Ie("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Ie("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Ie("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function d1({leftPanel:e,centerPanel:s,rightPanel:i,defaultLeftSize:l=20,defaultRightSize:a=20}){const[u,d]=Q.useState(!1);return r.jsxs(km,{direction:"horizontal",className:"h-full",children:[r.jsx(Tl,{defaultSize:l,collapsible:!0,collapsedSize:0,minSize:0,maxSize:30,className:"bg-white border-r border-gray-200 transition-all duration-300 h-full",children:r.jsx("div",{className:"relative h-full overflow-hidden",children:e})}),r.jsx(wu,{className:"w-1 bg-gray-200 hover:bg-blue-500 transition-colors"}),r.jsx(Tl,{minSize:40,children:r.jsx("div",{className:"h-full relative",children:s})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(wu,{className:"w-1 bg-gray-200 hover:bg-blue-500 transition-colors"}),r.jsx(Tl,{defaultSize:a,collapsible:!0,collapsedSize:0,minSize:0,maxSize:30,className:`bg-white border-l border-gray-200 transition-all duration-300 ${u?"w-0":""}`,children:r.jsxs("div",{className:"relative h-full",children:[i,r.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute -left-3 top-1/2 transform -translate-y-1/2 z-10 w-6 h-12 bg-white border border-gray-200 rounded-l flex items-center justify-center hover:bg-gray-50",children:u?r.jsx(Uy,{className:"w-4 h-4 text-gray-600"}):r.jsx(Xu,{className:"w-4 h-4 text-gray-600"})})]})})]})]})}const f1={},np=e=>{let s;const i=new Set,l=(h,y)=>{const b=typeof h=="function"?h(s):h;if(!Object.is(b,s)){const v=s;s=y??(typeof b!="object"||b===null)?b:Object.assign({},s,b),i.forEach(j=>j(s,v))}},a=()=>s,x={setState:l,getState:a,getInitialState:()=>m,subscribe:h=>(i.add(h),()=>i.delete(h)),destroy:()=>{(f1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},m=s=e(l,a,x);return x},Tm=e=>e?np(e):np;var su={exports:{}},iu={},ou={exports:{}},lu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function p1(){if(rp)return lu;rp=1;var e=Zi();function s(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var i=typeof Object.is=="function"?Object.is:s,l=e.useState,a=e.useEffect,u=e.useLayoutEffect,d=e.useDebugValue;function f(y,b){var v=b(),j=l({inst:{value:v,getSnapshot:b}}),w=j[0].inst,N=j[1];return u(function(){w.value=v,w.getSnapshot=b,x(w)&&N({inst:w})},[y,v,b]),a(function(){return x(w)&&N({inst:w}),y(function(){x(w)&&N({inst:w})})},[y]),d(v),v}function x(y){var b=y.getSnapshot;y=y.value;try{var v=b();return!i(y,v)}catch{return!0}}function m(y,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return lu.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,lu}var sp;function m1(){return sp||(sp=1,ou.exports=p1()),ou.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function h1(){if(ip)return iu;ip=1;var e=Zi(),s=m1();function i(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var l=typeof Object.is=="function"?Object.is:i,a=s.useSyncExternalStore,u=e.useRef,d=e.useEffect,f=e.useMemo,x=e.useDebugValue;return iu.useSyncExternalStoreWithSelector=function(m,h,y,b,v){var j=u(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=f(function(){function E(D){if(!z){if(z=!0,M=D,D=b(D),v!==void 0&&w.hasValue){var R=w.value;if(v(R,D))return _=R}return _=D}if(R=_,l(M,D))return R;var H=b(D);return v!==void 0&&v(R,H)?(M=D,R):(M=D,_=H)}var z=!1,M,_,L=y===void 0?null:y;return[function(){return E(h())},L===null?void 0:function(){return E(L())}]},[h,y,b,v]);var N=a(m,j[0],j[1]);return d(function(){w.hasValue=!0,w.value=N},[N]),x(N),N},iu}var op;function x1(){return op||(op=1,su.exports=h1()),su.exports}var g1=x1();const Lm=sm(g1),Dm={},{useDebugValue:y1}=Q,{useSyncExternalStoreWithSelector:b1}=Lm;let lp=!1;const v1=e=>e;function w1(e,s=v1,i){(Dm?"production":void 0)!=="production"&&i&&!lp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),lp=!0);const l=b1(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,i);return y1(l),l}const N1=e=>{(Dm?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof e=="function"?Tm(e):e,i=(l,a)=>w1(s,l,a);return Object.assign(i,s),i},j1=e=>N1,S1={id:"main",name:"Main Circuit",components:[],wires:[]},le=j1()((e,s)=>({nodes:[],edges:[],selectedNode:null,selectedEdge:null,circuit:S1,isSimulating:!1,isProcessing:!1,stepCount:0,assembledInstructions:[],editorCode:"",simulationInterval:1e3,simulationTimer:null,registers:{},memory:{},pcValue:0,currentInstructionIndex:0,simulationHistory:[],outputMessages:[],disableUIUpdates:!1,performanceStats:{enablePipelineStats:!1,rTypeCount:0,iTypeCount:0,sTypeCount:0,bTypeCount:0,uTypeCount:0,jTypeCount:0,totalInstructions:0,cycleCount:0,instructionsExecuted:0,cpi:0,ipc:0,clockRate:0,branchCount:0,branchTakenCount:0,branchNotTakenCount:0,branchMispredictionCount:0,branchMispredictionRate:0,memoryReadCount:0,memoryWriteCount:0,dataHazardStalls:0,controlHazardStalls:0,memoryStalls:0,totalStalls:0,startTime:null,endTime:null,executionTimeMs:0},updatePcValue:i=>e({pcValue:i,currentInstructionIndex:i/4}),updateMemory:i=>e(l=>({memory:{...l.memory,...i}})),clearMemory:()=>e({memory:{}}),updateRegisters:i=>e(l=>({registers:{...l.registers,...i}})),updateNodeData:(i,l)=>e(a=>({nodes:a.nodes.map(u=>u.id===i?{...u,data:{...u.data,...l}}:u)})),updateAllNodesInputs:()=>{s().nodes.forEach(l=>{l.data&&typeof l.data.updateInputConnections=="function"&&l.data.updateInputConnections()})},setSelectedNode:i=>e({selectedNode:i}),setSelectedEdge:i=>e(l=>({selectedEdge:i,edges:l.edges.map(a=>({...a,selected:a.id===(i==null?void 0:i.id),style:{...a.style,stroke:a.id===(i==null?void 0:i.id)?"#3182ce":"#999",strokeWidth:a.id===(i==null?void 0:i.id)?3:1}}))})),addNode:i=>e(l=>({nodes:[...l.nodes,i]})),addEdge:i=>e(l=>{const a=l.edges.filter(d=>d.source===i.source&&d.target===i.target).length,u=`e${i.source}-${i.target}-${a+1}`;return{edges:[...l.edges,{...i,id:u,source:i.source||"",target:i.target||"",sourceHandle:i.sourceHandle,targetHandle:i.targetHandle,type:i.type||"smoothstep",animated:i.animated||!1,selected:!1,style:i.style||{stroke:"#999",strokeWidth:1},markerEnd:i.markerEnd||{type:"arrow",width:20,height:20,color:"#999"}}]}}),saveCircuit:i=>{const l=s(),a={name:i||`circuit-${new Date().toISOString().replace(/[:.]/g,"-")}`,nodes:l.nodes.map(u=>({...u,data:{...u.data,instructions:u.type==="instruction-memory"?u.data.instructions:void 0,contents:u.type==="memory"?u.data.contents:void 0,value:u.data.value,operation:u.data.operation,format:u.data.format,regWrite:u.data.regWrite,memRead:u.data.memRead,memWrite:u.data.memWrite,aluOp:u.data.aluOp,pc:u.data.pc}})),edges:l.edges.map(u=>{var d;return{...u,data:u.type==="editableEdge"?{...u.data,intermediatePoints:((d=u.data)==null?void 0:d.intermediatePoints)||[]}:u.data}}),isSimulating:l.isSimulating,editorCode:l.editorCode,assembledInstructions:l.assembledInstructions,savedAt:new Date().toISOString()};return JSON.stringify(a,null,2)},loadCircuit:i=>{try{const l=JSON.parse(i);e(a=>({...a,nodes:l.nodes||[],edges:l.edges||[],isSimulating:l.isSimulating||!1,editorCode:l.editorCode||"",assembledInstructions:l.assembledInstructions||[],selectedNode:null,selectedEdge:null})),setTimeout(()=>{s().resetSimulation()},0)}catch(l){throw console.error(":",l),new Error("")}},toggleSimulation:()=>{const i=s(),l=!i.isSimulating;if(i.simulationTimer!==null&&window.clearInterval(i.simulationTimer),l){const a=window.setInterval(()=>{s().stepSimulation()},i.simulationInterval);e({isSimulating:!0,simulationTimer:a})}else e({isSimulating:!1,simulationTimer:null})},resetSimulation:()=>{const i=s(),{clearCache:l,resetPerformanceStats:a}=i;i.simulationTimer!==null&&window.clearInterval(i.simulationTimer),l(),a(),e(u=>({nodes:u.nodes.map(d=>{var f;return d.type==="pc"?{...d,data:{...d.data,value:0,reset:!0}}:d.type==="instruction-memory"?{...d,data:{...d.data,pc:0,value:((f=d.data.instructions)==null?void 0:f[0])||null}}:d.type==="single-register"||d.type==="pipeline-register"?{...d,data:{...d.data,value:0,reset:!0,values:d.type==="pipeline-register"?Array(d.data.portCount||1).fill(0):void 0,label:"",outputValue:0}}:d}),isSimulating:!1,isProcessing:!1,stepCount:0,simulationTimer:null,pcValue:0,currentInstructionIndex:0,simulationHistory:[],registers:{},memory:u.memory})),setTimeout(()=>{e({registers:{2:2147483632,3:268435456}}),s().updateAllNodesInputs()},0)},stepSimulation:()=>{e(i=>{if(i.isProcessing)return{};const l=i.pcValue,a=i.assembledInstructions.length*4-4,u=i.assembledInstructions[l/4];if(u&&u.hex==="0x00100073")return i.simulationTimer!==null&&window.clearInterval(i.simulationTimer),{stepCount:i.stepCount+1,isSimulating:!1,simulationTimer:null};if(u&&u.hex==="0x00000073"){const x=i.registers[17];switch(x){case 1:const m=i.registers[10]||0;s().addOutputMessage(`${m}`);break;case 4:const h=i.registers[10]||0;let y="",b=h,v;do{const _="0x"+b.toString(16);v=i.memory[_],v!==void 0&&v!==0&&(v===10?y+=`
`:y+=String.fromCharCode(v)),b++}while(v!==void 0&&v!==0);s().addOutputMessage(y);break;case 10:return i.simulationTimer!==null&&window.clearInterval(i.simulationTimer),s().addOutputMessage(`
Program exited with code: 0
`),{isSimulating:!1,simulationTimer:null,pcValue:-1};case 11:const j=i.registers[10]||0;j===10?s().addOutputMessage(`
`):s().addOutputMessage(String.fromCharCode(j));break;case 5:const w=prompt("Enter an integer:");if(w!==null){const _=parseInt(w,10);isNaN(_)?s().addOutputMessage(`Invalid integer input.
`):(i.registers[10]=_,s().addOutputMessage(`${_}`))}else s().addOutputMessage(`Input cancelled.
`);break;case 8:const N=i.registers[10],E=i.registers[11],z=prompt(`Enter a string (max ${E} chars):`);if(z!==null){const _=Math.min(z.length,E-1),L={...i.memory};for(let D=0;D<_;D++)L["0x"+(N+D).toString(16)]=z.charCodeAt(D);L["0x"+(N+_).toString(16)]=0,s().updateMemory(L),s().addOutputMessage(`${z}`)}else s().addOutputMessage(`Input cancelled.
`);break;case 12:const M=prompt("Enter a character:");M!==null&&M.length>0?(i.registers[10]=M.charCodeAt(0),s().addOutputMessage(`${M}`)):s().addOutputMessage(`Invalid character input or cancelled.
`);break;case 93:return i.simulationTimer!==null&&window.clearInterval(i.simulationTimer),s().addOutputMessage(`
Program exited with code: 0
`),{isSimulating:!1,simulationTimer:null,pcValue:-1};default:s().addOutputMessage(`Unsupported ECALL operation: ${x}
`)}}if(l>a+4*4||l<0)return i.simulationTimer!==null&&window.clearInterval(i.simulationTimer),{isSimulating:!1,simulationTimer:null};u&&u.assembly?s().updatePerformanceStats(u.assembly):s().updatePerformanceStats("");const d={nodes:JSON.parse(JSON.stringify(i.nodes)),registers:{...i.registers},memory:{...i.memory},pcValue:i.pcValue,currentInstructionIndex:i.currentInstructionIndex,stepCount:i.stepCount},f={stepCount:i.stepCount+1,isProcessing:!0,simulationHistory:[...i.simulationHistory,d]};return setTimeout(()=>{s().updateAllNodesInputs(),e({isProcessing:!1})},0),f})},stepBackSimulation:()=>{const i=s();if(i.isProcessing||i.simulationHistory.length===0)return;const l=i.simulationHistory[i.simulationHistory.length-1],a=i.simulationHistory.slice(0,-1);e({stepCount:l.stepCount,isProcessing:!0}),setTimeout(()=>{e({nodes:l.nodes,registers:l.registers,memory:l.memory,pcValue:l.pcValue,currentInstructionIndex:l.currentInstructionIndex,simulationHistory:a}),setTimeout(()=>{s().updateAllNodesInputs(),e({isProcessing:!1})},0)},0)},updateNodes:i=>e(l=>({nodes:l.nodes.map(u=>{const d=i.find(f=>f.id===u.id);return d?{...u,...d}:u})})),setAssembledInstructions:i=>e({assembledInstructions:i}),setEditorCode:i=>e({editorCode:i}),removeNode:i=>e(l=>({nodes:l.nodes.filter(a=>a.id!==i),edges:l.edges.filter(a=>a.source!==i&&a.target!==i)})),removeEdge:i=>e(l=>{var d;const u={edges:l.edges.filter(f=>f.id!==i)};return((d=l.selectedEdge)==null?void 0:d.id)===i&&(u.selectedEdge=null),u}),updateEdgeType:i=>e(l=>({edges:l.edges.map(a=>{var u;return{...a,type:i,data:{...a.data,...i==="editableEdge"&&{intermediatePoints:((u=a.data)==null?void 0:u.intermediatePoints)||[]}},selectable:!0,focusable:!0,updatable:!0}})})),updateEdgeAnimated:i=>e(l=>({edges:l.edges.map(a=>({...a,animated:i}))})),updateConnectionMode:i=>e(l=>({edges:l.edges.map(a=>({...a,connectionMode:i}))})),addOutputMessage:i=>e(l=>({outputMessages:[...l.outputMessages,i.replace(/\\n/g,`
`)]})),clearOutputMessages:()=>e({outputMessages:[]}),updatePerformanceStats:i=>e(l=>{const a={...l.performanceStats};if(a.cycleCount++,a.startTime===null&&(a.startTime=Date.now()),a.endTime=Date.now(),a.startTime!==null&&a.endTime!==null&&(a.executionTimeMs=a.endTime-a.startTime,a.executionTimeMs>0&&(a.clockRate=a.cycleCount*1e3/a.executionTimeMs)),!i)return a.enablePipelineStats?(a.cpi=a.cycleCount/(a.instructionsExecuted||1),a.ipc=a.instructionsExecuted/(a.cycleCount||1),{performanceStats:a}):{};a.instructionsExecuted++,a.totalInstructions++,a.cpi=a.cycleCount/(a.instructionsExecuted||1),a.ipc=a.instructionsExecuted/(a.cycleCount||1);const u=i.split(" ")[0];return["add","sub","and","or","xor","sll","srl","sra","slt","sltu","mul","mulh","div","rem"].includes(u)?a.rTypeCount++:["addi","andi","ori","xori","slli","srli","srai","slti","sltiu","lb","lh","lw","lbu","lhu","jalr","ecall"].includes(u)?(a.iTypeCount++,["lb","lh","lw","lbu","lhu"].includes(u)&&a.memoryReadCount++):["sb","sh","sw"].includes(u)?(a.sTypeCount++,a.memoryWriteCount++):["beq","bne","blt","bge","bltu","bgeu"].includes(u)?(a.bTypeCount++,a.branchCount++):["lui","auipc"].includes(u)?a.uTypeCount++:["jal"].includes(u)&&a.jTypeCount++,{performanceStats:a}}),resetPerformanceStats:()=>e(i=>({performanceStats:{enablePipelineStats:i.performanceStats.enablePipelineStats,rTypeCount:0,iTypeCount:0,sTypeCount:0,bTypeCount:0,uTypeCount:0,jTypeCount:0,totalInstructions:0,cycleCount:0,instructionsExecuted:0,cpi:0,ipc:0,clockRate:0,branchCount:0,branchTakenCount:0,branchNotTakenCount:0,branchMispredictionCount:0,branchMispredictionRate:0,memoryReadCount:0,memoryWriteCount:0,dataHazardStalls:0,controlHazardStalls:0,memoryStalls:0,totalStalls:0,startTime:null,endTime:null,executionTimeMs:0}})),togglePipelineStats:()=>e(i=>({performanceStats:{...i.performanceStats,enablePipelineStats:!i.performanceStats.enablePipelineStats}})),toggleUIUpdates:()=>e(i=>({disableUIUpdates:!i.disableUIUpdates})),cache:{config:{size:256,blockSize:16,ways:1,sets:16,linesExp:4,waysExp:0},sets:[],stats:{hits:0,misses:0,hitRate:0,missRate:0,writebacks:0}},updateCacheConfig:i=>{const l=s().cache.config,a=i.linesExp!==void 0?i.linesExp:l.linesExp,u=i.blockSize!==void 0?i.blockSize:l.blockSize,d=i.waysExp!==void 0?i.waysExp:l.waysExp,f=Math.pow(2,a),x=Math.pow(2,d),m=f/x,h=m*x*u;e(y=>({cache:{...y.cache,config:{size:h,blockSize:u,ways:x,sets:m,linesExp:a,waysExp:d},sets:[]}})),s().initializeCache()},initializeCache:()=>{const{config:i}=s().cache,l=Array(i.sets).fill(null).map(()=>({entries:Array(i.ways).fill(null).map(()=>({tag:0,valid:!1,dirty:!1,data:Array(i.blockSize/4).fill(0),lastAccess:0})),lru:0}));e(a=>({cache:{...a.cache,sets:l,stats:{hits:0,misses:0,hitRate:0,missRate:0,writebacks:0}}}))},clearCache:()=>{e(i=>({cache:{...i.cache,sets:i.cache.sets.map(l=>({...l,entries:l.entries.map(a=>({...a,valid:!1,dirty:!1,data:Array(i.cache.config.blockSize/4).fill(0),lastAccess:0}))})),stats:{hits:0,misses:0,hitRate:0,missRate:0,writebacks:0}}}))},updateCacheStats:(i,l=!1)=>{e(a=>{const u={...a.cache.stats};i&&u.hits++,l&&u.writebacks++,!i&&!l&&u.misses++;const d=u.hits+u.misses;return u.hitRate=d>0?u.hits/d:0,u.missRate=d>0?u.misses/d:0,{cache:{...a.cache,stats:u}}})},reset:()=>{e({memory:{},registers:Array(32).fill(0),pcValue:0,stepCount:0,nodes:[],edges:[],selectedNode:null,selectedEdge:null,cache:{...s().cache,sets:[],stats:{hits:0,misses:0,hitRate:0,missRate:0,writebacks:0}}})},assembleCode:()=>{var l;const i=document.querySelector('button[class*="bg-blue-500"]:not([class*="bg-blue-100"])');i&&((l=i.textContent)!=null&&l.includes("Assemble"))?i.click():s().resetSimulation()}})),E1=[{type:"constant",label:"Constant",icon:r.jsx(tp,{className:"w-6 h-6"}),description:"Constant Output Component"},{type:"pc",label:"Program Counter",icon:r.jsx(o1,{className:"w-6 h-6"}),description:"Program Counter"},{type:"fork",label:"Fork",icon:r.jsx(ju,{className:"w-6 h-6"}),description:"Signal Fork Component"},{type:"pipeline-register",label:"Pipeline Register",icon:r.jsx(ks,{className:"w-6 h-6"}),description:"Pipeline Register Component"},{type:"jump-control",label:"Jump Control",icon:r.jsx(ju,{className:"w-6 h-6"}),description:"Jump Control Unit"},{type:"add",label:"Add",icon:r.jsx(Jy,{className:"w-6 h-6"}),description:"Adder Component"},{type:"instr-distributer",label:"Instruction Distributer",icon:r.jsx(Rm,{className:"w-6 h-6"}),description:"Instruction Distributor Component"},{type:"instruction-memory",label:"Instruction Memory",icon:r.jsx(Im,{className:"w-6 h-6"}),description:"Stores program instructions"},{type:"alu",label:"ALU",icon:r.jsx(Gy,{className:"w-6 h-6"}),description:"Arithmetic Logic Unit"},{type:"alu-control",label:"ALU Control",icon:r.jsx(Ui,{className:"w-6 h-6"}),description:"ALU Control Unit"},{type:"register",label:"32-bit Register",icon:r.jsx(ks,{className:"w-6 h-6"}),description:"32-bit Register"},{type:"mux",label:"Multiplexer",icon:r.jsx(Oy,{className:"w-6 h-6"}),description:"Multiplexer"},{type:"imm-gen",label:"Immediate Gen",icon:r.jsx(tp,{className:"w-6 h-6"}),description:"Immediate Generator"},{type:"control",label:"Control Unit",icon:r.jsx(Ui,{className:"w-6 h-6"}),description:"Main Control Unit"},{type:"memory",label:"Data Memory",icon:r.jsx(ks,{className:"w-6 h-6"}),description:"Data Memory Unit"},{type:"label",label:"Label",icon:r.jsx(i1,{className:"w-6 h-6"}),description:"Label Display Component"},{type:"single-register",label:"Single Register",icon:r.jsx(ks,{className:"w-6 h-6"}),description:"Single Register Component"},{type:"forwarding-unit",label:"Forwarding Unit",icon:r.jsx($y,{className:"w-6 h-6"}),description:"Data Forwarding Unit for Pipeline Hazard Control"},{type:"hazard-detection-unit",label:"Hazard Detection Unit",icon:r.jsx(Dy,{className:"w-6 h-6"}),description:"Detects and resolves pipeline hazards by stalling"},{type:"branch-hazard-unit",label:"Branch Hazard Unit",icon:r.jsx(Xy,{className:"w-6 h-6"}),description:"Resolves control hazards by flushing the pipeline"}];function C1(){const[e,s]=Q.useState(!1),i=le(m=>m.saveCircuit),l=le(m=>m.loadCircuit),a=le(m=>m.assembledInstructions),u=le(m=>m.currentInstructionIndex),d=(m,h)=>{m.dataTransfer.setData("application/reactflow",h),m.dataTransfer.effectAllowed="move"},f=async()=>{try{if("showSaveFilePicker"in window){const m=await window.showSaveFilePicker({suggestedName:`circuit-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),h=i(),y=await m.createWritable();await y.write(h),await y.close()}else{const m=i(),h=new Blob([m],{type:"application/json"}),y=URL.createObjectURL(h),b=document.createElement("a");b.href=y,b.download=`circuit-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,b.click(),URL.revokeObjectURL(y)}}catch(m){m instanceof Error&&m.name!=="AbortError"&&console.error(":",m)}},x=m=>{var y;const h=(y=m.target.files)==null?void 0:y[0];if(h){const b=new FileReader;b.onload=v=>{var w;const j=(w=v.target)==null?void 0:w.result;typeof j=="string"&&l(j)},b.readAsText(h)}};return r.jsx("div",{className:"flex flex-col h-full",children:r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h2",{className:"text-lg font-semibold tracking-tight text-gray-800",children:"Components"}),r.jsx("button",{type:"button",onClick:()=>s(!e),className:"p-1.5 rounded-md hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",title:e?"Show Components":"Show Assembly Result",children:r.jsx(t1,{className:"w-4 h-4 text-gray-600"})})]}),r.jsx("div",{className:"flex items-center mb-4",children:r.jsxs("div",{className:"flex rounded-md shadow-sm overflow-hidden",children:[r.jsxs("button",{type:"button",onClick:f,className:"flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 border border-blue-300 hover:bg-blue-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 whitespace-nowrap rounded-l-md",title:"Save circuit to file",children:[r.jsx(qy,{className:"w-3 h-3 mr-1 flex-shrink-0"}),r.jsx("span",{children:"Save"})]}),r.jsxs("label",{className:"flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 border-l-0 border-r-0 border-t border-b border-blue-300 hover:bg-blue-200 transition-colors cursor-pointer whitespace-nowrap focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-opacity-50",children:[r.jsx(u1,{className:"w-3 h-3 mr-1 flex-shrink-0"}),r.jsx("span",{children:"Load"}),r.jsx("input",{type:"file",accept:".json",onChange:x,className:"hidden"})]}),r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{onChange:m=>{const h=m.target.value;if(h!==""){if(h==="empty-datapath"){l(JSON.stringify({nodes:[],edges:[]}));return}fetch(`/Interactive-RISC-V-Simulator/datapath/${h}.json`).then(y=>y.json()).then(y=>{l(JSON.stringify(y))}).catch(y=>{console.error("Failed to load example:",y)})}},className:"h-full w-[100px] pl-6 pr-6 py-1 text-xs font-medium bg-blue-100 text-blue-800 border border-blue-300 border-l-0 hover:bg-blue-200 transition-colors appearance-none cursor-pointer rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",title:"Select Example Circuit","aria-label":"Select example circuit to load",children:[r.jsx("option",{value:"",children:"Example"}),r.jsx("option",{value:"empty-datapath",children:"Empty"}),r.jsx("option",{value:"basic-datapath",children:"Single Cycle"}),r.jsx("option",{value:"basic-pipeline",children:"Pipeline"}),r.jsx("option",{value:"pipeline-forward",children:"Pipeline with Hazard Control"})]}),r.jsx("div",{className:"absolute left-1.5 top-1/2 transform -translate-y-1/2 pointer-events-none",children:r.jsx(Yy,{className:"w-3 h-3 text-blue-700"})}),r.jsx("div",{className:"absolute right-1.5 top-1/2 transform -translate-y-1/2 pointer-events-none",children:r.jsx("svg",{className:"w-3 h-3 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})})]})}),r.jsx("div",{className:"space-y-1.5 overflow-y-auto max-h-[calc(100vh-12rem)]",children:e?r.jsx("div",{className:"space-y-1.5 overflow-y-auto",children:a.map((m,h)=>r.jsx("div",{ref:h===u?y=>{y&&y.scrollIntoView({behavior:"smooth",block:"center"})}:void 0,className:`p-2.5 rounded-md ${h===u?"bg-yellow-50 border border-yellow-200":"bg-gray-50 hover:bg-gray-100 transition-colors"}`,children:r.jsx("div",{className:"font-mono text-sm text-gray-700",children:m.assembly})},h))}):E1.map(m=>r.jsxs("div",{className:"flex items-center p-2.5 bg-gray-50 rounded-md cursor-move hover:bg-gray-100 transition-colors border border-transparent hover:border-gray-200",draggable:!0,onDragStart:h=>d(h,m.type),children:[r.jsx("div",{className:"text-gray-600",children:m.icon}),r.jsx("span",{className:"ml-2.5 font-medium text-gray-700",children:m.label})]},m.type))})]})})}function vt(e){if(typeof e=="string"||typeof e=="number")return""+e;let s="";if(Array.isArray(e))for(let i=0,l;i<e.length;i++)(l=vt(e[i]))!==""&&(s+=(s&&" ")+l);else for(let i in e)e[i]&&(s+=(s&&" ")+i);return s}const{useDebugValue:k1}=Q,{useSyncExternalStoreWithSelector:I1}=Lm,R1=e=>e;function $m(e,s=R1,i){const l=I1(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,i);return k1(l),l}const ap=(e,s)=>{const i=Tm(e),l=(a,u=s)=>$m(i,a,u);return Object.assign(l,i),l},M1=(e,s)=>e?ap(e,s):ap;function ct(e,s){if(Object.is(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;if(e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(const[l,a]of e)if(!Object.is(a,s.get(l)))return!1;return!0}if(e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(const l of e)if(!s.has(l))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(s).length)return!1;for(const l of i)if(!Object.prototype.hasOwnProperty.call(s,l)||!Object.is(e[l],s[l]))return!1;return!0}var _1={value:()=>{}};function sa(){for(var e=0,s=arguments.length,i={},l;e<s;++e){if(!(l=arguments[e]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new Ll(i)}function Ll(e){this._=e}function z1(e,s){return e.trim().split(/^|\s+/).map(function(i){var l="",a=i.indexOf(".");if(a>=0&&(l=i.slice(a+1),i=i.slice(0,a)),i&&!s.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}Ll.prototype=sa.prototype={constructor:Ll,on:function(e,s){var i=this._,l=z1(e+"",i),a,u=-1,d=l.length;if(arguments.length<2){for(;++u<d;)if((a=(e=l[u]).type)&&(a=P1(i[a],e.name)))return a;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++u<d;)if(a=(e=l[u]).type)i[a]=cp(i[a],e.name,s);else if(s==null)for(a in i)i[a]=cp(i[a],e.name,null);return this},copy:function(){var e={},s=this._;for(var i in s)e[i]=s[i].slice();return new Ll(e)},call:function(e,s){if((a=arguments.length-2)>0)for(var i=new Array(a),l=0,a,u;l<a;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],l=0,a=u.length;l<a;++l)u[l].value.apply(s,i)},apply:function(e,s,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],a=0,u=l.length;a<u;++a)l[a].value.apply(s,i)}};function P1(e,s){for(var i=0,l=e.length,a;i<l;++i)if((a=e[i]).name===s)return a.value}function cp(e,s,i){for(var l=0,a=e.length;l<a;++l)if(e[l].name===s){e[l]=_1,e=e.slice(0,l).concat(e.slice(l+1));break}return i!=null&&e.push({name:s,value:i}),e}var Su="http://www.w3.org/1999/xhtml";const up={svg:"http://www.w3.org/2000/svg",xhtml:Su,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ia(e){var s=e+="",i=s.indexOf(":");return i>=0&&(s=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),up.hasOwnProperty(s)?{space:up[s],local:e}:e}function A1(e){return function(){var s=this.ownerDocument,i=this.namespaceURI;return i===Su&&s.documentElement.namespaceURI===Su?s.createElement(e):s.createElementNS(i,e)}}function T1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Om(e){var s=ia(e);return(s.local?T1:A1)(s)}function L1(){}function Yu(e){return e==null?L1:function(){return this.querySelector(e)}}function D1(e){typeof e!="function"&&(e=Yu(e));for(var s=this._groups,i=s.length,l=new Array(i),a=0;a<i;++a)for(var u=s[a],d=u.length,f=l[a]=new Array(d),x,m,h=0;h<d;++h)(x=u[h])&&(m=e.call(x,x.__data__,h,u))&&("__data__"in x&&(m.__data__=x.__data__),f[h]=m);return new Ut(l,this._parents)}function $1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function O1(){return[]}function Fm(e){return e==null?O1:function(){return this.querySelectorAll(e)}}function F1(e){return function(){return $1(e.apply(this,arguments))}}function U1(e){typeof e=="function"?e=F1(e):e=Fm(e);for(var s=this._groups,i=s.length,l=[],a=[],u=0;u<i;++u)for(var d=s[u],f=d.length,x,m=0;m<f;++m)(x=d[m])&&(l.push(e.call(x,x.__data__,m,d)),a.push(x));return new Ut(l,a)}function Um(e){return function(){return this.matches(e)}}function Wm(e){return function(s){return s.matches(e)}}var W1=Array.prototype.find;function B1(e){return function(){return W1.call(this.children,e)}}function H1(){return this.firstElementChild}function V1(e){return this.select(e==null?H1:B1(typeof e=="function"?e:Wm(e)))}var q1=Array.prototype.filter;function X1(){return Array.from(this.children)}function Y1(e){return function(){return q1.call(this.children,e)}}function G1(e){return this.selectAll(e==null?X1:Y1(typeof e=="function"?e:Wm(e)))}function Z1(e){typeof e!="function"&&(e=Um(e));for(var s=this._groups,i=s.length,l=new Array(i),a=0;a<i;++a)for(var u=s[a],d=u.length,f=l[a]=[],x,m=0;m<d;++m)(x=u[m])&&e.call(x,x.__data__,m,u)&&f.push(x);return new Ut(l,this._parents)}function Bm(e){return new Array(e.length)}function K1(){return new Ut(this._enter||this._groups.map(Bm),this._parents)}function Wl(e,s){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=s}Wl.prototype={constructor:Wl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,s){return this._parent.insertBefore(e,s)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Q1(e){return function(){return e}}function J1(e,s,i,l,a,u){for(var d=0,f,x=s.length,m=u.length;d<m;++d)(f=s[d])?(f.__data__=u[d],l[d]=f):i[d]=new Wl(e,u[d]);for(;d<x;++d)(f=s[d])&&(a[d]=f)}function eb(e,s,i,l,a,u,d){var f,x,m=new Map,h=s.length,y=u.length,b=new Array(h),v;for(f=0;f<h;++f)(x=s[f])&&(b[f]=v=d.call(x,x.__data__,f,s)+"",m.has(v)?a[f]=x:m.set(v,x));for(f=0;f<y;++f)v=d.call(e,u[f],f,u)+"",(x=m.get(v))?(l[f]=x,x.__data__=u[f],m.delete(v)):i[f]=new Wl(e,u[f]);for(f=0;f<h;++f)(x=s[f])&&m.get(b[f])===x&&(a[f]=x)}function tb(e){return e.__data__}function nb(e,s){if(!arguments.length)return Array.from(this,tb);var i=s?eb:J1,l=this._parents,a=this._groups;typeof e!="function"&&(e=Q1(e));for(var u=a.length,d=new Array(u),f=new Array(u),x=new Array(u),m=0;m<u;++m){var h=l[m],y=a[m],b=y.length,v=rb(e.call(h,h&&h.__data__,m,l)),j=v.length,w=f[m]=new Array(j),N=d[m]=new Array(j),E=x[m]=new Array(b);i(h,y,w,N,E,v,s);for(var z=0,M=0,_,L;z<j;++z)if(_=w[z]){for(z>=M&&(M=z+1);!(L=N[M])&&++M<j;);_._next=L||null}}return d=new Ut(d,l),d._enter=f,d._exit=x,d}function rb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sb(){return new Ut(this._exit||this._groups.map(Bm),this._parents)}function ib(e,s,i){var l=this.enter(),a=this,u=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),s!=null&&(a=s(a),a&&(a=a.selection())),i==null?u.remove():i(u),l&&a?l.merge(a).order():a}function ob(e){for(var s=e.selection?e.selection():e,i=this._groups,l=s._groups,a=i.length,u=l.length,d=Math.min(a,u),f=new Array(a),x=0;x<d;++x)for(var m=i[x],h=l[x],y=m.length,b=f[x]=new Array(y),v,j=0;j<y;++j)(v=m[j]||h[j])&&(b[j]=v);for(;x<a;++x)f[x]=i[x];return new Ut(f,this._parents)}function lb(){for(var e=this._groups,s=-1,i=e.length;++s<i;)for(var l=e[s],a=l.length-1,u=l[a],d;--a>=0;)(d=l[a])&&(u&&d.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(d,u),u=d);return this}function ab(e){e||(e=cb);function s(y,b){return y&&b?e(y.__data__,b.__data__):!y-!b}for(var i=this._groups,l=i.length,a=new Array(l),u=0;u<l;++u){for(var d=i[u],f=d.length,x=a[u]=new Array(f),m,h=0;h<f;++h)(m=d[h])&&(x[h]=m);x.sort(s)}return new Ut(a,this._parents).order()}function cb(e,s){return e<s?-1:e>s?1:e>=s?0:NaN}function ub(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function db(){return Array.from(this)}function fb(){for(var e=this._groups,s=0,i=e.length;s<i;++s)for(var l=e[s],a=0,u=l.length;a<u;++a){var d=l[a];if(d)return d}return null}function pb(){let e=0;for(const s of this)++e;return e}function mb(){return!this.node()}function hb(e){for(var s=this._groups,i=0,l=s.length;i<l;++i)for(var a=s[i],u=0,d=a.length,f;u<d;++u)(f=a[u])&&e.call(f,f.__data__,u,a);return this}function xb(e){return function(){this.removeAttribute(e)}}function gb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yb(e,s){return function(){this.setAttribute(e,s)}}function bb(e,s){return function(){this.setAttributeNS(e.space,e.local,s)}}function vb(e,s){return function(){var i=s.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function wb(e,s){return function(){var i=s.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function Nb(e,s){var i=ia(e);if(arguments.length<2){var l=this.node();return i.local?l.getAttributeNS(i.space,i.local):l.getAttribute(i)}return this.each((s==null?i.local?gb:xb:typeof s=="function"?i.local?wb:vb:i.local?bb:yb)(i,s))}function Hm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function jb(e){return function(){this.style.removeProperty(e)}}function Sb(e,s,i){return function(){this.style.setProperty(e,s,i)}}function Eb(e,s,i){return function(){var l=s.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,i)}}function Cb(e,s,i){return arguments.length>1?this.each((s==null?jb:typeof s=="function"?Eb:Sb)(e,s,i??"")):Ds(this.node(),e)}function Ds(e,s){return e.style.getPropertyValue(s)||Hm(e).getComputedStyle(e,null).getPropertyValue(s)}function kb(e){return function(){delete this[e]}}function Ib(e,s){return function(){this[e]=s}}function Rb(e,s){return function(){var i=s.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function Mb(e,s){return arguments.length>1?this.each((s==null?kb:typeof s=="function"?Rb:Ib)(e,s)):this.node()[e]}function Vm(e){return e.trim().split(/^|\s+/)}function Gu(e){return e.classList||new qm(e)}function qm(e){this._node=e,this._names=Vm(e.getAttribute("class")||"")}qm.prototype={add:function(e){var s=this._names.indexOf(e);s<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var s=this._names.indexOf(e);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xm(e,s){for(var i=Gu(e),l=-1,a=s.length;++l<a;)i.add(s[l])}function Ym(e,s){for(var i=Gu(e),l=-1,a=s.length;++l<a;)i.remove(s[l])}function _b(e){return function(){Xm(this,e)}}function zb(e){return function(){Ym(this,e)}}function Pb(e,s){return function(){(s.apply(this,arguments)?Xm:Ym)(this,e)}}function Ab(e,s){var i=Vm(e+"");if(arguments.length<2){for(var l=Gu(this.node()),a=-1,u=i.length;++a<u;)if(!l.contains(i[a]))return!1;return!0}return this.each((typeof s=="function"?Pb:s?_b:zb)(i,s))}function Tb(){this.textContent=""}function Lb(e){return function(){this.textContent=e}}function Db(e){return function(){var s=e.apply(this,arguments);this.textContent=s??""}}function $b(e){return arguments.length?this.each(e==null?Tb:(typeof e=="function"?Db:Lb)(e)):this.node().textContent}function Ob(){this.innerHTML=""}function Fb(e){return function(){this.innerHTML=e}}function Ub(e){return function(){var s=e.apply(this,arguments);this.innerHTML=s??""}}function Wb(e){return arguments.length?this.each(e==null?Ob:(typeof e=="function"?Ub:Fb)(e)):this.node().innerHTML}function Bb(){this.nextSibling&&this.parentNode.appendChild(this)}function Hb(){return this.each(Bb)}function Vb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qb(){return this.each(Vb)}function Xb(e){var s=typeof e=="function"?e:Om(e);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function Yb(){return null}function Gb(e,s){var i=typeof e=="function"?e:Om(e),l=s==null?Yb:typeof s=="function"?s:Yu(s);return this.select(function(){return this.insertBefore(i.apply(this,arguments),l.apply(this,arguments)||null)})}function Zb(){var e=this.parentNode;e&&e.removeChild(this)}function Kb(){return this.each(Zb)}function Qb(){var e=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(e,this.nextSibling):e}function Jb(){var e=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(e,this.nextSibling):e}function ev(e){return this.select(e?Jb:Qb)}function tv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nv(e){return function(s){e.call(this,s,this.__data__)}}function rv(e){return e.trim().split(/^|\s+/).map(function(s){var i="",l=s.indexOf(".");return l>=0&&(i=s.slice(l+1),s=s.slice(0,l)),{type:s,name:i}})}function sv(e){return function(){var s=this.__on;if(s){for(var i=0,l=-1,a=s.length,u;i<a;++i)u=s[i],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):s[++l]=u;++l?s.length=l:delete this.__on}}}function iv(e,s,i){return function(){var l=this.__on,a,u=nv(s);if(l){for(var d=0,f=l.length;d<f;++d)if((a=l[d]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=i),a.value=s;return}}this.addEventListener(e.type,u,i),a={type:e.type,name:e.name,value:s,listener:u,options:i},l?l.push(a):this.__on=[a]}}function ov(e,s,i){var l=rv(e+""),a,u=l.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var x=0,m=f.length,h;x<m;++x)for(a=0,h=f[x];a<u;++a)if((d=l[a]).type===h.type&&d.name===h.name)return h.value}return}for(f=s?iv:sv,a=0;a<u;++a)this.each(f(l[a],s,i));return this}function Gm(e,s,i){var l=Hm(e),a=l.CustomEvent;typeof a=="function"?a=new a(s,i):(a=l.document.createEvent("Event"),i?(a.initEvent(s,i.bubbles,i.cancelable),a.detail=i.detail):a.initEvent(s,!1,!1)),e.dispatchEvent(a)}function lv(e,s){return function(){return Gm(this,e,s)}}function av(e,s){return function(){return Gm(this,e,s.apply(this,arguments))}}function cv(e,s){return this.each((typeof s=="function"?av:lv)(e,s))}function*uv(){for(var e=this._groups,s=0,i=e.length;s<i;++s)for(var l=e[s],a=0,u=l.length,d;a<u;++a)(d=l[a])&&(yield d)}var Zm=[null];function Ut(e,s){this._groups=e,this._parents=s}function Ki(){return new Ut([[document.documentElement]],Zm)}function dv(){return this}Ut.prototype=Ki.prototype={constructor:Ut,select:D1,selectAll:U1,selectChild:V1,selectChildren:G1,filter:Z1,data:nb,enter:K1,exit:sb,join:ib,merge:ob,selection:dv,order:lb,sort:ab,call:ub,nodes:db,node:fb,size:pb,empty:mb,each:hb,attr:Nb,style:Cb,property:Mb,classed:Ab,text:$b,html:Wb,raise:Hb,lower:qb,append:Xb,insert:Gb,remove:Kb,clone:ev,datum:tv,on:ov,dispatch:cv,[Symbol.iterator]:uv};function un(e){return typeof e=="string"?new Ut([[document.querySelector(e)]],[document.documentElement]):new Ut([[e]],Zm)}function fv(e){let s;for(;s=e.sourceEvent;)e=s;return e}function jn(e,s){if(e=fv(e),s===void 0&&(s=e.currentTarget),s){var i=s.ownerSVGElement||s;if(i.createSVGPoint){var l=i.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,l=l.matrixTransform(s.getScreenCTM().inverse()),[l.x,l.y]}if(s.getBoundingClientRect){var a=s.getBoundingClientRect();return[e.clientX-a.left-s.clientLeft,e.clientY-a.top-s.clientTop]}}return[e.pageX,e.pageY]}const pv={passive:!1},Wi={capture:!0,passive:!1};function au(e){e.stopImmediatePropagation()}function zs(e){e.preventDefault(),e.stopImmediatePropagation()}function Km(e){var s=e.document.documentElement,i=un(e).on("dragstart.drag",zs,Wi);"onselectstart"in s?i.on("selectstart.drag",zs,Wi):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function Qm(e,s){var i=e.document.documentElement,l=un(e).on("dragstart.drag",null);s&&(l.on("click.drag",zs,Wi),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in i?l.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const jl=e=>()=>e;function Eu(e,{sourceEvent:s,subject:i,target:l,identifier:a,active:u,x:d,y:f,dx:x,dy:m,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:x,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:h}})}Eu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function mv(e){return!e.ctrlKey&&!e.button}function hv(){return this.parentNode}function xv(e,s){return s??{x:e.x,y:e.y}}function gv(){return navigator.maxTouchPoints||"ontouchstart"in this}function yv(){var e=mv,s=hv,i=xv,l=gv,a={},u=sa("start","drag","end"),d=0,f,x,m,h,y=0;function b(_){_.on("mousedown.drag",v).filter(l).on("touchstart.drag",N).on("touchmove.drag",E,pv).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(_,L){if(!(h||!e.call(this,_,L))){var D=M(this,s.call(this,_,L),_,L,"mouse");D&&(un(_.view).on("mousemove.drag",j,Wi).on("mouseup.drag",w,Wi),Km(_.view),au(_),m=!1,f=_.clientX,x=_.clientY,D("start",_))}}function j(_){if(zs(_),!m){var L=_.clientX-f,D=_.clientY-x;m=L*L+D*D>y}a.mouse("drag",_)}function w(_){un(_.view).on("mousemove.drag mouseup.drag",null),Qm(_.view,m),zs(_),a.mouse("end",_)}function N(_,L){if(e.call(this,_,L)){var D=_.changedTouches,R=s.call(this,_,L),H=D.length,k,T;for(k=0;k<H;++k)(T=M(this,R,_,L,D[k].identifier,D[k]))&&(au(_),T("start",_,D[k]))}}function E(_){var L=_.changedTouches,D=L.length,R,H;for(R=0;R<D;++R)(H=a[L[R].identifier])&&(zs(_),H("drag",_,L[R]))}function z(_){var L=_.changedTouches,D=L.length,R,H;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),R=0;R<D;++R)(H=a[L[R].identifier])&&(au(_),H("end",_,L[R]))}function M(_,L,D,R,H,k){var T=u.copy(),I=jn(k||D,L),$,W,S;if((S=i.call(_,new Eu("beforestart",{sourceEvent:D,target:b,identifier:H,active:d,x:I[0],y:I[1],dx:0,dy:0,dispatch:T}),R))!=null)return $=S.x-I[0]||0,W=S.y-I[1]||0,function O(P,Y,X){var U=I,q;switch(P){case"start":a[H]=O,q=d++;break;case"end":delete a[H],--d;case"drag":I=jn(X||Y,L),q=d;break}T.call(P,_,new Eu(P,{sourceEvent:Y,subject:S,target:b,identifier:H,active:q,x:I[0]+$,y:I[1]+W,dx:I[0]-U[0],dy:I[1]-U[1],dispatch:T}),R)}}return b.filter=function(_){return arguments.length?(e=typeof _=="function"?_:jl(!!_),b):e},b.container=function(_){return arguments.length?(s=typeof _=="function"?_:jl(_),b):s},b.subject=function(_){return arguments.length?(i=typeof _=="function"?_:jl(_),b):i},b.touchable=function(_){return arguments.length?(l=typeof _=="function"?_:jl(!!_),b):l},b.on=function(){var _=u.on.apply(u,arguments);return _===u?b:_},b.clickDistance=function(_){return arguments.length?(y=(_=+_)*_,b):Math.sqrt(y)},b}function Zu(e,s,i){e.prototype=s.prototype=i,i.constructor=e}function Jm(e,s){var i=Object.create(e.prototype);for(var l in s)i[l]=s[l];return i}function Qi(){}var Bi=.7,Bl=1/Bi,Ps="\\s*([+-]?\\d+)\\s*",Hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bv=/^#([0-9a-f]{3,8})$/,vv=new RegExp(`^rgb\\(${Ps},${Ps},${Ps}\\)$`),wv=new RegExp(`^rgb\\(${Sn},${Sn},${Sn}\\)$`),Nv=new RegExp(`^rgba\\(${Ps},${Ps},${Ps},${Hi}\\)$`),jv=new RegExp(`^rgba\\(${Sn},${Sn},${Sn},${Hi}\\)$`),Sv=new RegExp(`^hsl\\(${Hi},${Sn},${Sn}\\)$`),Ev=new RegExp(`^hsla\\(${Hi},${Sn},${Sn},${Hi}\\)$`),dp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zu(Qi,Vi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fp,formatHex:fp,formatHex8:Cv,formatHsl:kv,formatRgb:pp,toString:pp});function fp(){return this.rgb().formatHex()}function Cv(){return this.rgb().formatHex8()}function kv(){return eh(this).formatHsl()}function pp(){return this.rgb().formatRgb()}function Vi(e){var s,i;return e=(e+"").trim().toLowerCase(),(s=bv.exec(e))?(i=s[1].length,s=parseInt(s[1],16),i===6?mp(s):i===3?new Mt(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):i===8?Sl(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):i===4?Sl(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=vv.exec(e))?new Mt(s[1],s[2],s[3],1):(s=wv.exec(e))?new Mt(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=Nv.exec(e))?Sl(s[1],s[2],s[3],s[4]):(s=jv.exec(e))?Sl(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=Sv.exec(e))?gp(s[1],s[2]/100,s[3]/100,1):(s=Ev.exec(e))?gp(s[1],s[2]/100,s[3]/100,s[4]):dp.hasOwnProperty(e)?mp(dp[e]):e==="transparent"?new Mt(NaN,NaN,NaN,0):null}function mp(e){return new Mt(e>>16&255,e>>8&255,e&255,1)}function Sl(e,s,i,l){return l<=0&&(e=s=i=NaN),new Mt(e,s,i,l)}function Iv(e){return e instanceof Qi||(e=Vi(e)),e?(e=e.rgb(),new Mt(e.r,e.g,e.b,e.opacity)):new Mt}function Cu(e,s,i,l){return arguments.length===1?Iv(e):new Mt(e,s,i,l??1)}function Mt(e,s,i,l){this.r=+e,this.g=+s,this.b=+i,this.opacity=+l}Zu(Mt,Cu,Jm(Qi,{brighter(e){return e=e==null?Bl:Math.pow(Bl,e),new Mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bi:Math.pow(Bi,e),new Mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mt(Hr(this.r),Hr(this.g),Hr(this.b),Hl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hp,formatHex:hp,formatHex8:Rv,formatRgb:xp,toString:xp}));function hp(){return`#${Fr(this.r)}${Fr(this.g)}${Fr(this.b)}`}function Rv(){return`#${Fr(this.r)}${Fr(this.g)}${Fr(this.b)}${Fr((isNaN(this.opacity)?1:this.opacity)*255)}`}function xp(){const e=Hl(this.opacity);return`${e===1?"rgb(":"rgba("}${Hr(this.r)}, ${Hr(this.g)}, ${Hr(this.b)}${e===1?")":`, ${e})`}`}function Hl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fr(e){return e=Hr(e),(e<16?"0":"")+e.toString(16)}function gp(e,s,i,l){return l<=0?e=s=i=NaN:i<=0||i>=1?e=s=NaN:s<=0&&(e=NaN),new dn(e,s,i,l)}function eh(e){if(e instanceof dn)return new dn(e.h,e.s,e.l,e.opacity);if(e instanceof Qi||(e=Vi(e)),!e)return new dn;if(e instanceof dn)return e;e=e.rgb();var s=e.r/255,i=e.g/255,l=e.b/255,a=Math.min(s,i,l),u=Math.max(s,i,l),d=NaN,f=u-a,x=(u+a)/2;return f?(s===u?d=(i-l)/f+(i<l)*6:i===u?d=(l-s)/f+2:d=(s-i)/f+4,f/=x<.5?u+a:2-u-a,d*=60):f=x>0&&x<1?0:d,new dn(d,f,x,e.opacity)}function Mv(e,s,i,l){return arguments.length===1?eh(e):new dn(e,s,i,l??1)}function dn(e,s,i,l){this.h=+e,this.s=+s,this.l=+i,this.opacity=+l}Zu(dn,Mv,Jm(Qi,{brighter(e){return e=e==null?Bl:Math.pow(Bl,e),new dn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bi:Math.pow(Bi,e),new dn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,s=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,l=i+(i<.5?i:1-i)*s,a=2*i-l;return new Mt(cu(e>=240?e-240:e+120,a,l),cu(e,a,l),cu(e<120?e+240:e-120,a,l),this.opacity)},clamp(){return new dn(yp(this.h),El(this.s),El(this.l),Hl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hl(this.opacity);return`${e===1?"hsl(":"hsla("}${yp(this.h)}, ${El(this.s)*100}%, ${El(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yp(e){return e=(e||0)%360,e<0?e+360:e}function El(e){return Math.max(0,Math.min(1,e||0))}function cu(e,s,i){return(e<60?s+(i-s)*e/60:e<180?i:e<240?s+(i-s)*(240-e)/60:s)*255}const th=e=>()=>e;function _v(e,s){return function(i){return e+i*s}}function zv(e,s,i){return e=Math.pow(e,i),s=Math.pow(s,i)-e,i=1/i,function(l){return Math.pow(e+l*s,i)}}function Pv(e){return(e=+e)==1?nh:function(s,i){return i-s?zv(s,i,e):th(isNaN(s)?i:s)}}function nh(e,s){var i=s-e;return i?_v(e,i):th(isNaN(e)?s:e)}const bp=function e(s){var i=Pv(s);function l(a,u){var d=i((a=Cu(a)).r,(u=Cu(u)).r),f=i(a.g,u.g),x=i(a.b,u.b),m=nh(a.opacity,u.opacity);return function(h){return a.r=d(h),a.g=f(h),a.b=x(h),a.opacity=m(h),a+""}}return l.gamma=e,l}(1);function pr(e,s){return e=+e,s=+s,function(i){return e*(1-i)+s*i}}var ku=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uu=new RegExp(ku.source,"g");function Av(e){return function(){return e}}function Tv(e){return function(s){return e(s)+""}}function Lv(e,s){var i=ku.lastIndex=uu.lastIndex=0,l,a,u,d=-1,f=[],x=[];for(e=e+"",s=s+"";(l=ku.exec(e))&&(a=uu.exec(s));)(u=a.index)>i&&(u=s.slice(i,u),f[d]?f[d]+=u:f[++d]=u),(l=l[0])===(a=a[0])?f[d]?f[d]+=a:f[++d]=a:(f[++d]=null,x.push({i:d,x:pr(l,a)})),i=uu.lastIndex;return i<s.length&&(u=s.slice(i),f[d]?f[d]+=u:f[++d]=u),f.length<2?x[0]?Tv(x[0].x):Av(s):(s=x.length,function(m){for(var h=0,y;h<s;++h)f[(y=x[h]).i]=y.x(m);return f.join("")})}var vp=180/Math.PI,Iu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rh(e,s,i,l,a,u){var d,f,x;return(d=Math.sqrt(e*e+s*s))&&(e/=d,s/=d),(x=e*i+s*l)&&(i-=e*x,l-=s*x),(f=Math.sqrt(i*i+l*l))&&(i/=f,l/=f,x/=f),e*l<s*i&&(e=-e,s=-s,x=-x,d=-d),{translateX:a,translateY:u,rotate:Math.atan2(s,e)*vp,skewX:Math.atan(x)*vp,scaleX:d,scaleY:f}}var Cl;function Dv(e){const s=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return s.isIdentity?Iu:rh(s.a,s.b,s.c,s.d,s.e,s.f)}function $v(e){return e==null||(Cl||(Cl=document.createElementNS("http://www.w3.org/2000/svg","g")),Cl.setAttribute("transform",e),!(e=Cl.transform.baseVal.consolidate()))?Iu:(e=e.matrix,rh(e.a,e.b,e.c,e.d,e.e,e.f))}function sh(e,s,i,l){function a(m){return m.length?m.pop()+" ":""}function u(m,h,y,b,v,j){if(m!==y||h!==b){var w=v.push("translate(",null,s,null,i);j.push({i:w-4,x:pr(m,y)},{i:w-2,x:pr(h,b)})}else(y||b)&&v.push("translate("+y+s+b+i)}function d(m,h,y,b){m!==h?(m-h>180?h+=360:h-m>180&&(m+=360),b.push({i:y.push(a(y)+"rotate(",null,l)-2,x:pr(m,h)})):h&&y.push(a(y)+"rotate("+h+l)}function f(m,h,y,b){m!==h?b.push({i:y.push(a(y)+"skewX(",null,l)-2,x:pr(m,h)}):h&&y.push(a(y)+"skewX("+h+l)}function x(m,h,y,b,v,j){if(m!==y||h!==b){var w=v.push(a(v)+"scale(",null,",",null,")");j.push({i:w-4,x:pr(m,y)},{i:w-2,x:pr(h,b)})}else(y!==1||b!==1)&&v.push(a(v)+"scale("+y+","+b+")")}return function(m,h){var y=[],b=[];return m=e(m),h=e(h),u(m.translateX,m.translateY,h.translateX,h.translateY,y,b),d(m.rotate,h.rotate,y,b),f(m.skewX,h.skewX,y,b),x(m.scaleX,m.scaleY,h.scaleX,h.scaleY,y,b),m=h=null,function(v){for(var j=-1,w=b.length,N;++j<w;)y[(N=b[j]).i]=N.x(v);return y.join("")}}}var Ov=sh(Dv,"px, ","px)","deg)"),Fv=sh($v,", ",")",")"),Uv=1e-12;function wp(e){return((e=Math.exp(e))+1/e)/2}function Wv(e){return((e=Math.exp(e))-1/e)/2}function Bv(e){return((e=Math.exp(2*e))-1)/(e+1)}const Hv=function e(s,i,l){function a(u,d){var f=u[0],x=u[1],m=u[2],h=d[0],y=d[1],b=d[2],v=h-f,j=y-x,w=v*v+j*j,N,E;if(w<Uv)E=Math.log(b/m)/s,N=function(R){return[f+R*v,x+R*j,m*Math.exp(s*R*E)]};else{var z=Math.sqrt(w),M=(b*b-m*m+l*w)/(2*m*i*z),_=(b*b-m*m-l*w)/(2*b*i*z),L=Math.log(Math.sqrt(M*M+1)-M),D=Math.log(Math.sqrt(_*_+1)-_);E=(D-L)/s,N=function(R){var H=R*E,k=wp(L),T=m/(i*z)*(k*Bv(s*H+L)-Wv(L));return[f+T*v,x+T*j,m*k/wp(s*H+L)]}}return N.duration=E*1e3*s/Math.SQRT2,N}return a.rho=function(u){var d=Math.max(.001,+u),f=d*d,x=f*f;return e(d,f,x)},a}(Math.SQRT2,2,4);var $s=0,Ai=0,Ci=0,ih=1e3,Vl,Ti,ql=0,qr=0,oa=0,qi=typeof performance=="object"&&performance.now?performance:Date,oh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ku(){return qr||(oh(Vv),qr=qi.now()+oa)}function Vv(){qr=0}function Xl(){this._call=this._time=this._next=null}Xl.prototype=lh.prototype={constructor:Xl,restart:function(e,s,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Ku():+i)+(s==null?0:+s),!this._next&&Ti!==this&&(Ti?Ti._next=this:Vl=this,Ti=this),this._call=e,this._time=i,Ru()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ru())}};function lh(e,s,i){var l=new Xl;return l.restart(e,s,i),l}function qv(){Ku(),++$s;for(var e=Vl,s;e;)(s=qr-e._time)>=0&&e._call.call(void 0,s),e=e._next;--$s}function Np(){qr=(ql=qi.now())+oa,$s=Ai=0;try{qv()}finally{$s=0,Yv(),qr=0}}function Xv(){var e=qi.now(),s=e-ql;s>ih&&(oa-=s,ql=e)}function Yv(){for(var e,s=Vl,i,l=1/0;s;)s._call?(l>s._time&&(l=s._time),e=s,s=s._next):(i=s._next,s._next=null,s=e?e._next=i:Vl=i);Ti=e,Ru(l)}function Ru(e){if(!$s){Ai&&(Ai=clearTimeout(Ai));var s=e-qr;s>24?(e<1/0&&(Ai=setTimeout(Np,e-qi.now()-oa)),Ci&&(Ci=clearInterval(Ci))):(Ci||(ql=qi.now(),Ci=setInterval(Xv,ih)),$s=1,oh(Np))}}function jp(e,s,i){var l=new Xl;return s=s==null?0:+s,l.restart(a=>{l.stop(),e(a+s)},s,i),l}var Gv=sa("start","end","cancel","interrupt"),Zv=[],ah=0,Sp=1,Mu=2,Dl=3,Ep=4,_u=5,$l=6;function la(e,s,i,l,a,u){var d=e.__transition;if(!d)e.__transition={};else if(i in d)return;Kv(e,i,{name:s,index:l,group:a,on:Gv,tween:Zv,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:ah})}function Qu(e,s){var i=pn(e,s);if(i.state>ah)throw new Error("too late; already scheduled");return i}function Cn(e,s){var i=pn(e,s);if(i.state>Dl)throw new Error("too late; already running");return i}function pn(e,s){var i=e.__transition;if(!i||!(i=i[s]))throw new Error("transition not found");return i}function Kv(e,s,i){var l=e.__transition,a;l[s]=i,i.timer=lh(u,0,i.time);function u(m){i.state=Sp,i.timer.restart(d,i.delay,i.time),i.delay<=m&&d(m-i.delay)}function d(m){var h,y,b,v;if(i.state!==Sp)return x();for(h in l)if(v=l[h],v.name===i.name){if(v.state===Dl)return jp(d);v.state===Ep?(v.state=$l,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete l[h]):+h<s&&(v.state=$l,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete l[h])}if(jp(function(){i.state===Dl&&(i.state=Ep,i.timer.restart(f,i.delay,i.time),f(m))}),i.state=Mu,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Mu){for(i.state=Dl,a=new Array(b=i.tween.length),h=0,y=-1;h<b;++h)(v=i.tween[h].value.call(e,e.__data__,i.index,i.group))&&(a[++y]=v);a.length=y+1}}function f(m){for(var h=m<i.duration?i.ease.call(null,m/i.duration):(i.timer.restart(x),i.state=_u,1),y=-1,b=a.length;++y<b;)a[y].call(e,h);i.state===_u&&(i.on.call("end",e,e.__data__,i.index,i.group),x())}function x(){i.state=$l,i.timer.stop(),delete l[s];for(var m in l)return;delete e.__transition}}function Ol(e,s){var i=e.__transition,l,a,u=!0,d;if(i){s=s==null?null:s+"";for(d in i){if((l=i[d]).name!==s){u=!1;continue}a=l.state>Mu&&l.state<_u,l.state=$l,l.timer.stop(),l.on.call(a?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete i[d]}u&&delete e.__transition}}function Qv(e){return this.each(function(){Ol(this,e)})}function Jv(e,s){var i,l;return function(){var a=Cn(this,e),u=a.tween;if(u!==i){l=i=u;for(var d=0,f=l.length;d<f;++d)if(l[d].name===s){l=l.slice(),l.splice(d,1);break}}a.tween=l}}function e2(e,s,i){var l,a;if(typeof i!="function")throw new Error;return function(){var u=Cn(this,e),d=u.tween;if(d!==l){a=(l=d).slice();for(var f={name:s,value:i},x=0,m=a.length;x<m;++x)if(a[x].name===s){a[x]=f;break}x===m&&a.push(f)}u.tween=a}}function t2(e,s){var i=this._id;if(e+="",arguments.length<2){for(var l=pn(this.node(),i).tween,a=0,u=l.length,d;a<u;++a)if((d=l[a]).name===e)return d.value;return null}return this.each((s==null?Jv:e2)(i,e,s))}function Ju(e,s,i){var l=e._id;return e.each(function(){var a=Cn(this,l);(a.value||(a.value={}))[s]=i.apply(this,arguments)}),function(a){return pn(a,l).value[s]}}function ch(e,s){var i;return(typeof s=="number"?pr:s instanceof Vi?bp:(i=Vi(s))?(s=i,bp):Lv)(e,s)}function n2(e){return function(){this.removeAttribute(e)}}function r2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function s2(e,s,i){var l,a=i+"",u;return function(){var d=this.getAttribute(e);return d===a?null:d===l?u:u=s(l=d,i)}}function i2(e,s,i){var l,a=i+"",u;return function(){var d=this.getAttributeNS(e.space,e.local);return d===a?null:d===l?u:u=s(l=d,i)}}function o2(e,s,i){var l,a,u;return function(){var d,f=i(this),x;return f==null?void this.removeAttribute(e):(d=this.getAttribute(e),x=f+"",d===x?null:d===l&&x===a?u:(a=x,u=s(l=d,f)))}}function l2(e,s,i){var l,a,u;return function(){var d,f=i(this),x;return f==null?void this.removeAttributeNS(e.space,e.local):(d=this.getAttributeNS(e.space,e.local),x=f+"",d===x?null:d===l&&x===a?u:(a=x,u=s(l=d,f)))}}function a2(e,s){var i=ia(e),l=i==="transform"?Fv:ch;return this.attrTween(e,typeof s=="function"?(i.local?l2:o2)(i,l,Ju(this,"attr."+e,s)):s==null?(i.local?r2:n2)(i):(i.local?i2:s2)(i,l,s))}function c2(e,s){return function(i){this.setAttribute(e,s.call(this,i))}}function u2(e,s){return function(i){this.setAttributeNS(e.space,e.local,s.call(this,i))}}function d2(e,s){var i,l;function a(){var u=s.apply(this,arguments);return u!==l&&(i=(l=u)&&u2(e,u)),i}return a._value=s,a}function f2(e,s){var i,l;function a(){var u=s.apply(this,arguments);return u!==l&&(i=(l=u)&&c2(e,u)),i}return a._value=s,a}function p2(e,s){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(s==null)return this.tween(i,null);if(typeof s!="function")throw new Error;var l=ia(e);return this.tween(i,(l.local?d2:f2)(l,s))}function m2(e,s){return function(){Qu(this,e).delay=+s.apply(this,arguments)}}function h2(e,s){return s=+s,function(){Qu(this,e).delay=s}}function x2(e){var s=this._id;return arguments.length?this.each((typeof e=="function"?m2:h2)(s,e)):pn(this.node(),s).delay}function g2(e,s){return function(){Cn(this,e).duration=+s.apply(this,arguments)}}function y2(e,s){return s=+s,function(){Cn(this,e).duration=s}}function b2(e){var s=this._id;return arguments.length?this.each((typeof e=="function"?g2:y2)(s,e)):pn(this.node(),s).duration}function v2(e,s){if(typeof s!="function")throw new Error;return function(){Cn(this,e).ease=s}}function w2(e){var s=this._id;return arguments.length?this.each(v2(s,e)):pn(this.node(),s).ease}function N2(e,s){return function(){var i=s.apply(this,arguments);if(typeof i!="function")throw new Error;Cn(this,e).ease=i}}function j2(e){if(typeof e!="function")throw new Error;return this.each(N2(this._id,e))}function S2(e){typeof e!="function"&&(e=Um(e));for(var s=this._groups,i=s.length,l=new Array(i),a=0;a<i;++a)for(var u=s[a],d=u.length,f=l[a]=[],x,m=0;m<d;++m)(x=u[m])&&e.call(x,x.__data__,m,u)&&f.push(x);return new Vn(l,this._parents,this._name,this._id)}function E2(e){if(e._id!==this._id)throw new Error;for(var s=this._groups,i=e._groups,l=s.length,a=i.length,u=Math.min(l,a),d=new Array(l),f=0;f<u;++f)for(var x=s[f],m=i[f],h=x.length,y=d[f]=new Array(h),b,v=0;v<h;++v)(b=x[v]||m[v])&&(y[v]=b);for(;f<l;++f)d[f]=s[f];return new Vn(d,this._parents,this._name,this._id)}function C2(e){return(e+"").trim().split(/^|\s+/).every(function(s){var i=s.indexOf(".");return i>=0&&(s=s.slice(0,i)),!s||s==="start"})}function k2(e,s,i){var l,a,u=C2(s)?Qu:Cn;return function(){var d=u(this,e),f=d.on;f!==l&&(a=(l=f).copy()).on(s,i),d.on=a}}function I2(e,s){var i=this._id;return arguments.length<2?pn(this.node(),i).on.on(e):this.each(k2(i,e,s))}function R2(e){return function(){var s=this.parentNode;for(var i in this.__transition)if(+i!==e)return;s&&s.removeChild(this)}}function M2(){return this.on("end.remove",R2(this._id))}function _2(e){var s=this._name,i=this._id;typeof e!="function"&&(e=Yu(e));for(var l=this._groups,a=l.length,u=new Array(a),d=0;d<a;++d)for(var f=l[d],x=f.length,m=u[d]=new Array(x),h,y,b=0;b<x;++b)(h=f[b])&&(y=e.call(h,h.__data__,b,f))&&("__data__"in h&&(y.__data__=h.__data__),m[b]=y,la(m[b],s,i,b,m,pn(h,i)));return new Vn(u,this._parents,s,i)}function z2(e){var s=this._name,i=this._id;typeof e!="function"&&(e=Fm(e));for(var l=this._groups,a=l.length,u=[],d=[],f=0;f<a;++f)for(var x=l[f],m=x.length,h,y=0;y<m;++y)if(h=x[y]){for(var b=e.call(h,h.__data__,y,x),v,j=pn(h,i),w=0,N=b.length;w<N;++w)(v=b[w])&&la(v,s,i,w,b,j);u.push(b),d.push(h)}return new Vn(u,d,s,i)}var P2=Ki.prototype.constructor;function A2(){return new P2(this._groups,this._parents)}function T2(e,s){var i,l,a;return function(){var u=Ds(this,e),d=(this.style.removeProperty(e),Ds(this,e));return u===d?null:u===i&&d===l?a:a=s(i=u,l=d)}}function uh(e){return function(){this.style.removeProperty(e)}}function L2(e,s,i){var l,a=i+"",u;return function(){var d=Ds(this,e);return d===a?null:d===l?u:u=s(l=d,i)}}function D2(e,s,i){var l,a,u;return function(){var d=Ds(this,e),f=i(this),x=f+"";return f==null&&(x=f=(this.style.removeProperty(e),Ds(this,e))),d===x?null:d===l&&x===a?u:(a=x,u=s(l=d,f))}}function $2(e,s){var i,l,a,u="style."+s,d="end."+u,f;return function(){var x=Cn(this,e),m=x.on,h=x.value[u]==null?f||(f=uh(s)):void 0;(m!==i||a!==h)&&(l=(i=m).copy()).on(d,a=h),x.on=l}}function O2(e,s,i){var l=(e+="")=="transform"?Ov:ch;return s==null?this.styleTween(e,T2(e,l)).on("end.style."+e,uh(e)):typeof s=="function"?this.styleTween(e,D2(e,l,Ju(this,"style."+e,s))).each($2(this._id,e)):this.styleTween(e,L2(e,l,s),i).on("end.style."+e,null)}function F2(e,s,i){return function(l){this.style.setProperty(e,s.call(this,l),i)}}function U2(e,s,i){var l,a;function u(){var d=s.apply(this,arguments);return d!==a&&(l=(a=d)&&F2(e,d,i)),l}return u._value=s,u}function W2(e,s,i){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(s==null)return this.tween(l,null);if(typeof s!="function")throw new Error;return this.tween(l,U2(e,s,i??""))}function B2(e){return function(){this.textContent=e}}function H2(e){return function(){var s=e(this);this.textContent=s??""}}function V2(e){return this.tween("text",typeof e=="function"?H2(Ju(this,"text",e)):B2(e==null?"":e+""))}function q2(e){return function(s){this.textContent=e.call(this,s)}}function X2(e){var s,i;function l(){var a=e.apply(this,arguments);return a!==i&&(s=(i=a)&&q2(a)),s}return l._value=e,l}function Y2(e){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,X2(e))}function G2(){for(var e=this._name,s=this._id,i=dh(),l=this._groups,a=l.length,u=0;u<a;++u)for(var d=l[u],f=d.length,x,m=0;m<f;++m)if(x=d[m]){var h=pn(x,s);la(x,e,i,m,d,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Vn(l,this._parents,e,i)}function Z2(){var e,s,i=this,l=i._id,a=i.size();return new Promise(function(u,d){var f={value:d},x={value:function(){--a===0&&u()}};i.each(function(){var m=Cn(this,l),h=m.on;h!==e&&(s=(e=h).copy(),s._.cancel.push(f),s._.interrupt.push(f),s._.end.push(x)),m.on=s}),a===0&&u()})}var K2=0;function Vn(e,s,i,l){this._groups=e,this._parents=s,this._name=i,this._id=l}function dh(){return++K2}var Wn=Ki.prototype;Vn.prototype={constructor:Vn,select:_2,selectAll:z2,selectChild:Wn.selectChild,selectChildren:Wn.selectChildren,filter:S2,merge:E2,selection:A2,transition:G2,call:Wn.call,nodes:Wn.nodes,node:Wn.node,size:Wn.size,empty:Wn.empty,each:Wn.each,on:I2,attr:a2,attrTween:p2,style:O2,styleTween:W2,text:V2,textTween:Y2,remove:M2,tween:t2,delay:x2,duration:b2,ease:w2,easeVarying:j2,end:Z2,[Symbol.iterator]:Wn[Symbol.iterator]};function Q2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var J2={time:null,delay:0,duration:250,ease:Q2};function ew(e,s){for(var i;!(i=e.__transition)||!(i=i[s]);)if(!(e=e.parentNode))throw new Error(`transition ${s} not found`);return i}function tw(e){var s,i;e instanceof Vn?(s=e._id,e=e._name):(s=dh(),(i=J2).time=Ku(),e=e==null?null:e+"");for(var l=this._groups,a=l.length,u=0;u<a;++u)for(var d=l[u],f=d.length,x,m=0;m<f;++m)(x=d[m])&&la(x,e,s,m,d,i||ew(x,s));return new Vn(l,this._parents,e,s)}Ki.prototype.interrupt=Qv;Ki.prototype.transition=tw;const kl=e=>()=>e;function nw(e,{sourceEvent:s,target:i,transform:l,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:a}})}function Hn(e,s,i){this.k=e,this.x=s,this.y=i}Hn.prototype={constructor:Hn,scale:function(e){return e===1?this:new Hn(this.k*e,this.x,this.y)},translate:function(e,s){return e===0&s===0?this:new Hn(this.k,this.x+this.k*e,this.y+this.k*s)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gr=new Hn(1,0,0);Hn.prototype;function du(e){e.stopImmediatePropagation()}function ki(e){e.preventDefault(),e.stopImmediatePropagation()}function rw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Cp(){return this.__zoom||gr}function iw(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ow(){return navigator.maxTouchPoints||"ontouchstart"in this}function lw(e,s,i){var l=e.invertX(s[0][0])-i[0][0],a=e.invertX(s[1][0])-i[1][0],u=e.invertY(s[0][1])-i[0][1],d=e.invertY(s[1][1])-i[1][1];return e.translate(a>l?(l+a)/2:Math.min(0,l)||Math.max(0,a),d>u?(u+d)/2:Math.min(0,u)||Math.max(0,d))}function aw(){var e=rw,s=sw,i=lw,l=iw,a=ow,u=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,x=Hv,m=sa("start","zoom","end"),h,y,b,v=500,j=150,w=0,N=10;function E(S){S.property("__zoom",Cp).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(a).on("touchstart.zoom",I).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(S,O,P,Y){var X=S.selection?S.selection():S;X.property("__zoom",Cp),S!==X?L(S,O,P,Y):X.interrupt().each(function(){D(this,arguments).event(Y).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},E.scaleBy=function(S,O,P,Y){E.scaleTo(S,function(){var X=this.__zoom.k,U=typeof O=="function"?O.apply(this,arguments):O;return X*U},P,Y)},E.scaleTo=function(S,O,P,Y){E.transform(S,function(){var X=s.apply(this,arguments),U=this.__zoom,q=P==null?_(X):typeof P=="function"?P.apply(this,arguments):P,A=U.invert(q),V=typeof O=="function"?O.apply(this,arguments):O;return i(M(z(U,V),q,A),X,d)},P,Y)},E.translateBy=function(S,O,P,Y){E.transform(S,function(){return i(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof P=="function"?P.apply(this,arguments):P),s.apply(this,arguments),d)},null,Y)},E.translateTo=function(S,O,P,Y,X){E.transform(S,function(){var U=s.apply(this,arguments),q=this.__zoom,A=Y==null?_(U):typeof Y=="function"?Y.apply(this,arguments):Y;return i(gr.translate(A[0],A[1]).scale(q.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof P=="function"?-P.apply(this,arguments):-P),U,d)},Y,X)};function z(S,O){return O=Math.max(u[0],Math.min(u[1],O)),O===S.k?S:new Hn(O,S.x,S.y)}function M(S,O,P){var Y=O[0]-P[0]*S.k,X=O[1]-P[1]*S.k;return Y===S.x&&X===S.y?S:new Hn(S.k,Y,X)}function _(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function L(S,O,P,Y){S.on("start.zoom",function(){D(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(Y).end()}).tween("zoom",function(){var X=this,U=arguments,q=D(X,U).event(Y),A=s.apply(X,U),V=P==null?_(A):typeof P=="function"?P.apply(X,U):P,K=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),re=X.__zoom,oe=typeof O=="function"?O.apply(X,U):O,ae=x(re.invert(V).concat(K/re.k),oe.invert(V).concat(K/oe.k));return function(J){if(J===1)J=oe;else{var ie=ae(J),pe=K/ie[2];J=new Hn(pe,V[0]-ie[0]*pe,V[1]-ie[1]*pe)}q.zoom(null,J)}})}function D(S,O,P){return!P&&S.__zooming||new R(S,O)}function R(S,O){this.that=S,this.args=O,this.active=0,this.sourceEvent=null,this.extent=s.apply(S,O),this.taps=0}R.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,O){return this.mouse&&S!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var O=un(this.that).datum();m.call(S,this.that,new nw(S,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:m}),O)}};function H(S,...O){if(!e.apply(this,arguments))return;var P=D(this,O).event(S),Y=this.__zoom,X=Math.max(u[0],Math.min(u[1],Y.k*Math.pow(2,l.apply(this,arguments)))),U=jn(S);if(P.wheel)(P.mouse[0][0]!==U[0]||P.mouse[0][1]!==U[1])&&(P.mouse[1]=Y.invert(P.mouse[0]=U)),clearTimeout(P.wheel);else{if(Y.k===X)return;P.mouse=[U,Y.invert(U)],Ol(this),P.start()}ki(S),P.wheel=setTimeout(q,j),P.zoom("mouse",i(M(z(Y,X),P.mouse[0],P.mouse[1]),P.extent,d));function q(){P.wheel=null,P.end()}}function k(S,...O){if(b||!e.apply(this,arguments))return;var P=S.currentTarget,Y=D(this,O,!0).event(S),X=un(S.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",K,!0),U=jn(S,P),q=S.clientX,A=S.clientY;Km(S.view),du(S),Y.mouse=[U,this.__zoom.invert(U)],Ol(this),Y.start();function V(re){if(ki(re),!Y.moved){var oe=re.clientX-q,ae=re.clientY-A;Y.moved=oe*oe+ae*ae>w}Y.event(re).zoom("mouse",i(M(Y.that.__zoom,Y.mouse[0]=jn(re,P),Y.mouse[1]),Y.extent,d))}function K(re){X.on("mousemove.zoom mouseup.zoom",null),Qm(re.view,Y.moved),ki(re),Y.event(re).end()}}function T(S,...O){if(e.apply(this,arguments)){var P=this.__zoom,Y=jn(S.changedTouches?S.changedTouches[0]:S,this),X=P.invert(Y),U=P.k*(S.shiftKey?.5:2),q=i(M(z(P,U),Y,X),s.apply(this,O),d);ki(S),f>0?un(this).transition().duration(f).call(L,q,Y,S):un(this).call(E.transform,q,Y,S)}}function I(S,...O){if(e.apply(this,arguments)){var P=S.touches,Y=P.length,X=D(this,O,S.changedTouches.length===Y).event(S),U,q,A,V;for(du(S),q=0;q<Y;++q)A=P[q],V=jn(A,this),V=[V,this.__zoom.invert(V),A.identifier],X.touch0?!X.touch1&&X.touch0[2]!==V[2]&&(X.touch1=V,X.taps=0):(X.touch0=V,U=!0,X.taps=1+!!h);h&&(h=clearTimeout(h)),U&&(X.taps<2&&(y=V[0],h=setTimeout(function(){h=null},v)),Ol(this),X.start())}}function $(S,...O){if(this.__zooming){var P=D(this,O).event(S),Y=S.changedTouches,X=Y.length,U,q,A,V;for(ki(S),U=0;U<X;++U)q=Y[U],A=jn(q,this),P.touch0&&P.touch0[2]===q.identifier?P.touch0[0]=A:P.touch1&&P.touch1[2]===q.identifier&&(P.touch1[0]=A);if(q=P.that.__zoom,P.touch1){var K=P.touch0[0],re=P.touch0[1],oe=P.touch1[0],ae=P.touch1[1],J=(J=oe[0]-K[0])*J+(J=oe[1]-K[1])*J,ie=(ie=ae[0]-re[0])*ie+(ie=ae[1]-re[1])*ie;q=z(q,Math.sqrt(J/ie)),A=[(K[0]+oe[0])/2,(K[1]+oe[1])/2],V=[(re[0]+ae[0])/2,(re[1]+ae[1])/2]}else if(P.touch0)A=P.touch0[0],V=P.touch0[1];else return;P.zoom("touch",i(M(q,A,V),P.extent,d))}}function W(S,...O){if(this.__zooming){var P=D(this,O).event(S),Y=S.changedTouches,X=Y.length,U,q;for(du(S),b&&clearTimeout(b),b=setTimeout(function(){b=null},v),U=0;U<X;++U)q=Y[U],P.touch0&&P.touch0[2]===q.identifier?delete P.touch0:P.touch1&&P.touch1[2]===q.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(q=jn(q,this),Math.hypot(y[0]-q[0],y[1]-q[1])<N)){var A=un(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return E.wheelDelta=function(S){return arguments.length?(l=typeof S=="function"?S:kl(+S),E):l},E.filter=function(S){return arguments.length?(e=typeof S=="function"?S:kl(!!S),E):e},E.touchable=function(S){return arguments.length?(a=typeof S=="function"?S:kl(!!S),E):a},E.extent=function(S){return arguments.length?(s=typeof S=="function"?S:kl([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),E):s},E.scaleExtent=function(S){return arguments.length?(u[0]=+S[0],u[1]=+S[1],E):[u[0],u[1]]},E.translateExtent=function(S){return arguments.length?(d[0][0]=+S[0][0],d[1][0]=+S[1][0],d[0][1]=+S[0][1],d[1][1]=+S[1][1],E):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},E.constrain=function(S){return arguments.length?(i=S,E):i},E.duration=function(S){return arguments.length?(f=+S,E):f},E.interpolate=function(S){return arguments.length?(x=S,E):x},E.on=function(){var S=m.on.apply(m,arguments);return S===m?E:S},E.clickDistance=function(S){return arguments.length?(w=(S=+S)*S,E):Math.sqrt(w)},E.tapDistance=function(S){return arguments.length?(N=+S,E):N},E}om();const aa=F.createContext(null),cw=aa.Provider,qn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,s)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?s.targetHandle:s.sourceHandle}", edge id: ${s.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},fh=qn.error001();function We(e,s){const i=F.useContext(aa);if(i===null)throw new Error(fh);return $m(i,e,s)}const ut=()=>{const e=F.useContext(aa);if(e===null)throw new Error(fh);return F.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},uw=e=>e.userSelectionActive?"none":"all";function Yl({position:e,children:s,className:i,style:l,...a}){const u=We(uw),d=`${e}`.split("-");return Q.createElement("div",{className:vt(["react-flow__panel",i,...d]),style:{...l,pointerEvents:u},...a},s)}function dw({proOptions:e,position:s="bottom-right"}){return e!=null&&e.hideAttribution?null:Q.createElement(Yl,{position:s,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},Q.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const fw=({x:e,y:s,label:i,labelStyle:l={},labelShowBg:a=!0,labelBgStyle:u={},labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:x,className:m,...h})=>{const y=F.useRef(null),[b,v]=F.useState({x:0,y:0,width:0,height:0}),j=vt(["react-flow__edge-textwrapper",m]);return F.useEffect(()=>{if(y.current){const w=y.current.getBBox();v({x:w.x,y:w.y,width:w.width,height:w.height})}},[i]),typeof i>"u"||!i?null:Q.createElement("g",{transform:`translate(${e-b.width/2} ${s-b.height/2})`,className:j,visibility:b.width?"visible":"hidden",...h},a&&Q.createElement("rect",{width:b.width+2*d[0],x:-d[0],y:-d[1],height:b.height+2*d[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),Q.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:y,style:l},i),x)};var pw=F.memo(fw);const ed=e=>({width:e.offsetWidth,height:e.offsetHeight}),Os=(e,s=0,i=1)=>Math.min(Math.max(e,s),i),td=(e={x:0,y:0},s)=>({x:Os(e.x,s[0][0],s[1][0]),y:Os(e.y,s[0][1],s[1][1])}),kp=(e,s,i)=>e<s?Os(Math.abs(e-s),1,50)/50:e>i?-Os(Math.abs(e-i),1,50)/50:0,ph=(e,s)=>{const i=kp(e.x,35,s.width-35)*20,l=kp(e.y,35,s.height-35)*20;return[i,l]},mh=e=>{var s;return((s=e.getRootNode)==null?void 0:s.call(e))||(window==null?void 0:window.document)},mw=(e,s)=>({x:Math.min(e.x,s.x),y:Math.min(e.y,s.y),x2:Math.max(e.x2,s.x2),y2:Math.max(e.y2,s.y2)}),nd=({x:e,y:s,width:i,height:l})=>({x:e,y:s,x2:e+i,y2:s+l}),hw=({x:e,y:s,x2:i,y2:l})=>({x:e,y:s,width:i-e,height:l-s}),Ip=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zu=(e,s)=>{const i=Math.max(0,Math.min(e.x+e.width,s.x+s.width)-Math.max(e.x,s.x)),l=Math.max(0,Math.min(e.y+e.height,s.y+s.height)-Math.max(e.y,s.y));return Math.ceil(i*l)},xw=e=>Zt(e.width)&&Zt(e.height)&&Zt(e.x)&&Zt(e.y),Zt=e=>!isNaN(e)&&isFinite(e),Ze=Symbol.for("internals"),hh=["Enter"," ","Escape"],gw=(e,s)=>{},yw=e=>"nativeEvent"in e;function Pu(e){var a,u;const s=yw(e)?e.nativeEvent:e,i=((u=(a=s.composedPath)==null?void 0:a.call(s))==null?void 0:u[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(i==null?void 0:i.nodeName)||(i==null?void 0:i.hasAttribute("contenteditable"))||!!(i!=null&&i.closest(".nokey"))}const xh=e=>"clientX"in e,yr=(e,s)=>{var u,d;const i=xh(e),l=i?e.clientX:(u=e.touches)==null?void 0:u[0].clientX,a=i?e.clientY:(d=e.touches)==null?void 0:d[0].clientY;return{x:l-((s==null?void 0:s.left)??0),y:a-((s==null?void 0:s.top)??0)}},Gl=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Ji=({id:e,path:s,labelX:i,labelY:l,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:b,interactionWidth:v=20})=>Q.createElement(Q.Fragment,null,Q.createElement("path",{id:e,style:h,d:s,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:b}),v&&Q.createElement("path",{d:s,fill:"none",strokeOpacity:0,strokeWidth:v,className:"react-flow__edge-interaction"}),a&&Zt(i)&&Zt(l)?Q.createElement(pw,{x:i,y:l,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m}):null);Ji.displayName="BaseEdge";function Ii(e,s,i){return i===void 0?i:l=>{const a=s().edges.find(u=>u.id===e);a&&i(l,{...a})}}function gh({sourceX:e,sourceY:s,targetX:i,targetY:l}){const a=Math.abs(i-e)/2,u=i<e?i+a:i-a,d=Math.abs(l-s)/2,f=l<s?l+d:l-d;return[u,f,a,d]}function yh({sourceX:e,sourceY:s,targetX:i,targetY:l,sourceControlX:a,sourceControlY:u,targetControlX:d,targetControlY:f}){const x=e*.125+a*.375+d*.375+i*.125,m=s*.125+u*.375+f*.375+l*.125,h=Math.abs(x-e),y=Math.abs(m-s);return[x,m,h,y]}var En;(function(e){e.Strict="strict",e.Loose="loose"})(En||(En={}));var Ur;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ur||(Ur={}));var Xi;(function(e){e.Partial="partial",e.Full="full"})(Xi||(Xi={}));var xr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(xr||(xr={}));var Zl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Zl||(Zl={}));var ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ne||(ne={}));function Rp({pos:e,x1:s,y1:i,x2:l,y2:a}){return e===ne.Left||e===ne.Right?[.5*(s+l),i]:[s,.5*(i+a)]}function bh({sourceX:e,sourceY:s,sourcePosition:i=ne.Bottom,targetX:l,targetY:a,targetPosition:u=ne.Top}){const[d,f]=Rp({pos:i,x1:e,y1:s,x2:l,y2:a}),[x,m]=Rp({pos:u,x1:l,y1:a,x2:e,y2:s}),[h,y,b,v]=yh({sourceX:e,sourceY:s,targetX:l,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:x,targetControlY:m});return[`M${e},${s} C${d},${f} ${x},${m} ${l},${a}`,h,y,b,v]}const rd=F.memo(({sourceX:e,sourceY:s,targetX:i,targetY:l,sourcePosition:a=ne.Bottom,targetPosition:u=ne.Top,label:d,labelStyle:f,labelShowBg:x,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:v,markerStart:j,interactionWidth:w})=>{const[N,E,z]=bh({sourceX:e,sourceY:s,sourcePosition:a,targetX:i,targetY:l,targetPosition:u});return Q.createElement(Ji,{path:N,labelX:E,labelY:z,label:d,labelStyle:f,labelShowBg:x,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:v,markerStart:j,interactionWidth:w})});rd.displayName="SimpleBezierEdge";const Mp={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}},bw=({source:e,sourcePosition:s=ne.Bottom,target:i})=>s===ne.Left||s===ne.Right?e.x<i.x?{x:1,y:0}:{x:-1,y:0}:e.y<i.y?{x:0,y:1}:{x:0,y:-1},_p=(e,s)=>Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2));function vw({source:e,sourcePosition:s=ne.Bottom,target:i,targetPosition:l=ne.Top,center:a,offset:u}){const d=Mp[s],f=Mp[l],x={x:e.x+d.x*u,y:e.y+d.y*u},m={x:i.x+f.x*u,y:i.y+f.y*u},h=bw({source:x,sourcePosition:s,target:m}),y=h.x!==0?"x":"y",b=h[y];let v=[],j,w;const N={x:0,y:0},E={x:0,y:0},[z,M,_,L]=gh({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});if(d[y]*f[y]===-1){j=a.x??z,w=a.y??M;const R=[{x:j,y:x.y},{x:j,y:m.y}],H=[{x:x.x,y:w},{x:m.x,y:w}];d[y]===b?v=y==="x"?R:H:v=y==="x"?H:R}else{const R=[{x:x.x,y:m.y}],H=[{x:m.x,y:x.y}];if(y==="x"?v=d.x===b?H:R:v=d.y===b?R:H,s===l){const W=Math.abs(e[y]-i[y]);if(W<=u){const S=Math.min(u-1,u-W);d[y]===b?N[y]=(x[y]>e[y]?-1:1)*S:E[y]=(m[y]>i[y]?-1:1)*S}}if(s!==l){const W=y==="x"?"y":"x",S=d[y]===f[W],O=x[W]>m[W],P=x[W]<m[W];(d[y]===1&&(!S&&O||S&&P)||d[y]!==1&&(!S&&P||S&&O))&&(v=y==="x"?R:H)}const k={x:x.x+N.x,y:x.y+N.y},T={x:m.x+E.x,y:m.y+E.y},I=Math.max(Math.abs(k.x-v[0].x),Math.abs(T.x-v[0].x)),$=Math.max(Math.abs(k.y-v[0].y),Math.abs(T.y-v[0].y));I>=$?(j=(k.x+T.x)/2,w=v[0].y):(j=v[0].x,w=(k.y+T.y)/2)}return[[e,{x:x.x+N.x,y:x.y+N.y},...v,{x:m.x+E.x,y:m.y+E.y},i],j,w,_,L]}function ww(e,s,i,l){const a=Math.min(_p(e,s)/2,_p(s,i)/2,l),{x:u,y:d}=s;if(e.x===u&&u===i.x||e.y===d&&d===i.y)return`L${u} ${d}`;if(e.y===d){const m=e.x<i.x?-1:1,h=e.y<i.y?1:-1;return`L ${u+a*m},${d}Q ${u},${d} ${u},${d+a*h}`}const f=e.x<i.x?1:-1,x=e.y<i.y?-1:1;return`L ${u},${d+a*x}Q ${u},${d} ${u+a*f},${d}`}function Au({sourceX:e,sourceY:s,sourcePosition:i=ne.Bottom,targetX:l,targetY:a,targetPosition:u=ne.Top,borderRadius:d=5,centerX:f,centerY:x,offset:m=20}){const[h,y,b,v,j]=vw({source:{x:e,y:s},sourcePosition:i,target:{x:l,y:a},targetPosition:u,center:{x:f,y:x},offset:m});return[h.reduce((N,E,z)=>{let M="";return z>0&&z<h.length-1?M=ww(h[z-1],E,h[z+1],d):M=`${z===0?"M":"L"}${E.x} ${E.y}`,N+=M,N},""),y,b,v,j]}const ca=F.memo(({sourceX:e,sourceY:s,targetX:i,targetY:l,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m,style:h,sourcePosition:y=ne.Bottom,targetPosition:b=ne.Top,markerEnd:v,markerStart:j,pathOptions:w,interactionWidth:N})=>{const[E,z,M]=Au({sourceX:e,sourceY:s,sourcePosition:y,targetX:i,targetY:l,targetPosition:b,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return Q.createElement(Ji,{path:E,labelX:z,labelY:M,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m,style:h,markerEnd:v,markerStart:j,interactionWidth:N})});ca.displayName="SmoothStepEdge";const sd=F.memo(e=>{var s;return Q.createElement(ca,{...e,pathOptions:F.useMemo(()=>{var i;return{borderRadius:0,offset:(i=e.pathOptions)==null?void 0:i.offset}},[(s=e.pathOptions)==null?void 0:s.offset])})});sd.displayName="StepEdge";function Nw({sourceX:e,sourceY:s,targetX:i,targetY:l}){const[a,u,d,f]=gh({sourceX:e,sourceY:s,targetX:i,targetY:l});return[`M ${e},${s}L ${i},${l}`,a,u,d,f]}const id=F.memo(({sourceX:e,sourceY:s,targetX:i,targetY:l,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:b,interactionWidth:v})=>{const[j,w,N]=Nw({sourceX:e,sourceY:s,targetX:i,targetY:l});return Q.createElement(Ji,{path:j,labelX:w,labelY:N,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:b,interactionWidth:v})});id.displayName="StraightEdge";function Il(e,s){return e>=0?.5*e:s*25*Math.sqrt(-e)}function zp({pos:e,x1:s,y1:i,x2:l,y2:a,c:u}){switch(e){case ne.Left:return[s-Il(s-l,u),i];case ne.Right:return[s+Il(l-s,u),i];case ne.Top:return[s,i-Il(i-a,u)];case ne.Bottom:return[s,i+Il(a-i,u)]}}function vh({sourceX:e,sourceY:s,sourcePosition:i=ne.Bottom,targetX:l,targetY:a,targetPosition:u=ne.Top,curvature:d=.25}){const[f,x]=zp({pos:i,x1:e,y1:s,x2:l,y2:a,c:d}),[m,h]=zp({pos:u,x1:l,y1:a,x2:e,y2:s,c:d}),[y,b,v,j]=yh({sourceX:e,sourceY:s,targetX:l,targetY:a,sourceControlX:f,sourceControlY:x,targetControlX:m,targetControlY:h});return[`M${e},${s} C${f},${x} ${m},${h} ${l},${a}`,y,b,v,j]}const Kl=F.memo(({sourceX:e,sourceY:s,targetX:i,targetY:l,sourcePosition:a=ne.Bottom,targetPosition:u=ne.Top,label:d,labelStyle:f,labelShowBg:x,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:v,markerStart:j,pathOptions:w,interactionWidth:N})=>{const[E,z,M]=vh({sourceX:e,sourceY:s,sourcePosition:a,targetX:i,targetY:l,targetPosition:u,curvature:w==null?void 0:w.curvature});return Q.createElement(Ji,{path:E,labelX:z,labelY:M,label:d,labelStyle:f,labelShowBg:x,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:v,markerStart:j,interactionWidth:N})});Kl.displayName="BezierEdge";const od=F.createContext(null),jw=od.Provider;od.Consumer;const Sw=()=>F.useContext(od),Ew=e=>"id"in e&&"source"in e&&"target"in e,Cw=({source:e,sourceHandle:s,target:i,targetHandle:l})=>`reactflow__edge-${e}${s||""}-${i}${l||""}`,Tu=(e,s)=>typeof e>"u"?"":typeof e=="string"?e:`${s?`${s}__`:""}${Object.keys(e).sort().map(l=>`${l}=${e[l]}`).join("&")}`,kw=(e,s)=>s.some(i=>i.source===e.source&&i.target===e.target&&(i.sourceHandle===e.sourceHandle||!i.sourceHandle&&!e.sourceHandle)&&(i.targetHandle===e.targetHandle||!i.targetHandle&&!e.targetHandle)),Iw=(e,s)=>{if(!e.source||!e.target)return s;let i;return Ew(e)?i={...e}:i={...e,id:Cw(e)},kw(i,s)?s:s.concat(i)},Lu=({x:e,y:s},[i,l,a],u,[d,f])=>{const x={x:(e-i)/a,y:(s-l)/a};return u?{x:d*Math.round(x.x/d),y:f*Math.round(x.y/f)}:x},wh=({x:e,y:s},[i,l,a])=>({x:e*a+i,y:s*a+l}),As=(e,s=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const i=(e.width??0)*s[0],l=(e.height??0)*s[1],a={x:e.position.x-i,y:e.position.y-l};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-i,y:e.positionAbsolute.y-l}:a}},ld=(e,s=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const i=e.reduce((l,a)=>{const{x:u,y:d}=As(a,s).positionAbsolute;return mw(l,nd({x:u,y:d,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return hw(i)},Nh=(e,s,[i,l,a]=[0,0,1],u=!1,d=!1,f=[0,0])=>{const x={x:(s.x-i)/a,y:(s.y-l)/a,width:s.width/a,height:s.height/a},m=[];return e.forEach(h=>{const{width:y,height:b,selectable:v=!0,hidden:j=!1}=h;if(d&&!v||j)return!1;const{positionAbsolute:w}=As(h,f),N={x:w.x,y:w.y,width:y||0,height:b||0},E=zu(x,N),z=typeof y>"u"||typeof b>"u"||y===null||b===null,M=u&&E>0,_=(y||0)*(b||0);(z||M||E>=_||h.dragging)&&m.push(h)}),m},jh=(e,s)=>{const i=e.map(l=>l.id);return s.filter(l=>i.includes(l.source)||i.includes(l.target))},Sh=(e,s,i,l,a,u=.1)=>{const d=s/(e.width*(1+u)),f=i/(e.height*(1+u)),x=Math.min(d,f),m=Os(x,l,a),h=e.x+e.width/2,y=e.y+e.height/2,b=s/2-h*m,v=i/2-y*m;return{x:b,y:v,zoom:m}},$r=(e,s=0)=>e.transition().duration(s);function Pp(e,s,i,l){return(s[i]||[]).reduce((a,u)=>{var d,f;return`${e.id}-${u.id}-${i}`!==l&&a.push({id:u.id||null,type:i,nodeId:e.id,x:(((d=e.positionAbsolute)==null?void 0:d.x)??0)+u.x+u.width/2,y:(((f=e.positionAbsolute)==null?void 0:f.y)??0)+u.y+u.height/2}),a},[])}function Rw(e,s,i,l,a,u){const{x:d,y:f}=yr(e),m=s.elementsFromPoint(d,f).find(j=>j.classList.contains("react-flow__handle"));if(m){const j=m.getAttribute("data-nodeid");if(j){const w=ad(void 0,m),N=m.getAttribute("data-handleid"),E=u({nodeId:j,id:N,type:w});if(E){const z=a.find(M=>M.nodeId===j&&M.type===w&&M.id===N);return{handle:{id:N,type:w,nodeId:j,x:(z==null?void 0:z.x)||i.x,y:(z==null?void 0:z.y)||i.y},validHandleResult:E}}}}let h=[],y=1/0;if(a.forEach(j=>{const w=Math.sqrt((j.x-i.x)**2+(j.y-i.y)**2);if(w<=l){const N=u(j);w<=y&&(w<y?h=[{handle:j,validHandleResult:N}]:w===y&&h.push({handle:j,validHandleResult:N}),y=w)}}),!h.length)return{handle:null,validHandleResult:Eh()};if(h.length===1)return h[0];const b=h.some(({validHandleResult:j})=>j.isValid),v=h.some(({handle:j})=>j.type==="target");return h.find(({handle:j,validHandleResult:w})=>v?j.type==="target":b?w.isValid:!0)||h[0]}const Mw={source:null,target:null,sourceHandle:null,targetHandle:null},Eh=()=>({handleDomNode:null,isValid:!1,connection:Mw,endHandle:null});function Ch(e,s,i,l,a,u,d){const f=a==="target",x=d.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),m={...Eh(),handleDomNode:x};if(x){const h=ad(void 0,x),y=x.getAttribute("data-nodeid"),b=x.getAttribute("data-handleid"),v=x.classList.contains("connectable"),j=x.classList.contains("connectableend"),w={source:f?y:i,sourceHandle:f?b:l,target:f?i:y,targetHandle:f?l:b};m.connection=w,v&&j&&(s===En.Strict?f&&h==="source"||!f&&h==="target":y!==i||b!==l)&&(m.endHandle={nodeId:y,handleId:b,type:h},m.isValid=u(w))}return m}function _w({nodes:e,nodeId:s,handleId:i,handleType:l}){return e.reduce((a,u)=>{if(u[Ze]){const{handleBounds:d}=u[Ze];let f=[],x=[];d&&(f=Pp(u,d,"source",`${s}-${i}-${l}`),x=Pp(u,d,"target",`${s}-${i}-${l}`)),a.push(...f,...x)}return a},[])}function ad(e,s){return e||(s!=null&&s.classList.contains("target")?"target":s!=null&&s.classList.contains("source")?"source":null)}function fu(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function zw(e,s){let i=null;return s?i="valid":e&&!s&&(i="invalid"),i}function kh({event:e,handleId:s,nodeId:i,onConnect:l,isTarget:a,getState:u,setState:d,isValidConnection:f,edgeUpdaterType:x,onReconnectEnd:m}){const h=mh(e.target),{connectionMode:y,domNode:b,autoPanOnConnect:v,connectionRadius:j,onConnectStart:w,panBy:N,getNodes:E,cancelConnection:z}=u();let M=0,_;const{x:L,y:D}=yr(e),R=h==null?void 0:h.elementFromPoint(L,D),H=ad(x,R),k=b==null?void 0:b.getBoundingClientRect();if(!k||!H)return;let T,I=yr(e,k),$=!1,W=null,S=!1,O=null;const P=_w({nodes:E(),nodeId:i,handleId:s,handleType:H}),Y=()=>{if(!v)return;const[q,A]=ph(I,k);N({x:q,y:A}),M=requestAnimationFrame(Y)};d({connectionPosition:I,connectionStatus:null,connectionNodeId:i,connectionHandleId:s,connectionHandleType:H,connectionStartHandle:{nodeId:i,handleId:s,type:H},connectionEndHandle:null}),w==null||w(e,{nodeId:i,handleId:s,handleType:H});function X(q){const{transform:A}=u();I=yr(q,k);const{handle:V,validHandleResult:K}=Rw(q,h,Lu(I,A,!1,[1,1]),j,P,re=>Ch(re,y,i,s,a?"target":"source",f,h));if(_=V,$||(Y(),$=!0),O=K.handleDomNode,W=K.connection,S=K.isValid,d({connectionPosition:_&&S?wh({x:_.x,y:_.y},A):I,connectionStatus:zw(!!_,S),connectionEndHandle:K.endHandle}),!_&&!S&&!O)return fu(T);W.source!==W.target&&O&&(fu(T),T=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",S),O.classList.toggle("react-flow__handle-valid",S))}function U(q){var A,V;(_||O)&&W&&S&&(l==null||l(W)),(V=(A=u()).onConnectEnd)==null||V.call(A,q),x&&(m==null||m(q)),fu(T),z(),cancelAnimationFrame(M),$=!1,S=!1,W=null,O=null,h.removeEventListener("mousemove",X),h.removeEventListener("mouseup",U),h.removeEventListener("touchmove",X),h.removeEventListener("touchend",U)}h.addEventListener("mousemove",X),h.addEventListener("mouseup",U),h.addEventListener("touchmove",X),h.addEventListener("touchend",U)}const Ap=()=>!0,Pw=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Aw=(e,s,i)=>l=>{const{connectionStartHandle:a,connectionEndHandle:u,connectionClickStartHandle:d}=l;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===s&&(a==null?void 0:a.type)===i||(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.handleId)===s&&(u==null?void 0:u.type)===i,clickConnecting:(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.handleId)===s&&(d==null?void 0:d.type)===i}},Ih=F.forwardRef(({type:e="source",position:s=ne.Top,isValidConnection:i,isConnectable:l=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:d,onConnect:f,children:x,className:m,onMouseDown:h,onTouchStart:y,...b},v)=>{var k,T;const j=d||null,w=e==="target",N=ut(),E=Sw(),{connectOnClick:z,noPanClassName:M}=We(Pw,ct),{connecting:_,clickConnecting:L}=We(Aw(E,j,e),ct);E||(T=(k=N.getState()).onError)==null||T.call(k,"010",qn.error010());const D=I=>{const{defaultEdgeOptions:$,onConnect:W,hasDefaultEdges:S}=N.getState(),O={...$,...I};if(S){const{edges:P,setEdges:Y}=N.getState();Y(Iw(O,P))}W==null||W(O),f==null||f(O)},R=I=>{if(!E)return;const $=xh(I);a&&($&&I.button===0||!$)&&kh({event:I,handleId:j,nodeId:E,onConnect:D,isTarget:w,getState:N.getState,setState:N.setState,isValidConnection:i||N.getState().isValidConnection||Ap}),$?h==null||h(I):y==null||y(I)},H=I=>{const{onClickConnectStart:$,onClickConnectEnd:W,connectionClickStartHandle:S,connectionMode:O,isValidConnection:P}=N.getState();if(!E||!S&&!a)return;if(!S){$==null||$(I,{nodeId:E,handleId:j,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:E,type:e,handleId:j}});return}const Y=mh(I.target),X=i||P||Ap,{connection:U,isValid:q}=Ch({nodeId:E,id:j,type:e},O,S.nodeId,S.handleId||null,S.type,X,Y);q&&D(U),W==null||W(I),N.setState({connectionClickStartHandle:null})};return Q.createElement("div",{"data-handleid":j,"data-nodeid":E,"data-handlepos":s,"data-id":`${E}-${j}-${e}`,className:vt(["react-flow__handle",`react-flow__handle-${s}`,"nodrag",M,m,{source:!w,target:w,connectable:l,connectablestart:a,connectableend:u,connecting:L,connectionindicator:l&&(a&&!_||u&&_)}]),onMouseDown:R,onTouchStart:R,onClick:z?H:void 0,ref:v,...b},x)});Ih.displayName="Handle";var ue=F.memo(Ih);const Rh=({data:e,isConnectable:s,targetPosition:i=ne.Top,sourcePosition:l=ne.Bottom})=>Q.createElement(Q.Fragment,null,Q.createElement(ue,{type:"target",position:i,isConnectable:s}),e==null?void 0:e.label,Q.createElement(ue,{type:"source",position:l,isConnectable:s}));Rh.displayName="DefaultNode";var Du=F.memo(Rh);const Mh=({data:e,isConnectable:s,sourcePosition:i=ne.Bottom})=>Q.createElement(Q.Fragment,null,e==null?void 0:e.label,Q.createElement(ue,{type:"source",position:i,isConnectable:s}));Mh.displayName="InputNode";var _h=F.memo(Mh);const zh=({data:e,isConnectable:s,targetPosition:i=ne.Top})=>Q.createElement(Q.Fragment,null,Q.createElement(ue,{type:"target",position:i,isConnectable:s}),e==null?void 0:e.label);zh.displayName="OutputNode";var Ph=F.memo(zh);const cd=()=>null;cd.displayName="GroupNode";const Tw=e=>({selectedNodes:e.getNodes().filter(s=>s.selected),selectedEdges:e.edges.filter(s=>s.selected).map(s=>({...s}))}),Rl=e=>e.id;function Lw(e,s){return ct(e.selectedNodes.map(Rl),s.selectedNodes.map(Rl))&&ct(e.selectedEdges.map(Rl),s.selectedEdges.map(Rl))}const Ah=F.memo(({onSelectionChange:e})=>{const s=ut(),{selectedNodes:i,selectedEdges:l}=We(Tw,Lw);return F.useEffect(()=>{const a={nodes:i,edges:l};e==null||e(a),s.getState().onSelectionChange.forEach(u=>u(a))},[i,l,e]),null});Ah.displayName="SelectionListener";const Dw=e=>!!e.onSelectionChange;function $w({onSelectionChange:e}){const s=We(Dw);return e||s?Q.createElement(Ah,{onSelectionChange:e}):null}const Ow=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function ws(e,s){F.useEffect(()=>{typeof e<"u"&&s(e)},[e])}function ze(e,s,i){F.useEffect(()=>{typeof s<"u"&&i({[e]:s})},[s])}const Fw=({nodes:e,edges:s,defaultNodes:i,defaultEdges:l,onConnect:a,onConnectStart:u,onConnectEnd:d,onClickConnectStart:f,onClickConnectEnd:x,nodesDraggable:m,nodesConnectable:h,nodesFocusable:y,edgesFocusable:b,edgesUpdatable:v,elevateNodesOnSelect:j,minZoom:w,maxZoom:N,nodeExtent:E,onNodesChange:z,onEdgesChange:M,elementsSelectable:_,connectionMode:L,snapGrid:D,snapToGrid:R,translateExtent:H,connectOnClick:k,defaultEdgeOptions:T,fitView:I,fitViewOptions:$,onNodesDelete:W,onEdgesDelete:S,onNodeDrag:O,onNodeDragStart:P,onNodeDragStop:Y,onSelectionDrag:X,onSelectionDragStart:U,onSelectionDragStop:q,noPanClassName:A,nodeOrigin:V,rfId:K,autoPanOnConnect:re,autoPanOnNodeDrag:oe,onError:ae,connectionRadius:J,isValidConnection:ie,nodeDragThreshold:pe})=>{const{setNodes:ce,setEdges:je,setDefaultNodesAndEdges:ke,setMinZoom:Re,setMaxZoom:De,setTranslateExtent:$e,setNodeExtent:st,reset:Pe}=We(Ow,ct),xe=ut();return F.useEffect(()=>{const Qe=l==null?void 0:l.map(gt=>({...gt,...T}));return ke(i,Qe),()=>{Pe()}},[]),ze("defaultEdgeOptions",T,xe.setState),ze("connectionMode",L,xe.setState),ze("onConnect",a,xe.setState),ze("onConnectStart",u,xe.setState),ze("onConnectEnd",d,xe.setState),ze("onClickConnectStart",f,xe.setState),ze("onClickConnectEnd",x,xe.setState),ze("nodesDraggable",m,xe.setState),ze("nodesConnectable",h,xe.setState),ze("nodesFocusable",y,xe.setState),ze("edgesFocusable",b,xe.setState),ze("edgesUpdatable",v,xe.setState),ze("elementsSelectable",_,xe.setState),ze("elevateNodesOnSelect",j,xe.setState),ze("snapToGrid",R,xe.setState),ze("snapGrid",D,xe.setState),ze("onNodesChange",z,xe.setState),ze("onEdgesChange",M,xe.setState),ze("connectOnClick",k,xe.setState),ze("fitViewOnInit",I,xe.setState),ze("fitViewOnInitOptions",$,xe.setState),ze("onNodesDelete",W,xe.setState),ze("onEdgesDelete",S,xe.setState),ze("onNodeDrag",O,xe.setState),ze("onNodeDragStart",P,xe.setState),ze("onNodeDragStop",Y,xe.setState),ze("onSelectionDrag",X,xe.setState),ze("onSelectionDragStart",U,xe.setState),ze("onSelectionDragStop",q,xe.setState),ze("noPanClassName",A,xe.setState),ze("nodeOrigin",V,xe.setState),ze("rfId",K,xe.setState),ze("autoPanOnConnect",re,xe.setState),ze("autoPanOnNodeDrag",oe,xe.setState),ze("onError",ae,xe.setState),ze("connectionRadius",J,xe.setState),ze("isValidConnection",ie,xe.setState),ze("nodeDragThreshold",pe,xe.setState),ws(e,ce),ws(s,je),ws(w,Re),ws(N,De),ws(H,$e),ws(E,st),null},Tp={display:"none"},Uw={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Th="react-flow__node-desc",Lh="react-flow__edge-desc",Ww="react-flow__aria-live",Bw=e=>e.ariaLiveMessage;function Hw({rfId:e}){const s=We(Bw);return Q.createElement("div",{id:`${Ww}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Uw},s)}function Vw({rfId:e,disableKeyboardA11y:s}){return Q.createElement(Q.Fragment,null,Q.createElement("div",{id:`${Th}-${e}`,style:Tp},"Press enter or space to select a node.",!s&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),Q.createElement("div",{id:`${Lh}-${e}`,style:Tp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!s&&Q.createElement(Hw,{rfId:e}))}var Yi=(e=null,s={actInsideInputWithModifier:!0})=>{const[i,l]=F.useState(!1),a=F.useRef(!1),u=F.useRef(new Set([])),[d,f]=F.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.split("+")),h=m.reduce((y,b)=>y.concat(...b),[]);return[m,h]}return[[],[]]},[e]);return F.useEffect(()=>{const x=typeof document<"u"?document:null,m=(s==null?void 0:s.target)||x;if(e!==null){const h=v=>{if(a.current=v.ctrlKey||v.metaKey||v.shiftKey,(!a.current||a.current&&!s.actInsideInputWithModifier)&&Pu(v))return!1;const w=Dp(v.code,f);u.current.add(v[w]),Lp(d,u.current,!1)&&(v.preventDefault(),l(!0))},y=v=>{if((!a.current||a.current&&!s.actInsideInputWithModifier)&&Pu(v))return!1;const w=Dp(v.code,f);Lp(d,u.current,!0)?(l(!1),u.current.clear()):u.current.delete(v[w]),v.key==="Meta"&&u.current.clear(),a.current=!1},b=()=>{u.current.clear(),l(!1)};return m==null||m.addEventListener("keydown",h),m==null||m.addEventListener("keyup",y),window.addEventListener("blur",b),()=>{m==null||m.removeEventListener("keydown",h),m==null||m.removeEventListener("keyup",y),window.removeEventListener("blur",b)}}},[e,l]),i};function Lp(e,s,i){return e.filter(l=>i||l.length===s.size).some(l=>l.every(a=>s.has(a)))}function Dp(e,s){return s.includes(e)?"code":"key"}function Dh(e,s,i,l){var f,x;const a=e.parentNode||e.parentId;if(!a)return i;const u=s.get(a),d=As(u,l);return Dh(u,s,{x:(i.x??0)+d.x,y:(i.y??0)+d.y,z:(((f=u[Ze])==null?void 0:f.z)??0)>(i.z??0)?((x=u[Ze])==null?void 0:x.z)??0:i.z??0},l)}function $h(e,s,i){e.forEach(l=>{var u;const a=l.parentNode||l.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||i!=null&&i[l.id]){const{x:d,y:f,z:x}=Dh(l,e,{...l.position,z:((u=l[Ze])==null?void 0:u.z)??0},s);l.positionAbsolute={x:d,y:f},l[Ze].z=x,i!=null&&i[l.id]&&(l[Ze].isParent=!0)}})}function pu(e,s,i,l){const a=new Map,u={},d=l?1e3:0;return e.forEach(f=>{var v;const x=(Zt(f.zIndex)?f.zIndex:0)+(f.selected?d:0),m=s.get(f.id),h={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},y=f.parentNode||f.parentId;y&&(u[y]=!0);const b=(m==null?void 0:m.type)&&(m==null?void 0:m.type)!==f.type;Object.defineProperty(h,Ze,{enumerable:!1,value:{handleBounds:b||(v=m==null?void 0:m[Ze])==null?void 0:v.handleBounds,z:x}}),a.set(f.id,h)}),$h(a,i,u),a}function Oh(e,s={}){const{getNodes:i,width:l,height:a,minZoom:u,maxZoom:d,d3Zoom:f,d3Selection:x,fitViewOnInitDone:m,fitViewOnInit:h,nodeOrigin:y}=e(),b=s.initial&&!m&&h;if(f&&x&&(b||!s.initial)){const j=i().filter(N=>{var z;const E=s.includeHiddenNodes?N.width&&N.height:!N.hidden;return(z=s.nodes)!=null&&z.length?E&&s.nodes.some(M=>M.id===N.id):E}),w=j.every(N=>N.width&&N.height);if(j.length>0&&w){const N=ld(j,y),{x:E,y:z,zoom:M}=Sh(N,l,a,s.minZoom??u,s.maxZoom??d,s.padding??.1),_=gr.translate(E,z).scale(M);return typeof s.duration=="number"&&s.duration>0?f.transform($r(x,s.duration),_):f.transform(x,_),!0}}return!1}function qw(e,s){return e.forEach(i=>{const l=s.get(i.id);l&&s.set(l.id,{...l,[Ze]:l[Ze],selected:i.selected})}),new Map(s)}function Xw(e,s){return s.map(i=>{const l=e.find(a=>a.id===i.id);return l&&(i.selected=l.selected),i})}function Ml({changedNodes:e,changedEdges:s,get:i,set:l}){const{nodeInternals:a,edges:u,onNodesChange:d,onEdgesChange:f,hasDefaultNodes:x,hasDefaultEdges:m}=i();e!=null&&e.length&&(x&&l({nodeInternals:qw(e,a)}),d==null||d(e)),s!=null&&s.length&&(m&&l({edges:Xw(s,u)}),f==null||f(s))}const Ns=()=>{},Yw={zoomIn:Ns,zoomOut:Ns,zoomTo:Ns,getZoom:()=>1,setViewport:Ns,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ns,fitBounds:Ns,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Gw=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Zw=()=>{const e=ut(),{d3Zoom:s,d3Selection:i}=We(Gw,ct);return F.useMemo(()=>i&&s?{zoomIn:a=>s.scaleBy($r(i,a==null?void 0:a.duration),1.2),zoomOut:a=>s.scaleBy($r(i,a==null?void 0:a.duration),1/1.2),zoomTo:(a,u)=>s.scaleTo($r(i,u==null?void 0:u.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,u)=>{const[d,f,x]=e.getState().transform,m=gr.translate(a.x??d,a.y??f).scale(a.zoom??x);s.transform($r(i,u==null?void 0:u.duration),m)},getViewport:()=>{const[a,u,d]=e.getState().transform;return{x:a,y:u,zoom:d}},fitView:a=>Oh(e.getState,a),setCenter:(a,u,d)=>{const{width:f,height:x,maxZoom:m}=e.getState(),h=typeof(d==null?void 0:d.zoom)<"u"?d.zoom:m,y=f/2-a*h,b=x/2-u*h,v=gr.translate(y,b).scale(h);s.transform($r(i,d==null?void 0:d.duration),v)},fitBounds:(a,u)=>{const{width:d,height:f,minZoom:x,maxZoom:m}=e.getState(),{x:h,y,zoom:b}=Sh(a,d,f,x,m,(u==null?void 0:u.padding)??.1),v=gr.translate(h,y).scale(b);s.transform($r(i,u==null?void 0:u.duration),v)},project:a=>{const{transform:u,snapToGrid:d,snapGrid:f}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Lu(a,u,d,f)},screenToFlowPosition:a=>{const{transform:u,snapToGrid:d,snapGrid:f,domNode:x}=e.getState();if(!x)return a;const{x:m,y:h}=x.getBoundingClientRect(),y={x:a.x-m,y:a.y-h};return Lu(y,u,d,f)},flowToScreenPosition:a=>{const{transform:u,domNode:d}=e.getState();if(!d)return a;const{x:f,y:x}=d.getBoundingClientRect(),m=wh(a,u);return{x:m.x+f,y:m.y+x}},viewportInitialized:!0}:Yw,[s,i])};function ua(){const e=Zw(),s=ut(),i=F.useCallback(()=>s.getState().getNodes().map(w=>({...w})),[]),l=F.useCallback(w=>s.getState().nodeInternals.get(w),[]),a=F.useCallback(()=>{const{edges:w=[]}=s.getState();return w.map(N=>({...N}))},[]),u=F.useCallback(w=>{const{edges:N=[]}=s.getState();return N.find(E=>E.id===w)},[]),d=F.useCallback(w=>{const{getNodes:N,setNodes:E,hasDefaultNodes:z,onNodesChange:M}=s.getState(),_=N(),L=typeof w=="function"?w(_):w;if(z)E(L);else if(M){const D=L.length===0?_.map(R=>({type:"remove",id:R.id})):L.map(R=>({item:R,type:"reset"}));M(D)}},[]),f=F.useCallback(w=>{const{edges:N=[],setEdges:E,hasDefaultEdges:z,onEdgesChange:M}=s.getState(),_=typeof w=="function"?w(N):w;if(z)E(_);else if(M){const L=_.length===0?N.map(D=>({type:"remove",id:D.id})):_.map(D=>({item:D,type:"reset"}));M(L)}},[]),x=F.useCallback(w=>{const N=Array.isArray(w)?w:[w],{getNodes:E,setNodes:z,hasDefaultNodes:M,onNodesChange:_}=s.getState();if(M){const D=[...E(),...N];z(D)}else if(_){const L=N.map(D=>({item:D,type:"add"}));_(L)}},[]),m=F.useCallback(w=>{const N=Array.isArray(w)?w:[w],{edges:E=[],setEdges:z,hasDefaultEdges:M,onEdgesChange:_}=s.getState();if(M)z([...E,...N]);else if(_){const L=N.map(D=>({item:D,type:"add"}));_(L)}},[]),h=F.useCallback(()=>{const{getNodes:w,edges:N=[],transform:E}=s.getState(),[z,M,_]=E;return{nodes:w().map(L=>({...L})),edges:N.map(L=>({...L})),viewport:{x:z,y:M,zoom:_}}},[]),y=F.useCallback(({nodes:w,edges:N})=>{const{nodeInternals:E,getNodes:z,edges:M,hasDefaultNodes:_,hasDefaultEdges:L,onNodesDelete:D,onEdgesDelete:R,onNodesChange:H,onEdgesChange:k}=s.getState(),T=(w||[]).map(O=>O.id),I=(N||[]).map(O=>O.id),$=z().reduce((O,P)=>{const Y=P.parentNode||P.parentId,X=!T.includes(P.id)&&Y&&O.find(q=>q.id===Y);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(T.includes(P.id)||X)&&O.push(P),O},[]),W=M.filter(O=>typeof O.deletable=="boolean"?O.deletable:!0),S=W.filter(O=>I.includes(O.id));if($||S){const O=jh($,W),P=[...S,...O],Y=P.reduce((X,U)=>(X.includes(U.id)||X.push(U.id),X),[]);if((L||_)&&(L&&s.setState({edges:M.filter(X=>!Y.includes(X.id))}),_&&($.forEach(X=>{E.delete(X.id)}),s.setState({nodeInternals:new Map(E)}))),Y.length>0&&(R==null||R(P),k&&k(Y.map(X=>({id:X,type:"remove"})))),$.length>0&&(D==null||D($),H)){const X=$.map(U=>({id:U.id,type:"remove"}));H(X)}}},[]),b=F.useCallback(w=>{const N=xw(w),E=N?null:s.getState().nodeInternals.get(w.id);return!N&&!E?[null,null,N]:[N?w:Ip(E),E,N]},[]),v=F.useCallback((w,N=!0,E)=>{const[z,M,_]=b(w);return z?(E||s.getState().getNodes()).filter(L=>{if(!_&&(L.id===M.id||!L.positionAbsolute))return!1;const D=Ip(L),R=zu(D,z);return N&&R>0||R>=z.width*z.height}):[]},[]),j=F.useCallback((w,N,E=!0)=>{const[z]=b(w);if(!z)return!1;const M=zu(z,N);return E&&M>0||M>=z.width*z.height},[]);return F.useMemo(()=>({...e,getNodes:i,getNode:l,getEdges:a,getEdge:u,setNodes:d,setEdges:f,addNodes:x,addEdges:m,toObject:h,deleteElements:y,getIntersectingNodes:v,isNodeIntersecting:j}),[e,i,l,a,u,d,f,x,m,h,y,v,j])}const Kw={actInsideInputWithModifier:!1};var Qw=({deleteKeyCode:e,multiSelectionKeyCode:s})=>{const i=ut(),{deleteElements:l}=ua(),a=Yi(e,Kw),u=Yi(s);F.useEffect(()=>{if(a){const{edges:d,getNodes:f}=i.getState(),x=f().filter(h=>h.selected),m=d.filter(h=>h.selected);l({nodes:x,edges:m}),i.setState({nodesSelectionActive:!1})}},[a]),F.useEffect(()=>{i.setState({multiSelectionActive:u})},[u])};function Jw(e){const s=ut();F.useEffect(()=>{let i;const l=()=>{var u,d;if(!e.current)return;const a=ed(e.current);(a.height===0||a.width===0)&&((d=(u=s.getState()).onError)==null||d.call(u,"004",qn.error004())),s.setState({width:a.width||500,height:a.height||500})};return l(),window.addEventListener("resize",l),e.current&&(i=new ResizeObserver(()=>l()),i.observe(e.current)),()=>{window.removeEventListener("resize",l),i&&e.current&&i.unobserve(e.current)}},[])}const ud={position:"absolute",width:"100%",height:"100%",top:0,left:0},eN=(e,s)=>e.x!==s.x||e.y!==s.y||e.zoom!==s.k,_l=e=>({x:e.x,y:e.y,zoom:e.k}),js=(e,s)=>e.target.closest(`.${s}`),$p=(e,s)=>s===2&&Array.isArray(e)&&e.includes(2),Op=e=>{const s=e.ctrlKey&&Gl()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*s},tN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),nN=({onMove:e,onMoveStart:s,onMoveEnd:i,onPaneContextMenu:l,zoomOnScroll:a=!0,zoomOnPinch:u=!0,panOnScroll:d=!1,panOnScrollSpeed:f=.5,panOnScrollMode:x=Ur.Free,zoomOnDoubleClick:m=!0,elementsSelectable:h,panOnDrag:y=!0,defaultViewport:b,translateExtent:v,minZoom:j,maxZoom:w,zoomActivationKeyCode:N,preventScrolling:E=!0,children:z,noWheelClassName:M,noPanClassName:_})=>{const L=F.useRef(),D=ut(),R=F.useRef(!1),H=F.useRef(!1),k=F.useRef(null),T=F.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:$,d3ZoomHandler:W,userSelectionActive:S}=We(tN,ct),O=Yi(N),P=F.useRef(0),Y=F.useRef(!1),X=F.useRef();return Jw(k),F.useEffect(()=>{if(k.current){const U=k.current.getBoundingClientRect(),q=aw().scaleExtent([j,w]).translateExtent(v),A=un(k.current).call(q),V=gr.translate(b.x,b.y).scale(Os(b.zoom,j,w)),K=[[0,0],[U.width,U.height]],re=q.constrain()(V,K,v);q.transform(A,re),q.wheelDelta(Op),D.setState({d3Zoom:q,d3Selection:A,d3ZoomHandler:A.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:k.current.closest(".react-flow")})}},[]),F.useEffect(()=>{$&&I&&(d&&!O&&!S?$.on("wheel.zoom",U=>{if(js(U,M))return!1;U.preventDefault(),U.stopImmediatePropagation();const q=$.property("__zoom").k||1;if(U.ctrlKey&&u){const ie=jn(U),pe=Op(U),ce=q*Math.pow(2,pe);I.scaleTo($,ce,ie,U);return}const A=U.deltaMode===1?20:1;let V=x===Ur.Vertical?0:U.deltaX*A,K=x===Ur.Horizontal?0:U.deltaY*A;!Gl()&&U.shiftKey&&x!==Ur.Vertical&&(V=U.deltaY*A,K=0),I.translateBy($,-(V/q)*f,-(K/q)*f,{internal:!0});const re=_l($.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:ae,onViewportChangeEnd:J}=D.getState();clearTimeout(X.current),Y.current||(Y.current=!0,s==null||s(U,re),oe==null||oe(re)),Y.current&&(e==null||e(U,re),ae==null||ae(re),X.current=setTimeout(()=>{i==null||i(U,re),J==null||J(re),Y.current=!1},150))},{passive:!1}):typeof W<"u"&&$.on("wheel.zoom",function(U,q){if(!E&&U.type==="wheel"&&!U.ctrlKey||js(U,M))return null;U.preventDefault(),W.call(this,U,q)},{passive:!1}))},[S,d,x,$,I,W,O,u,E,M,s,e,i]),F.useEffect(()=>{I&&I.on("start",U=>{var V,K;if(!U.sourceEvent||U.sourceEvent.internal)return null;P.current=(V=U.sourceEvent)==null?void 0:V.button;const{onViewportChangeStart:q}=D.getState(),A=_l(U.transform);R.current=!0,T.current=A,((K=U.sourceEvent)==null?void 0:K.type)==="mousedown"&&D.setState({paneDragging:!0}),q==null||q(A),s==null||s(U.sourceEvent,A)})},[I,s]),F.useEffect(()=>{I&&(S&&!R.current?I.on("zoom",null):S||I.on("zoom",U=>{var A;const{onViewportChange:q}=D.getState();if(D.setState({transform:[U.transform.x,U.transform.y,U.transform.k]}),H.current=!!(l&&$p(y,P.current??0)),(e||q)&&!((A=U.sourceEvent)!=null&&A.internal)){const V=_l(U.transform);q==null||q(V),e==null||e(U.sourceEvent,V)}}))},[S,I,e,y,l]),F.useEffect(()=>{I&&I.on("end",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;const{onViewportChangeEnd:q}=D.getState();if(R.current=!1,D.setState({paneDragging:!1}),l&&$p(y,P.current??0)&&!H.current&&l(U.sourceEvent),H.current=!1,(i||q)&&eN(T.current,U.transform)){const A=_l(U.transform);T.current=A,clearTimeout(L.current),L.current=setTimeout(()=>{q==null||q(A),i==null||i(U.sourceEvent,A)},d?150:0)}})},[I,d,y,i,l]),F.useEffect(()=>{I&&I.filter(U=>{const q=O||a,A=u&&U.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&U.button===1&&U.type==="mousedown"&&(js(U,"react-flow__node")||js(U,"react-flow__edge")))return!0;if(!y&&!q&&!d&&!m&&!u||S||!m&&U.type==="dblclick"||js(U,M)&&U.type==="wheel"||js(U,_)&&(U.type!=="wheel"||d&&U.type==="wheel"&&!O)||!u&&U.ctrlKey&&U.type==="wheel"||!q&&!d&&!A&&U.type==="wheel"||!y&&(U.type==="mousedown"||U.type==="touchstart")||Array.isArray(y)&&!y.includes(U.button)&&U.type==="mousedown")return!1;const V=Array.isArray(y)&&y.includes(U.button)||!U.button||U.button<=1;return(!U.ctrlKey||U.type==="wheel")&&V})},[S,I,a,u,d,m,y,h,O]),Q.createElement("div",{className:"react-flow__renderer",ref:k,style:ud},z)},rN=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function sN(){const{userSelectionActive:e,userSelectionRect:s}=We(rN,ct);return e&&s?Q.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}}):null}function Fp(e,s){const i=s.parentNode||s.parentId,l=e.find(a=>a.id===i);if(l){const a=s.position.x+s.width-l.width,u=s.position.y+s.height-l.height;if(a>0||u>0||s.position.x<0||s.position.y<0){if(l.style={...l.style},l.style.width=l.style.width??l.width,l.style.height=l.style.height??l.height,a>0&&(l.style.width+=a),u>0&&(l.style.height+=u),s.position.x<0){const d=Math.abs(s.position.x);l.position.x=l.position.x-d,l.style.width+=d,s.position.x=0}if(s.position.y<0){const d=Math.abs(s.position.y);l.position.y=l.position.y-d,l.style.height+=d,s.position.y=0}l.width=l.style.width,l.height=l.style.height}}}function Fh(e,s){if(e.some(l=>l.type==="reset"))return e.filter(l=>l.type==="reset").map(l=>l.item);const i=e.filter(l=>l.type==="add").map(l=>l.item);return s.reduce((l,a)=>{const u=e.filter(f=>f.id===a.id);if(u.length===0)return l.push(a),l;const d={...a};for(const f of u)if(f)switch(f.type){case"select":{d.selected=f.selected;break}case"position":{typeof f.position<"u"&&(d.position=f.position),typeof f.positionAbsolute<"u"&&(d.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(d.dragging=f.dragging),d.expandParent&&Fp(l,d);break}case"dimensions":{typeof f.dimensions<"u"&&(d.width=f.dimensions.width,d.height=f.dimensions.height),typeof f.updateStyle<"u"&&(d.style={...d.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(d.resizing=f.resizing),d.expandParent&&Fp(l,d);break}case"remove":return l}return l.push(d),l},i)}function Uh(e,s){return Fh(e,s)}function iN(e,s){return Fh(e,s)}const mr=(e,s)=>({id:e,type:"select",selected:s});function Is(e,s){return e.reduce((i,l)=>{const a=s.includes(l.id);return!l.selected&&a?(l.selected=!0,i.push(mr(l.id,!0))):l.selected&&!a&&(l.selected=!1,i.push(mr(l.id,!1))),i},[])}const mu=(e,s)=>i=>{i.target===s.current&&(e==null||e(i))},oN=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Wh=F.memo(({isSelecting:e,selectionMode:s=Xi.Full,panOnDrag:i,onSelectionStart:l,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:d,onPaneScroll:f,onPaneMouseEnter:x,onPaneMouseMove:m,onPaneMouseLeave:h,children:y})=>{const b=F.useRef(null),v=ut(),j=F.useRef(0),w=F.useRef(0),N=F.useRef(),{userSelectionActive:E,elementsSelectable:z,dragging:M}=We(oN,ct),_=()=>{v.setState({userSelectionActive:!1,userSelectionRect:null}),j.current=0,w.current=0},L=W=>{u==null||u(W),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},D=W=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){W.preventDefault();return}d==null||d(W)},R=f?W=>f(W):void 0,H=W=>{const{resetSelectedElements:S,domNode:O}=v.getState();if(N.current=O==null?void 0:O.getBoundingClientRect(),!z||!e||W.button!==0||W.target!==b.current||!N.current)return;const{x:P,y:Y}=yr(W,N.current);S(),v.setState({userSelectionRect:{width:0,height:0,startX:P,startY:Y,x:P,y:Y}}),l==null||l(W)},k=W=>{const{userSelectionRect:S,nodeInternals:O,edges:P,transform:Y,onNodesChange:X,onEdgesChange:U,nodeOrigin:q,getNodes:A}=v.getState();if(!e||!N.current||!S)return;v.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=yr(W,N.current),K=S.startX??0,re=S.startY??0,oe={...S,x:V.x<K?V.x:K,y:V.y<re?V.y:re,width:Math.abs(V.x-K),height:Math.abs(V.y-re)},ae=A(),J=Nh(O,oe,Y,s===Xi.Partial,!0,q),ie=jh(J,P).map(ce=>ce.id),pe=J.map(ce=>ce.id);if(j.current!==pe.length){j.current=pe.length;const ce=Is(ae,pe);ce.length&&(X==null||X(ce))}if(w.current!==ie.length){w.current=ie.length;const ce=Is(P,ie);ce.length&&(U==null||U(ce))}v.setState({userSelectionRect:oe})},T=W=>{if(W.button!==0)return;const{userSelectionRect:S}=v.getState();!E&&S&&W.target===b.current&&(L==null||L(W)),v.setState({nodesSelectionActive:j.current>0}),_(),a==null||a(W)},I=W=>{E&&(v.setState({nodesSelectionActive:j.current>0}),a==null||a(W)),_()},$=z&&(e||E);return Q.createElement("div",{className:vt(["react-flow__pane",{dragging:M,selection:e}]),onClick:$?void 0:mu(L,b),onContextMenu:mu(D,b),onWheel:mu(R,b),onMouseEnter:$?void 0:x,onMouseDown:$?H:void 0,onMouseMove:$?k:m,onMouseUp:$?T:void 0,onMouseLeave:$?I:h,ref:b,style:ud},y,Q.createElement(sN,null))});Wh.displayName="Pane";function Bh(e,s){const i=e.parentNode||e.parentId;if(!i)return!1;const l=s.get(i);return l?l.selected?!0:Bh(l,s):!1}function Up(e,s,i){let l=e;do{if(l!=null&&l.matches(s))return!0;if(l===i.current)return!1;l=l.parentElement}while(l);return!1}function lN(e,s,i,l){return Array.from(e.values()).filter(a=>(a.selected||a.id===l)&&(!a.parentNode||a.parentId||!Bh(a,e))&&(a.draggable||s&&typeof a.draggable>"u")).map(a=>{var u,d;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:i.x-(((u=a.positionAbsolute)==null?void 0:u.x)??0),y:i.y-(((d=a.positionAbsolute)==null?void 0:d.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function aN(e,s){return!s||s==="parent"?s:[s[0],[s[1][0]-(e.width||0),s[1][1]-(e.height||0)]]}function Hh(e,s,i,l,a=[0,0],u){const d=aN(e,e.extent||l);let f=d;const x=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(x&&e.width&&e.height){const y=i.get(x),{x:b,y:v}=As(y,a).positionAbsolute;f=y&&Zt(b)&&Zt(v)&&Zt(y.width)&&Zt(y.height)?[[b+e.width*a[0],v+e.height*a[1]],[b+y.width-e.width+e.width*a[0],v+y.height-e.height+e.height*a[1]]]:f}else u==null||u("005",qn.error005()),f=d;else if(e.extent&&x&&e.extent!=="parent"){const y=i.get(x),{x:b,y:v}=As(y,a).positionAbsolute;f=[[e.extent[0][0]+b,e.extent[0][1]+v],[e.extent[1][0]+b,e.extent[1][1]+v]]}let m={x:0,y:0};if(x){const y=i.get(x);m=As(y,a).positionAbsolute}const h=f&&f!=="parent"?td(s,f):s;return{position:{x:h.x-m.x,y:h.y-m.y},positionAbsolute:h}}function hu({nodeId:e,dragItems:s,nodeInternals:i}){const l=s.map(a=>({...i.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?l.find(a=>a.id===e):l[0],l]}const Wp=(e,s,i,l)=>{const a=s.querySelectorAll(e);if(!a||!a.length)return null;const u=Array.from(a),d=s.getBoundingClientRect(),f={x:d.width*l[0],y:d.height*l[1]};return u.map(x=>{const m=x.getBoundingClientRect();return{id:x.getAttribute("data-handleid"),position:x.getAttribute("data-handlepos"),x:(m.left-d.left-f.x)/i,y:(m.top-d.top-f.y)/i,...ed(x)}})};function Ri(e,s,i){return i===void 0?i:l=>{const a=s().nodeInternals.get(e);a&&i(l,{...a})}}function $u({id:e,store:s,unselect:i=!1,nodeRef:l}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:d,nodeInternals:f,onError:x}=s.getState(),m=f.get(e);if(!m){x==null||x("012",qn.error012(e));return}s.setState({nodesSelectionActive:!1}),m.selected?(i||m.selected&&d)&&(u({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var h;return(h=l==null?void 0:l.current)==null?void 0:h.blur()})):a([e])}function cN(){const e=ut();return F.useCallback(({sourceEvent:i})=>{const{transform:l,snapGrid:a,snapToGrid:u}=e.getState(),d=i.touches?i.touches[0].clientX:i.clientX,f=i.touches?i.touches[0].clientY:i.clientY,x={x:(d-l[0])/l[2],y:(f-l[1])/l[2]};return{xSnapped:u?a[0]*Math.round(x.x/a[0]):x.x,ySnapped:u?a[1]*Math.round(x.y/a[1]):x.y,...x}},[])}function xu(e){return(s,i,l)=>e==null?void 0:e(s,l)}function Vh({nodeRef:e,disabled:s=!1,noDragClassName:i,handleSelector:l,nodeId:a,isSelectable:u,selectNodesOnDrag:d}){const f=ut(),[x,m]=F.useState(!1),h=F.useRef([]),y=F.useRef({x:null,y:null}),b=F.useRef(0),v=F.useRef(null),j=F.useRef({x:0,y:0}),w=F.useRef(null),N=F.useRef(!1),E=F.useRef(!1),z=F.useRef(!1),M=cN();return F.useEffect(()=>{if(e!=null&&e.current){const _=un(e.current),L=({x:H,y:k})=>{const{nodeInternals:T,onNodeDrag:I,onSelectionDrag:$,updateNodePositions:W,nodeExtent:S,snapGrid:O,snapToGrid:P,nodeOrigin:Y,onError:X}=f.getState();y.current={x:H,y:k};let U=!1,q={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&S){const V=ld(h.current,Y);q=nd(V)}if(h.current=h.current.map(V=>{const K={x:H-V.distance.x,y:k-V.distance.y};P&&(K.x=O[0]*Math.round(K.x/O[0]),K.y=O[1]*Math.round(K.y/O[1]));const re=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];h.current.length>1&&S&&!V.extent&&(re[0][0]=V.positionAbsolute.x-q.x+S[0][0],re[1][0]=V.positionAbsolute.x+(V.width??0)-q.x2+S[1][0],re[0][1]=V.positionAbsolute.y-q.y+S[0][1],re[1][1]=V.positionAbsolute.y+(V.height??0)-q.y2+S[1][1]);const oe=Hh(V,K,T,re,Y,X);return U=U||V.position.x!==oe.position.x||V.position.y!==oe.position.y,V.position=oe.position,V.positionAbsolute=oe.positionAbsolute,V}),!U)return;W(h.current,!0,!0),m(!0);const A=a?I:xu($);if(A&&w.current){const[V,K]=hu({nodeId:a,dragItems:h.current,nodeInternals:T});A(w.current,V,K)}},D=()=>{if(!v.current)return;const[H,k]=ph(j.current,v.current);if(H!==0||k!==0){const{transform:T,panBy:I}=f.getState();y.current.x=(y.current.x??0)-H/T[2],y.current.y=(y.current.y??0)-k/T[2],I({x:H,y:k})&&L(y.current)}b.current=requestAnimationFrame(D)},R=H=>{var Y;const{nodeInternals:k,multiSelectionActive:T,nodesDraggable:I,unselectNodesAndEdges:$,onNodeDragStart:W,onSelectionDragStart:S}=f.getState();E.current=!0;const O=a?W:xu(S);(!d||!u)&&!T&&a&&((Y=k.get(a))!=null&&Y.selected||$()),a&&u&&d&&$u({id:a,store:f,nodeRef:e});const P=M(H);if(y.current=P,h.current=lN(k,I,P,a),O&&h.current){const[X,U]=hu({nodeId:a,dragItems:h.current,nodeInternals:k});O(H.sourceEvent,X,U)}};if(s)_.on(".drag",null);else{const H=yv().on("start",k=>{const{domNode:T,nodeDragThreshold:I}=f.getState();I===0&&R(k),z.current=!1;const $=M(k);y.current=$,v.current=(T==null?void 0:T.getBoundingClientRect())||null,j.current=yr(k.sourceEvent,v.current)}).on("drag",k=>{var W,S;const T=M(k),{autoPanOnNodeDrag:I,nodeDragThreshold:$}=f.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(z.current=!0),!z.current){if(!N.current&&E.current&&I&&(N.current=!0,D()),!E.current){const O=T.xSnapped-(((W=y==null?void 0:y.current)==null?void 0:W.x)??0),P=T.ySnapped-(((S=y==null?void 0:y.current)==null?void 0:S.y)??0);Math.sqrt(O*O+P*P)>$&&R(k)}(y.current.x!==T.xSnapped||y.current.y!==T.ySnapped)&&h.current&&E.current&&(w.current=k.sourceEvent,j.current=yr(k.sourceEvent,v.current),L(T))}}).on("end",k=>{if(!(!E.current||z.current)&&(m(!1),N.current=!1,E.current=!1,cancelAnimationFrame(b.current),h.current)){const{updateNodePositions:T,nodeInternals:I,onNodeDragStop:$,onSelectionDragStop:W}=f.getState(),S=a?$:xu(W);if(T(h.current,!1,!1),S){const[O,P]=hu({nodeId:a,dragItems:h.current,nodeInternals:I});S(k.sourceEvent,O,P)}}}).filter(k=>{const T=k.target;return!k.button&&(!i||!Up(T,`.${i}`,e))&&(!l||Up(T,l,e))});return _.call(H),()=>{_.on(".drag",null)}}}},[e,s,i,l,u,f,a,d,M]),x}function qh(){const e=ut();return F.useCallback(i=>{const{nodeInternals:l,nodeExtent:a,updateNodePositions:u,getNodes:d,snapToGrid:f,snapGrid:x,onError:m,nodesDraggable:h}=e.getState(),y=d().filter(z=>z.selected&&(z.draggable||h&&typeof z.draggable>"u")),b=f?x[0]:5,v=f?x[1]:5,j=i.isShiftPressed?4:1,w=i.x*b*j,N=i.y*v*j,E=y.map(z=>{if(z.positionAbsolute){const M={x:z.positionAbsolute.x+w,y:z.positionAbsolute.y+N};f&&(M.x=x[0]*Math.round(M.x/x[0]),M.y=x[1]*Math.round(M.y/x[1]));const{positionAbsolute:_,position:L}=Hh(z,M,l,a,void 0,m);z.position=L,z.positionAbsolute=_}return z});u(E,!0,!1)},[])}const Ts={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Mi=e=>{const s=({id:i,type:l,data:a,xPos:u,yPos:d,xPosOrigin:f,yPosOrigin:x,selected:m,onClick:h,onMouseEnter:y,onMouseMove:b,onMouseLeave:v,onContextMenu:j,onDoubleClick:w,style:N,className:E,isDraggable:z,isSelectable:M,isConnectable:_,isFocusable:L,selectNodesOnDrag:D,sourcePosition:R,targetPosition:H,hidden:k,resizeObserver:T,dragHandle:I,zIndex:$,isParent:W,noDragClassName:S,noPanClassName:O,initialized:P,disableKeyboardA11y:Y,ariaLabel:X,rfId:U,hasHandleBounds:q})=>{const A=ut(),V=F.useRef(null),K=F.useRef(null),re=F.useRef(R),oe=F.useRef(H),ae=F.useRef(l),J=M||z||h||y||b||v,ie=qh(),pe=Ri(i,A.getState,y),ce=Ri(i,A.getState,b),je=Ri(i,A.getState,v),ke=Ri(i,A.getState,j),Re=Ri(i,A.getState,w),De=Pe=>{const{nodeDragThreshold:xe}=A.getState();if(M&&(!D||!z||xe>0)&&$u({id:i,store:A,nodeRef:V}),h){const Qe=A.getState().nodeInternals.get(i);Qe&&h(Pe,{...Qe})}},$e=Pe=>{if(!Pu(Pe)&&!Y)if(hh.includes(Pe.key)&&M){const xe=Pe.key==="Escape";$u({id:i,store:A,unselect:xe,nodeRef:V})}else z&&m&&Object.prototype.hasOwnProperty.call(Ts,Pe.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${Pe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~d}`}),ie({x:Ts[Pe.key].x,y:Ts[Pe.key].y,isShiftPressed:Pe.shiftKey}))};F.useEffect(()=>()=>{K.current&&(T==null||T.unobserve(K.current),K.current=null)},[]),F.useEffect(()=>{if(V.current&&!k){const Pe=V.current;(!P||!q||K.current!==Pe)&&(K.current&&(T==null||T.unobserve(K.current)),T==null||T.observe(Pe),K.current=Pe)}},[k,P,q]),F.useEffect(()=>{const Pe=ae.current!==l,xe=re.current!==R,Qe=oe.current!==H;V.current&&(Pe||xe||Qe)&&(Pe&&(ae.current=l),xe&&(re.current=R),Qe&&(oe.current=H),A.getState().updateNodeDimensions([{id:i,nodeElement:V.current,forceUpdate:!0}]))},[i,l,R,H]);const st=Vh({nodeRef:V,disabled:k||!z,noDragClassName:S,handleSelector:I,nodeId:i,isSelectable:M,selectNodesOnDrag:D});return k?null:Q.createElement("div",{className:vt(["react-flow__node",`react-flow__node-${l}`,{[O]:z},E,{selected:m,selectable:M,parent:W,dragging:st}]),ref:V,style:{zIndex:$,transform:`translate(${f}px,${x}px)`,pointerEvents:J?"all":"none",visibility:P?"visible":"hidden",...N},"data-id":i,"data-testid":`rf__node-${i}`,onMouseEnter:pe,onMouseMove:ce,onMouseLeave:je,onContextMenu:ke,onClick:De,onDoubleClick:Re,onKeyDown:L?$e:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":Y?void 0:`${Th}-${U}`,"aria-label":X},Q.createElement(jw,{value:i},Q.createElement(e,{id:i,data:a,type:l,xPos:u,yPos:d,selected:m,isConnectable:_,sourcePosition:R,targetPosition:H,dragging:st,dragHandle:I,zIndex:$})))};return s.displayName="NodeWrapper",F.memo(s)};const uN=e=>{const s=e.getNodes().filter(i=>i.selected);return{...ld(s,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function dN({onSelectionContextMenu:e,noPanClassName:s,disableKeyboardA11y:i}){const l=ut(),{width:a,height:u,x:d,y:f,transformString:x,userSelectionActive:m}=We(uN,ct),h=qh(),y=F.useRef(null);if(F.useEffect(()=>{var j;i||(j=y.current)==null||j.focus({preventScroll:!0})},[i]),Vh({nodeRef:y}),m||!a||!u)return null;const b=e?j=>{const w=l.getState().getNodes().filter(N=>N.selected);e(j,w)}:void 0,v=j=>{Object.prototype.hasOwnProperty.call(Ts,j.key)&&h({x:Ts[j.key].x,y:Ts[j.key].y,isShiftPressed:j.shiftKey})};return Q.createElement("div",{className:vt(["react-flow__nodesselection","react-flow__container",s]),style:{transform:x}},Q.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:i?void 0:-1,onKeyDown:i?void 0:v,style:{width:a,height:u,top:f,left:d}}))}var fN=F.memo(dN);const pN=e=>e.nodesSelectionActive,Xh=({children:e,onPaneClick:s,onPaneMouseEnter:i,onPaneMouseMove:l,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:d,deleteKeyCode:f,onMove:x,onMoveStart:m,onMoveEnd:h,selectionKeyCode:y,selectionOnDrag:b,selectionMode:v,onSelectionStart:j,onSelectionEnd:w,multiSelectionKeyCode:N,panActivationKeyCode:E,zoomActivationKeyCode:z,elementsSelectable:M,zoomOnScroll:_,zoomOnPinch:L,panOnScroll:D,panOnScrollSpeed:R,panOnScrollMode:H,zoomOnDoubleClick:k,panOnDrag:T,defaultViewport:I,translateExtent:$,minZoom:W,maxZoom:S,preventScrolling:O,onSelectionContextMenu:P,noWheelClassName:Y,noPanClassName:X,disableKeyboardA11y:U})=>{const q=We(pN),A=Yi(y),V=Yi(E),K=V||T,re=V||D,oe=A||b&&K!==!0;return Qw({deleteKeyCode:f,multiSelectionKeyCode:N}),Q.createElement(nN,{onMove:x,onMoveStart:m,onMoveEnd:h,onPaneContextMenu:u,elementsSelectable:M,zoomOnScroll:_,zoomOnPinch:L,panOnScroll:re,panOnScrollSpeed:R,panOnScrollMode:H,zoomOnDoubleClick:k,panOnDrag:!A&&K,defaultViewport:I,translateExtent:$,minZoom:W,maxZoom:S,zoomActivationKeyCode:z,preventScrolling:O,noWheelClassName:Y,noPanClassName:X},Q.createElement(Wh,{onSelectionStart:j,onSelectionEnd:w,onPaneClick:s,onPaneMouseEnter:i,onPaneMouseMove:l,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:d,panOnDrag:K,isSelecting:!!oe,selectionMode:v},e,q&&Q.createElement(fN,{onSelectionContextMenu:P,noPanClassName:X,disableKeyboardA11y:U})))};Xh.displayName="FlowRenderer";var mN=F.memo(Xh);function hN(e){return We(F.useCallback(i=>e?Nh(i.nodeInternals,{x:0,y:0,width:i.width,height:i.height},i.transform,!0):i.getNodes(),[e]))}function xN(e){const s={input:Mi(e.input||_h),default:Mi(e.default||Du),output:Mi(e.output||Ph),group:Mi(e.group||cd)},i={},l=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,u)=>(a[u]=Mi(e[u]||Du),a),i);return{...s,...l}}const gN=({x:e,y:s,width:i,height:l,origin:a})=>!i||!l?{x:e,y:s}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:s}:{x:e-i*a[0],y:s-l*a[1]},yN=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Yh=e=>{const{nodesDraggable:s,nodesConnectable:i,nodesFocusable:l,elementsSelectable:a,updateNodeDimensions:u,onError:d}=We(yN,ct),f=hN(e.onlyRenderVisibleElements),x=F.useRef(),m=F.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(y=>{const b=y.map(v=>({id:v.target.getAttribute("data-id"),nodeElement:v.target,forceUpdate:!0}));u(b)});return x.current=h,h},[]);return F.useEffect(()=>()=>{var h;(h=x==null?void 0:x.current)==null||h.disconnect()},[]),Q.createElement("div",{className:"react-flow__nodes",style:ud},f.map(h=>{var L,D,R;let y=h.type||"default";e.nodeTypes[y]||(d==null||d("003",qn.error003(y)),y="default");const b=e.nodeTypes[y]||e.nodeTypes.default,v=!!(h.draggable||s&&typeof h.draggable>"u"),j=!!(h.selectable||a&&typeof h.selectable>"u"),w=!!(h.connectable||i&&typeof h.connectable>"u"),N=!!(h.focusable||l&&typeof h.focusable>"u"),E=e.nodeExtent?td(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,z=(E==null?void 0:E.x)??0,M=(E==null?void 0:E.y)??0,_=gN({x:z,y:M,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return Q.createElement(b,{key:h.id,id:h.id,className:h.className,style:h.style,type:y,data:h.data,sourcePosition:h.sourcePosition||ne.Bottom,targetPosition:h.targetPosition||ne.Top,hidden:h.hidden,xPos:z,yPos:M,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:v,isSelectable:j,isConnectable:w,isFocusable:N,resizeObserver:m,dragHandle:h.dragHandle,zIndex:((L=h[Ze])==null?void 0:L.z)??0,isParent:!!((D=h[Ze])!=null&&D.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((R=h[Ze])!=null&&R.handleBounds)})}))};Yh.displayName="NodeRenderer";var bN=F.memo(Yh);const vN=(e,s,i)=>i===ne.Left?e-s:i===ne.Right?e+s:e,wN=(e,s,i)=>i===ne.Top?e-s:i===ne.Bottom?e+s:e,Bp="react-flow__edgeupdater",Hp=({position:e,centerX:s,centerY:i,radius:l=10,onMouseDown:a,onMouseEnter:u,onMouseOut:d,type:f})=>Q.createElement("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:d,className:vt([Bp,`${Bp}-${f}`]),cx:vN(s,l,e),cy:wN(i,l,e),r:l,stroke:"transparent",fill:"transparent"}),NN=()=>!0;var Ss=e=>{const s=({id:i,className:l,type:a,data:u,onClick:d,onEdgeDoubleClick:f,selected:x,animated:m,label:h,labelStyle:y,labelShowBg:b,labelBgStyle:v,labelBgPadding:j,labelBgBorderRadius:w,style:N,source:E,target:z,sourceX:M,sourceY:_,targetX:L,targetY:D,sourcePosition:R,targetPosition:H,elementsSelectable:k,hidden:T,sourceHandleId:I,targetHandleId:$,onContextMenu:W,onMouseEnter:S,onMouseMove:O,onMouseLeave:P,reconnectRadius:Y,onReconnect:X,onReconnectStart:U,onReconnectEnd:q,markerEnd:A,markerStart:V,rfId:K,ariaLabel:re,isFocusable:oe,isReconnectable:ae,pathOptions:J,interactionWidth:ie,disableKeyboardA11y:pe})=>{const ce=F.useRef(null),[je,ke]=F.useState(!1),[Re,De]=F.useState(!1),$e=ut(),st=F.useMemo(()=>`url('#${Tu(V,K)}')`,[V,K]),Pe=F.useMemo(()=>`url('#${Tu(A,K)}')`,[A,K]);if(T)return null;const xe=Xe=>{var wt;const{edges:zt,addSelectedEdges:hn,unselectNodesAndEdges:xn,multiSelectionActive:Rn}=$e.getState(),Pt=zt.find(Mn=>Mn.id===i);Pt&&(k&&($e.setState({nodesSelectionActive:!1}),Pt.selected&&Rn?(xn({nodes:[],edges:[Pt]}),(wt=ce.current)==null||wt.blur()):hn([i])),d&&d(Xe,Pt))},Qe=Ii(i,$e.getState,f),gt=Ii(i,$e.getState,W),it=Ii(i,$e.getState,S),_t=Ii(i,$e.getState,O),Qt=Ii(i,$e.getState,P),Wt=(Xe,zt)=>{if(Xe.button!==0)return;const{edges:hn,isValidConnection:xn}=$e.getState(),Rn=zt?z:E,Pt=(zt?$:I)||null,wt=zt?"target":"source",Mn=xn||NN,vr=zt,_n=hn.find(yn=>yn.id===i);De(!0),U==null||U(Xe,_n,wt);const gn=yn=>{De(!1),q==null||q(yn,_n,wt)};kh({event:Xe,handleId:Pt,nodeId:Rn,onConnect:yn=>X==null?void 0:X(_n,yn),isTarget:vr,getState:$e.getState,setState:$e.setState,isValidConnection:Mn,edgeUpdaterType:wt,onReconnectEnd:gn})},kn=Xe=>Wt(Xe,!0),mn=Xe=>Wt(Xe,!1),Jt=()=>ke(!0),en=()=>ke(!1),In=!k&&!d,tn=Xe=>{var zt;if(!pe&&hh.includes(Xe.key)&&k){const{unselectNodesAndEdges:hn,addSelectedEdges:xn,edges:Rn}=$e.getState();Xe.key==="Escape"?((zt=ce.current)==null||zt.blur(),hn({edges:[Rn.find(wt=>wt.id===i)]})):xn([i])}};return Q.createElement("g",{className:vt(["react-flow__edge",`react-flow__edge-${a}`,l,{selected:x,animated:m,inactive:In,updating:je}]),onClick:xe,onDoubleClick:Qe,onContextMenu:gt,onMouseEnter:it,onMouseMove:_t,onMouseLeave:Qt,onKeyDown:oe?tn:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${i}`,"aria-label":re===null?void 0:re||`Edge from ${E} to ${z}`,"aria-describedby":oe?`${Lh}-${K}`:void 0,ref:ce},!Re&&Q.createElement(e,{id:i,source:E,target:z,selected:x,animated:m,label:h,labelStyle:y,labelShowBg:b,labelBgStyle:v,labelBgPadding:j,labelBgBorderRadius:w,data:u,style:N,sourceX:M,sourceY:_,targetX:L,targetY:D,sourcePosition:R,targetPosition:H,sourceHandleId:I,targetHandleId:$,markerStart:st,markerEnd:Pe,pathOptions:J,interactionWidth:ie}),ae&&Q.createElement(Q.Fragment,null,(ae==="source"||ae===!0)&&Q.createElement(Hp,{position:R,centerX:M,centerY:_,radius:Y,onMouseDown:kn,onMouseEnter:Jt,onMouseOut:en,type:"source"}),(ae==="target"||ae===!0)&&Q.createElement(Hp,{position:H,centerX:L,centerY:D,radius:Y,onMouseDown:mn,onMouseEnter:Jt,onMouseOut:en,type:"target"})))};return s.displayName="EdgeWrapper",F.memo(s)};function jN(e){const s={default:Ss(e.default||Kl),straight:Ss(e.bezier||id),step:Ss(e.step||sd),smoothstep:Ss(e.step||ca),simplebezier:Ss(e.simplebezier||rd)},i={},l=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,u)=>(a[u]=Ss(e[u]||Kl),a),i);return{...s,...l}}function Vp(e,s,i=null){const l=((i==null?void 0:i.x)||0)+s.x,a=((i==null?void 0:i.y)||0)+s.y,u=(i==null?void 0:i.width)||s.width,d=(i==null?void 0:i.height)||s.height;switch(e){case ne.Top:return{x:l+u/2,y:a};case ne.Right:return{x:l+u,y:a+d/2};case ne.Bottom:return{x:l+u/2,y:a+d};case ne.Left:return{x:l,y:a+d/2}}}function qp(e,s){return e?e.length===1||!s?e[0]:s&&e.find(i=>i.id===s)||null:null}const SN=(e,s,i,l,a,u)=>{const d=Vp(i,e,s),f=Vp(u,l,a);return{sourceX:d.x,sourceY:d.y,targetX:f.x,targetY:f.y}};function EN({sourcePos:e,targetPos:s,sourceWidth:i,sourceHeight:l,targetWidth:a,targetHeight:u,width:d,height:f,transform:x}){const m={x:Math.min(e.x,s.x),y:Math.min(e.y,s.y),x2:Math.max(e.x+i,s.x+a),y2:Math.max(e.y+l,s.y+u)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const h=nd({x:(0-x[0])/x[2],y:(0-x[1])/x[2],width:d/x[2],height:f/x[2]}),y=Math.max(0,Math.min(h.x2,m.x2)-Math.max(h.x,m.x)),b=Math.max(0,Math.min(h.y2,m.y2)-Math.max(h.y,m.y));return Math.ceil(y*b)>0}function Xp(e){var l,a,u,d,f;const s=((l=e==null?void 0:e[Ze])==null?void 0:l.handleBounds)||null,i=s&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)<"u";return[{x:((d=e==null?void 0:e.positionAbsolute)==null?void 0:d.x)||0,y:((f=e==null?void 0:e.positionAbsolute)==null?void 0:f.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},s,!!i]}const CN=[{level:0,isMaxLevel:!0,edges:[]}];function kN(e,s,i=!1){let l=-1;const a=e.reduce((d,f)=>{var h,y;const x=Zt(f.zIndex);let m=x?f.zIndex:0;if(i){const b=s.get(f.target),v=s.get(f.source),j=f.selected||(b==null?void 0:b.selected)||(v==null?void 0:v.selected),w=Math.max(((h=v==null?void 0:v[Ze])==null?void 0:h.z)||0,((y=b==null?void 0:b[Ze])==null?void 0:y.z)||0,1e3);m=(x?f.zIndex:0)+(j?w:0)}return d[m]?d[m].push(f):d[m]=[f],l=m>l?m:l,d},{}),u=Object.entries(a).map(([d,f])=>{const x=+d;return{edges:f,level:x,isMaxLevel:x===l}});return u.length===0?CN:u}function IN(e,s,i){const l=We(F.useCallback(a=>e?a.edges.filter(u=>{const d=s.get(u.source),f=s.get(u.target);return(d==null?void 0:d.width)&&(d==null?void 0:d.height)&&(f==null?void 0:f.width)&&(f==null?void 0:f.height)&&EN({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:f.width,targetHeight:f.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,s]));return kN(l,s,i)}const RN=({color:e="none",strokeWidth:s=1})=>Q.createElement("polyline",{style:{stroke:e,strokeWidth:s},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),MN=({color:e="none",strokeWidth:s=1})=>Q.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:s},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Yp={[Zl.Arrow]:RN,[Zl.ArrowClosed]:MN};function _N(e){const s=ut();return F.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(Yp,e)?Yp[e]:((u=(a=s.getState()).onError)==null||u.call(a,"009",qn.error009(e)),null)},[e])}const zN=({id:e,type:s,color:i,width:l=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const x=_N(s);return x?Q.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${l}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0"},Q.createElement(x,{color:i,strokeWidth:d})):null},PN=({defaultColor:e,rfId:s})=>i=>{const l=[];return i.edges.reduce((a,u)=>([u.markerStart,u.markerEnd].forEach(d=>{if(d&&typeof d=="object"){const f=Tu(d,s);l.includes(f)||(a.push({id:f,color:d.color||e,...d}),l.push(f))}}),a),[]).sort((a,u)=>a.id.localeCompare(u.id))},Gh=({defaultColor:e,rfId:s})=>{const i=We(F.useCallback(PN({defaultColor:e,rfId:s}),[e,s]),(l,a)=>!(l.length!==a.length||l.some((u,d)=>u.id!==a[d].id)));return Q.createElement("defs",null,i.map(l=>Q.createElement(zN,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient})))};Gh.displayName="MarkerDefinitions";var AN=F.memo(Gh);const TN=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Zh=({defaultMarkerColor:e,onlyRenderVisibleElements:s,elevateEdgesOnSelect:i,rfId:l,edgeTypes:a,noPanClassName:u,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:x,onEdgeMouseLeave:m,onEdgeClick:h,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:v,onReconnectEnd:j,reconnectRadius:w,children:N,disableKeyboardA11y:E})=>{const{edgesFocusable:z,edgesUpdatable:M,elementsSelectable:_,width:L,height:D,connectionMode:R,nodeInternals:H,onError:k}=We(TN,ct),T=IN(s,H,i);return L?Q.createElement(Q.Fragment,null,T.map(({level:I,edges:$,isMaxLevel:W})=>Q.createElement("svg",{key:I,style:{zIndex:I},width:L,height:D,className:"react-flow__edges react-flow__container"},W&&Q.createElement(AN,{defaultColor:e,rfId:l}),Q.createElement("g",null,$.map(S=>{const[O,P,Y]=Xp(H.get(S.source)),[X,U,q]=Xp(H.get(S.target));if(!Y||!q)return null;let A=S.type||"default";a[A]||(k==null||k("011",qn.error011(A)),A="default");const V=a[A]||a.default,K=R===En.Strict?U.target:(U.target??[]).concat(U.source??[]),re=qp(P.source,S.sourceHandle),oe=qp(K,S.targetHandle),ae=(re==null?void 0:re.position)||ne.Bottom,J=(oe==null?void 0:oe.position)||ne.Top,ie=!!(S.focusable||z&&typeof S.focusable>"u"),pe=S.reconnectable||S.updatable,ce=typeof b<"u"&&(pe||M&&typeof pe>"u");if(!re||!oe)return k==null||k("008",qn.error008(re,S)),null;const{sourceX:je,sourceY:ke,targetX:Re,targetY:De}=SN(O,re,ae,X,oe,J);return Q.createElement(V,{key:S.id,id:S.id,className:vt([S.className,u]),type:A,data:S.data,selected:!!S.selected,animated:!!S.animated,hidden:!!S.hidden,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,style:S.style,source:S.source,target:S.target,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerEnd:S.markerEnd,markerStart:S.markerStart,sourceX:je,sourceY:ke,targetX:Re,targetY:De,sourcePosition:ae,targetPosition:J,elementsSelectable:_,onContextMenu:d,onMouseEnter:f,onMouseMove:x,onMouseLeave:m,onClick:h,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:v,onReconnectEnd:j,reconnectRadius:w,rfId:l,ariaLabel:S.ariaLabel,isFocusable:ie,isReconnectable:ce,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth,disableKeyboardA11y:E})})))),N):null};Zh.displayName="EdgeRenderer";var LN=F.memo(Zh);const DN=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function $N({children:e}){const s=We(DN);return Q.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:s}},e)}function ON(e){const s=ua(),i=F.useRef(!1);F.useEffect(()=>{!i.current&&s.viewportInitialized&&e&&(setTimeout(()=>e(s),1),i.current=!0)},[e,s.viewportInitialized])}const FN={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top},Kh=({nodeId:e,handleType:s,style:i,type:l=xr.Bezier,CustomComponent:a,connectionStatus:u})=>{var D,R,H;const{fromNode:d,handleId:f,toX:x,toY:m,connectionMode:h}=We(F.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),ct),y=(D=d==null?void 0:d[Ze])==null?void 0:D.handleBounds;let b=y==null?void 0:y[s];if(h===En.Loose&&(b=b||(y==null?void 0:y[s==="source"?"target":"source"])),!d||!b)return null;const v=f?b.find(k=>k.id===f):b[0],j=v?v.x+v.width/2:(d.width??0)/2,w=v?v.y+v.height/2:d.height??0,N=(((R=d.positionAbsolute)==null?void 0:R.x)??0)+j,E=(((H=d.positionAbsolute)==null?void 0:H.y)??0)+w,z=v==null?void 0:v.position,M=z?FN[z]:null;if(!z||!M)return null;if(a)return Q.createElement(a,{connectionLineType:l,connectionLineStyle:i,fromNode:d,fromHandle:v,fromX:N,fromY:E,toX:x,toY:m,fromPosition:z,toPosition:M,connectionStatus:u});let _="";const L={sourceX:N,sourceY:E,sourcePosition:z,targetX:x,targetY:m,targetPosition:M};return l===xr.Bezier?[_]=vh(L):l===xr.Step?[_]=Au({...L,borderRadius:0}):l===xr.SmoothStep?[_]=Au(L):l===xr.SimpleBezier?[_]=bh(L):_=`M${N},${E} ${x},${m}`,Q.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:i})};Kh.displayName="ConnectionLine";const UN=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function WN({containerStyle:e,style:s,type:i,component:l}){const{nodeId:a,handleType:u,nodesConnectable:d,width:f,height:x,connectionStatus:m}=We(UN,ct);return!(a&&u&&f&&d)?null:Q.createElement("svg",{style:e,width:f,height:x,className:"react-flow__edges react-flow__connectionline react-flow__container"},Q.createElement("g",{className:vt(["react-flow__connection",m])},Q.createElement(Kh,{nodeId:a,handleType:u,style:s,type:i,CustomComponent:l,connectionStatus:m})))}function Gp(e,s){return F.useRef(null),ut(),F.useMemo(()=>s(e),[e])}const Qh=({nodeTypes:e,edgeTypes:s,onMove:i,onMoveStart:l,onMoveEnd:a,onInit:u,onNodeClick:d,onEdgeClick:f,onNodeDoubleClick:x,onEdgeDoubleClick:m,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:v,onSelectionContextMenu:j,onSelectionStart:w,onSelectionEnd:N,connectionLineType:E,connectionLineStyle:z,connectionLineComponent:M,connectionLineContainerStyle:_,selectionKeyCode:L,selectionOnDrag:D,selectionMode:R,multiSelectionKeyCode:H,panActivationKeyCode:k,zoomActivationKeyCode:T,deleteKeyCode:I,onlyRenderVisibleElements:$,elementsSelectable:W,selectNodesOnDrag:S,defaultViewport:O,translateExtent:P,minZoom:Y,maxZoom:X,preventScrolling:U,defaultMarkerColor:q,zoomOnScroll:A,zoomOnPinch:V,panOnScroll:K,panOnScrollSpeed:re,panOnScrollMode:oe,zoomOnDoubleClick:ae,panOnDrag:J,onPaneClick:ie,onPaneMouseEnter:pe,onPaneMouseMove:ce,onPaneMouseLeave:je,onPaneScroll:ke,onPaneContextMenu:Re,onEdgeContextMenu:De,onEdgeMouseEnter:$e,onEdgeMouseMove:st,onEdgeMouseLeave:Pe,onReconnect:xe,onReconnectStart:Qe,onReconnectEnd:gt,reconnectRadius:it,noDragClassName:_t,noWheelClassName:Qt,noPanClassName:Wt,elevateEdgesOnSelect:kn,disableKeyboardA11y:mn,nodeOrigin:Jt,nodeExtent:en,rfId:In})=>{const tn=Gp(e,xN),Xe=Gp(s,jN);return ON(u),Q.createElement(mN,{onPaneClick:ie,onPaneMouseEnter:pe,onPaneMouseMove:ce,onPaneMouseLeave:je,onPaneContextMenu:Re,onPaneScroll:ke,deleteKeyCode:I,selectionKeyCode:L,selectionOnDrag:D,selectionMode:R,onSelectionStart:w,onSelectionEnd:N,multiSelectionKeyCode:H,panActivationKeyCode:k,zoomActivationKeyCode:T,elementsSelectable:W,onMove:i,onMoveStart:l,onMoveEnd:a,zoomOnScroll:A,zoomOnPinch:V,zoomOnDoubleClick:ae,panOnScroll:K,panOnScrollSpeed:re,panOnScrollMode:oe,panOnDrag:J,defaultViewport:O,translateExtent:P,minZoom:Y,maxZoom:X,onSelectionContextMenu:j,preventScrolling:U,noDragClassName:_t,noWheelClassName:Qt,noPanClassName:Wt,disableKeyboardA11y:mn},Q.createElement($N,null,Q.createElement(LN,{edgeTypes:Xe,onEdgeClick:f,onEdgeDoubleClick:m,onlyRenderVisibleElements:$,onEdgeContextMenu:De,onEdgeMouseEnter:$e,onEdgeMouseMove:st,onEdgeMouseLeave:Pe,onReconnect:xe,onReconnectStart:Qe,onReconnectEnd:gt,reconnectRadius:it,defaultMarkerColor:q,noPanClassName:Wt,elevateEdgesOnSelect:!!kn,disableKeyboardA11y:mn,rfId:In},Q.createElement(WN,{style:z,type:E,component:M,containerStyle:_})),Q.createElement("div",{className:"react-flow__edgelabel-renderer"}),Q.createElement(bN,{nodeTypes:tn,onNodeClick:d,onNodeDoubleClick:x,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:v,selectNodesOnDrag:S,onlyRenderVisibleElements:$,noPanClassName:Wt,noDragClassName:_t,disableKeyboardA11y:mn,nodeOrigin:Jt,nodeExtent:en,rfId:In})))};Qh.displayName="GraphView";var BN=F.memo(Qh);const Ou=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ou,nodeExtent:Ou,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:En.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:gw,isValidConnection:void 0},HN=()=>M1((e,s)=>({...fr,setNodes:i=>{const{nodeInternals:l,nodeOrigin:a,elevateNodesOnSelect:u}=s();e({nodeInternals:pu(i,l,a,u)})},getNodes:()=>Array.from(s().nodeInternals.values()),setEdges:i=>{const{defaultEdgeOptions:l={}}=s();e({edges:i.map(a=>({...l,...a}))})},setDefaultNodesAndEdges:(i,l)=>{const a=typeof i<"u",u=typeof l<"u",d=a?pu(i,new Map,s().nodeOrigin,s().elevateNodesOnSelect):new Map;e({nodeInternals:d,edges:u?l:[],hasDefaultNodes:a,hasDefaultEdges:u})},updateNodeDimensions:i=>{const{onNodesChange:l,nodeInternals:a,fitViewOnInit:u,fitViewOnInitDone:d,fitViewOnInitOptions:f,domNode:x,nodeOrigin:m}=s(),h=x==null?void 0:x.querySelector(".react-flow__viewport");if(!h)return;const y=window.getComputedStyle(h),{m22:b}=new window.DOMMatrixReadOnly(y.transform),v=i.reduce((w,N)=>{const E=a.get(N.id);if(E!=null&&E.hidden)a.set(E.id,{...E,[Ze]:{...E[Ze],handleBounds:void 0}});else if(E){const z=ed(N.nodeElement);!!(z.width&&z.height&&(E.width!==z.width||E.height!==z.height||N.forceUpdate))&&(a.set(E.id,{...E,[Ze]:{...E[Ze],handleBounds:{source:Wp(".source",N.nodeElement,b,m),target:Wp(".target",N.nodeElement,b,m)}},...z}),w.push({id:E.id,type:"dimensions",dimensions:z}))}return w},[]);$h(a,m);const j=d||u&&!d&&Oh(s,{initial:!0,...f});e({nodeInternals:new Map(a),fitViewOnInitDone:j}),(v==null?void 0:v.length)>0&&(l==null||l(v))},updateNodePositions:(i,l=!0,a=!1)=>{const{triggerNodeChanges:u}=s(),d=i.map(f=>{const x={id:f.id,type:"position",dragging:a};return l&&(x.positionAbsolute=f.positionAbsolute,x.position=f.position),x});u(d)},triggerNodeChanges:i=>{const{onNodesChange:l,nodeInternals:a,hasDefaultNodes:u,nodeOrigin:d,getNodes:f,elevateNodesOnSelect:x}=s();if(i!=null&&i.length){if(u){const m=Uh(i,f()),h=pu(m,a,d,x);e({nodeInternals:h})}l==null||l(i)}},addSelectedNodes:i=>{const{multiSelectionActive:l,edges:a,getNodes:u}=s();let d,f=null;l?d=i.map(x=>mr(x,!0)):(d=Is(u(),i),f=Is(a,[])),Ml({changedNodes:d,changedEdges:f,get:s,set:e})},addSelectedEdges:i=>{const{multiSelectionActive:l,edges:a,getNodes:u}=s();let d,f=null;l?d=i.map(x=>mr(x,!0)):(d=Is(a,i),f=Is(u(),[])),Ml({changedNodes:f,changedEdges:d,get:s,set:e})},unselectNodesAndEdges:({nodes:i,edges:l}={})=>{const{edges:a,getNodes:u}=s(),d=i||u(),f=l||a,x=d.map(h=>(h.selected=!1,mr(h.id,!1))),m=f.map(h=>mr(h.id,!1));Ml({changedNodes:x,changedEdges:m,get:s,set:e})},setMinZoom:i=>{const{d3Zoom:l,maxZoom:a}=s();l==null||l.scaleExtent([i,a]),e({minZoom:i})},setMaxZoom:i=>{const{d3Zoom:l,minZoom:a}=s();l==null||l.scaleExtent([a,i]),e({maxZoom:i})},setTranslateExtent:i=>{var l;(l=s().d3Zoom)==null||l.translateExtent(i),e({translateExtent:i})},resetSelectedElements:()=>{const{edges:i,getNodes:l}=s(),u=l().filter(f=>f.selected).map(f=>mr(f.id,!1)),d=i.filter(f=>f.selected).map(f=>mr(f.id,!1));Ml({changedNodes:u,changedEdges:d,get:s,set:e})},setNodeExtent:i=>{const{nodeInternals:l}=s();l.forEach(a=>{a.positionAbsolute=td(a.position,i)}),e({nodeExtent:i,nodeInternals:new Map(l)})},panBy:i=>{const{transform:l,width:a,height:u,d3Zoom:d,d3Selection:f,translateExtent:x}=s();if(!d||!f||!i.x&&!i.y)return!1;const m=gr.translate(l[0]+i.x,l[1]+i.y).scale(l[2]),h=[[0,0],[a,u]],y=d==null?void 0:d.constrain()(m,h,x);return d.transform(f,y),l[0]!==y.x||l[1]!==y.y||l[2]!==y.k},cancelConnection:()=>e({connectionNodeId:fr.connectionNodeId,connectionHandleId:fr.connectionHandleId,connectionHandleType:fr.connectionHandleType,connectionStatus:fr.connectionStatus,connectionStartHandle:fr.connectionStartHandle,connectionEndHandle:fr.connectionEndHandle}),reset:()=>e({...fr})}),Object.is),Jh=({children:e})=>{const s=F.useRef(null);return s.current||(s.current=HN()),Q.createElement(cw,{value:s.current},e)};Jh.displayName="ReactFlowProvider";const ex=({children:e})=>F.useContext(aa)?Q.createElement(Q.Fragment,null,e):Q.createElement(Jh,null,e);ex.displayName="ReactFlowWrapper";const VN={input:_h,default:Du,output:Ph,group:cd},qN={default:Kl,straight:id,step:sd,smoothstep:ca,simplebezier:rd},XN=[0,0],YN=[15,15],GN={x:0,y:0,zoom:1},ZN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},tx=F.forwardRef(({nodes:e,edges:s,defaultNodes:i,defaultEdges:l,className:a,nodeTypes:u=VN,edgeTypes:d=qN,onNodeClick:f,onEdgeClick:x,onInit:m,onMove:h,onMoveStart:y,onMoveEnd:b,onConnect:v,onConnectStart:j,onConnectEnd:w,onClickConnectStart:N,onClickConnectEnd:E,onNodeMouseEnter:z,onNodeMouseMove:M,onNodeMouseLeave:_,onNodeContextMenu:L,onNodeDoubleClick:D,onNodeDragStart:R,onNodeDrag:H,onNodeDragStop:k,onNodesDelete:T,onEdgesDelete:I,onSelectionChange:$,onSelectionDragStart:W,onSelectionDrag:S,onSelectionDragStop:O,onSelectionContextMenu:P,onSelectionStart:Y,onSelectionEnd:X,connectionMode:U=En.Strict,connectionLineType:q=xr.Bezier,connectionLineStyle:A,connectionLineComponent:V,connectionLineContainerStyle:K,deleteKeyCode:re="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:ae=!1,selectionMode:J=Xi.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:pe=Gl()?"Meta":"Control",zoomActivationKeyCode:ce=Gl()?"Meta":"Control",snapToGrid:je=!1,snapGrid:ke=YN,onlyRenderVisibleElements:Re=!1,selectNodesOnDrag:De=!0,nodesDraggable:$e,nodesConnectable:st,nodesFocusable:Pe,nodeOrigin:xe=XN,edgesFocusable:Qe,edgesUpdatable:gt,elementsSelectable:it,defaultViewport:_t=GN,minZoom:Qt=.5,maxZoom:Wt=2,translateExtent:kn=Ou,preventScrolling:mn=!0,nodeExtent:Jt,defaultMarkerColor:en="#b1b1b7",zoomOnScroll:In=!0,zoomOnPinch:tn=!0,panOnScroll:Xe=!1,panOnScrollSpeed:zt=.5,panOnScrollMode:hn=Ur.Free,zoomOnDoubleClick:xn=!0,panOnDrag:Rn=!0,onPaneClick:Pt,onPaneMouseEnter:wt,onPaneMouseMove:Mn,onPaneMouseLeave:vr,onPaneScroll:_n,onPaneContextMenu:gn,children:zn,onEdgeContextMenu:yn,onEdgeDoubleClick:to,onEdgeMouseEnter:no,onEdgeMouseMove:ro,onEdgeMouseLeave:so,onEdgeUpdate:Fs,onEdgeUpdateStart:io,onEdgeUpdateEnd:wr,onReconnect:Us,onReconnectStart:Nr,onReconnectEnd:fa,reconnectRadius:jr=10,edgeUpdaterRadius:Xr=10,onNodesChange:Yr,onEdgesChange:Ws,noDragClassName:pa="nodrag",noWheelClassName:ma="nowheel",noPanClassName:oo="nopan",fitView:Pn=!1,fitViewOptions:lo,connectOnClick:ao=!0,attributionPosition:ha,proOptions:co,defaultEdgeOptions:uo,elevateNodesOnSelect:fo=!0,elevateEdgesOnSelect:po=!1,disableKeyboardA11y:mo=!1,autoPanOnConnect:xa=!0,autoPanOnNodeDrag:He=!0,connectionRadius:ga=20,isValidConnection:Bs,onError:ho,style:Gr,id:xo,nodeDragThreshold:go,...Zr},Bt)=>{const Hs=xo||"1";return Q.createElement("div",{...Zr,style:{...Gr,...ZN},ref:Bt,className:vt(["react-flow",a]),"data-testid":"rf__wrapper",id:xo},Q.createElement(ex,null,Q.createElement(BN,{onInit:m,onMove:h,onMoveStart:y,onMoveEnd:b,onNodeClick:f,onEdgeClick:x,onNodeMouseEnter:z,onNodeMouseMove:M,onNodeMouseLeave:_,onNodeContextMenu:L,onNodeDoubleClick:D,nodeTypes:u,edgeTypes:d,connectionLineType:q,connectionLineStyle:A,connectionLineComponent:V,connectionLineContainerStyle:K,selectionKeyCode:oe,selectionOnDrag:ae,selectionMode:J,deleteKeyCode:re,multiSelectionKeyCode:pe,panActivationKeyCode:ie,zoomActivationKeyCode:ce,onlyRenderVisibleElements:Re,selectNodesOnDrag:De,defaultViewport:_t,translateExtent:kn,minZoom:Qt,maxZoom:Wt,preventScrolling:mn,zoomOnScroll:In,zoomOnPinch:tn,zoomOnDoubleClick:xn,panOnScroll:Xe,panOnScrollSpeed:zt,panOnScrollMode:hn,panOnDrag:Rn,onPaneClick:Pt,onPaneMouseEnter:wt,onPaneMouseMove:Mn,onPaneMouseLeave:vr,onPaneScroll:_n,onPaneContextMenu:gn,onSelectionContextMenu:P,onSelectionStart:Y,onSelectionEnd:X,onEdgeContextMenu:yn,onEdgeDoubleClick:to,onEdgeMouseEnter:no,onEdgeMouseMove:ro,onEdgeMouseLeave:so,onReconnect:Us??Fs,onReconnectStart:Nr??io,onReconnectEnd:fa??wr,reconnectRadius:jr??Xr,defaultMarkerColor:en,noDragClassName:pa,noWheelClassName:ma,noPanClassName:oo,elevateEdgesOnSelect:po,rfId:Hs,disableKeyboardA11y:mo,nodeOrigin:xe,nodeExtent:Jt}),Q.createElement(Fw,{nodes:e,edges:s,defaultNodes:i,defaultEdges:l,onConnect:v,onConnectStart:j,onConnectEnd:w,onClickConnectStart:N,onClickConnectEnd:E,nodesDraggable:$e,nodesConnectable:st,nodesFocusable:Pe,edgesFocusable:Qe,edgesUpdatable:gt,elementsSelectable:it,elevateNodesOnSelect:fo,minZoom:Qt,maxZoom:Wt,nodeExtent:Jt,onNodesChange:Yr,onEdgesChange:Ws,snapToGrid:je,snapGrid:ke,connectionMode:U,translateExtent:kn,connectOnClick:ao,defaultEdgeOptions:uo,fitView:Pn,fitViewOptions:lo,onNodesDelete:T,onEdgesDelete:I,onNodeDragStart:R,onNodeDrag:H,onNodeDragStop:k,onSelectionDrag:S,onSelectionDragStart:W,onSelectionDragStop:O,noPanClassName:oo,nodeOrigin:xe,rfId:Hs,autoPanOnConnect:xa,autoPanOnNodeDrag:He,onError:ho,connectionRadius:ga,isValidConnection:Bs,nodeDragThreshold:go}),Q.createElement($w,{onSelectionChange:$}),zn,Q.createElement(dw,{proOptions:co,position:ha}),Q.createElement(Vw,{rfId:Hs,disableKeyboardA11y:mo})))});tx.displayName="ReactFlow";const KN=e=>e.getNodes();function nt(){return We(KN,ct)}const QN=e=>e.edges;function rt(){return We(QN,ct)}function JN(){return Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Q.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function ej(){return Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Q.createElement("path",{d:"M0 0h32v4.2H0z"}))}function tj(){return Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Q.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function nj(){return Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function rj(){return Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Li=({children:e,className:s,...i})=>Q.createElement("button",{type:"button",className:vt(["react-flow__controls-button",s]),...i},e);Li.displayName="ControlButton";const sj=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),nx=({style:e,showZoom:s=!0,showFitView:i=!0,showInteractive:l=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:d,onFitView:f,onInteractiveChange:x,className:m,children:h,position:y="bottom-left"})=>{const b=ut(),[v,j]=F.useState(!1),{isInteractive:w,minZoomReached:N,maxZoomReached:E}=We(sj,ct),{zoomIn:z,zoomOut:M,fitView:_}=ua();if(F.useEffect(()=>{j(!0)},[]),!v)return null;const L=()=>{z(),u==null||u()},D=()=>{M(),d==null||d()},R=()=>{_(a),f==null||f()},H=()=>{b.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),x==null||x(!w)};return Q.createElement(Yl,{className:vt(["react-flow__controls",m]),position:y,style:e,"data-testid":"rf__controls"},s&&Q.createElement(Q.Fragment,null,Q.createElement(Li,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},Q.createElement(JN,null)),Q.createElement(Li,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},Q.createElement(ej,null))),i&&Q.createElement(Li,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},Q.createElement(tj,null)),l&&Q.createElement(Li,{className:"react-flow__controls-interactive",onClick:H,title:"toggle interactivity","aria-label":"toggle interactivity"},w?Q.createElement(rj,null):Q.createElement(nj,null)),h)};nx.displayName="Controls";var ij=F.memo(nx),Kt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Kt||(Kt={}));function oj({color:e,dimensions:s,lineWidth:i}){return Q.createElement("path",{stroke:e,strokeWidth:i,d:`M${s[0]/2} 0 V${s[1]} M0 ${s[1]/2} H${s[0]}`})}function lj({color:e,radius:s}){return Q.createElement("circle",{cx:s,cy:s,r:s,fill:e})}const aj={[Kt.Dots]:"#91919a",[Kt.Lines]:"#eee",[Kt.Cross]:"#e2e2e2"},cj={[Kt.Dots]:1,[Kt.Lines]:1,[Kt.Cross]:6},uj=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function rx({id:e,variant:s=Kt.Dots,gap:i=20,size:l,lineWidth:a=1,offset:u=2,color:d,style:f,className:x}){const m=F.useRef(null),{transform:h,patternId:y}=We(uj,ct),b=d||aj[s],v=l||cj[s],j=s===Kt.Dots,w=s===Kt.Cross,N=Array.isArray(i)?i:[i,i],E=[N[0]*h[2]||1,N[1]*h[2]||1],z=v*h[2],M=w?[z,z]:E,_=j?[z/u,z/u]:[M[0]/u,M[1]/u];return Q.createElement("svg",{className:vt(["react-flow__background",x]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},Q.createElement("pattern",{id:y+e,x:h[0]%E[0],y:h[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},j?Q.createElement(lj,{color:b,radius:z/u}):Q.createElement(oj,{dimensions:M,color:b,lineWidth:a})),Q.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+e})`}))}rx.displayName="Background";var dj=F.memo(rx);function fj({data:e,id:s,selected:i}){const l=le(b=>b.updateNodeData),a=le(b=>b.disableUIUpdates),u=nt(),d=rt(),f=F.useRef({a:e.a??0,b:e.b??0,operation:e.operation??2}),x=(b,v,j)=>{b=b|0,v=v|0;let w=0;switch(j){case 2:w=b+v|0;break;case 6:w=b-v|0;break;case 0:w=b&v;break;case 1:w=b|v;break;case 3:w=b^v;break;case 11:w=b<<(v&31)|0;break;case 8:w=b>>>(v&31);break;case 9:w=b>>(v&31);break;case 7:w=(b|0)<(v|0)?1:0;break;case 10:w=b>>>0<v>>>0?1:0;break;case 12:w=(b|0)*(v|0)|0;break;case 13:{const E=BigInt(b|0),z=BigInt(v|0),M=E*z;w=Number(M>>32n&0xFFFFFFFFn);break}case 14:{const E=BigInt(b>>>0),z=BigInt(v>>>0),M=E*z;w=Number(M>>32n&0xFFFFFFFFn);break}case 15:{const E=BigInt(b|0),z=BigInt(v>>>0),M=E*z;w=Number(M>>32n&0xFFFFFFFFn);break}case 16:v===0?w=-1:b===-2147483648&&v===-1?w=-2147483648:w=Math.trunc((b|0)/(v|0));break;case 17:v===0?w=4294967295:w=Math.trunc((b>>>0)/(v>>>0));break;case 18:v===0?w=b:b===-2147483648&&v===-1?w=0:w=(b|0)%(v|0);break;case 19:v===0?w=b>>>0:w=(b>>>0)%(v>>>0);break;default:w=0;break}return{result:w,zero:w===0?1:0}},m=b=>{if(!b)return null;const v=u.find(j=>j.id===b.source);if(v!=null&&v.data&&typeof v.data=="object"){const j=b.sourceHandle;let w;if(j&&v.data[j]!==void 0){const N=v.data[j];w=typeof N=="number"?N:void 0}else if("value"in v.data){const N=v.data.value;w=typeof N=="number"?N:void 0}return w??null}return null},h=()=>{const b=d.find(M=>M.target===s&&M.targetHandle==="a"),v=d.find(M=>M.target===s&&M.targetHandle==="b"),j=d.find(M=>M.target===s&&M.targetHandle==="control"),w=m(b),N=m(v),E=m(j);if(w!==null&&w!==f.current.a||N!==null&&N!==f.current.b||E!==null&&E!==f.current.operation){const M=w??f.current.a,_=N??f.current.b,L=E??f.current.operation;f.current={a:M,b:_,operation:L};const{result:D,zero:R}=x(M,_,L);l(s,{...e,a:M,b:_,operation:L,result:D,zero:R})}};F.useEffect(()=>{h()},[d]);const y=b=>({2:"ADD",6:"SUB",0:"AND",1:"OR",3:"XOR",11:"SLL",8:"SRL",9:"SRA",7:"SLT",10:"SLTU",12:"MUL",13:"MULH",14:"MULHU",15:"MULHSU",16:"DIV",17:"DIVU",18:"REM",19:"REMU"})[b]||`UNKNOWN(${b})`;return r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"a",className:"w-3 h-3 bg-blue-400",style:{top:"30%"},title:"Input Operand A"}),r.jsx(ue,{type:"target",position:ne.Left,id:"b",className:"w-3 h-3 bg-blue-400",style:{top:"60%"},title:"Input Operand B"}),r.jsx(ue,{type:"target",position:ne.Bottom,id:"control",className:"w-3 h-3 bg-yellow-400",title:"ALU Control Signal"}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"ALU"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["Control: ",y(e.operation??2)," "]}),r.jsxs("div",{className:"text-gray-500",children:["A: ",e.a??0]}),r.jsxs("div",{className:"text-gray-500",children:["B: ",e.b??0]}),r.jsxs("div",{className:"text-gray-500",children:["Result: ",e.result??0]}),r.jsxs("div",{className:"text-gray-500",children:["Zero: ",e.zero??0]})]}),a&&r.jsx("div",{style:{height:"100px"}})]})}),r.jsx(ue,{type:"source",position:ne.Right,id:"result",className:"w-3 h-3 bg-green-400",style:{top:"30%"},title:"Result"}),r.jsx(ue,{type:"source",position:ne.Right,id:"zero",className:"w-3 h-3 bg-green-400",style:{top:"60%"},title:"Zero Flag"})]})}function pj({data:e,id:s,selected:i}){const l=le(D=>D.updateNodeData),a=le(D=>D.disableUIUpdates),u=le(D=>D.stepCount),d=le(D=>D.registers),f=le(D=>D.updateRegisters),x=e.readReg1||0,m=e.readReg2||0,h=e.writeReg||0,y=e.writeData||0,b=e.regWrite||!1,v=e.reset||!1,j=nt(),w=rt(),N=D=>{if(!D)return null;const R=j.find(H=>H.id===D.source);if(R!=null&&R.data&&typeof R.data=="object"){const H=D.sourceHandle;let k;if(H&&R.data[H]!==void 0){const T=R.data[H];k=typeof T=="number"||typeof T=="boolean"?T:void 0}else if("value"in R.data){const T=R.data.value;k=typeof T=="number"||typeof T=="boolean"?T:void 0}return k??null}return null},E=()=>{const D=w.find(q=>q.target===s&&q.targetHandle==="readReg1"),R=w.find(q=>q.target===s&&q.targetHandle==="readReg2"),H=w.find(q=>q.target===s&&q.targetHandle==="writeReg"),k=w.find(q=>q.target===s&&q.targetHandle==="writeData"),T=w.find(q=>q.target===s&&q.targetHandle==="regWrite"),I=Number(N(D)??e.readReg1??0),$=Number(N(R)??e.readReg2??0),W=Number(N(H)??e.writeReg??0),S=Number(N(k)??e.writeData??0),O=!!(N(T)??e.regWrite??!1),P=e.writeFirst||!1,Y=I===0?0:P&&O&&I===W?S:d[I]||0,X=$===0?0:P&&O&&$===W?S:d[$]||0;(I!==(e.readReg1||0)||$!==(e.readReg2||0)||W!==(e.writeReg||0)||S!==(e.writeData||0)||O!==(e.regWrite||!1)||Y!==e.readData1||X!==e.readData2)&&l(s,{...e,readReg1:I,readReg2:$,writeReg:W,writeData:S,regWrite:O,readData1:Y,readData2:X})};Q.useEffect(()=>{E()},[w,j,s,d]),Q.useEffect(()=>{!v&&e.regWrite&&e.writeReg&&e.writeReg!==0&&f({[e.writeReg]:e.writeData||0})},[u,v]);const[z,M]=Q.useState(!1),[_,L]=Q.useState(e.writeFirst??!1);return Q.useEffect(()=>{z&&L(e.writeFirst??!1)},[z,e.writeFirst]),r.jsxs("div",{className:`px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Top,id:"regWrite",className:"w-3 h-3 bg-yellow-400",style:{left:"50%"},title:"Register Write Enable"}),r.jsx(ue,{type:"target",position:ne.Left,id:"readReg1",className:"w-3 h-3 bg-blue-400",style:{top:"20%"},title:"Read Register 1 Address"}),r.jsx(ue,{type:"target",position:ne.Left,id:"readReg2",className:"w-3 h-3 bg-blue-400",style:{top:"40%"},title:"Read Register 2 Address"}),r.jsx(ue,{type:"target",position:ne.Left,id:"writeReg",className:"w-3 h-3 bg-blue-400",style:{top:"60%"},title:"Write Register Address"}),r.jsx(ue,{type:"target",position:ne.Left,id:"writeData",className:"w-3 h-3 bg-blue-400",style:{top:"80%"},title:"Write Data"}),r.jsx(ue,{type:"source",position:ne.Right,id:"readData1",className:"w-3 h-3 bg-green-400",style:{top:"30%"},title:"Read Data 1"}),r.jsx(ue,{type:"source",position:ne.Right,id:"readData2",className:"w-3 h-3 bg-green-400",style:{top:"70%"},title:"Read Data 2"}),r.jsx("button",{type:"button",onClick:()=>M(!z),className:"absolute top-2 right-2 p-1 rounded-md hover:bg-gray-100",title:"Configure",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),z&&r.jsxs("div",{className:"absolute z-10 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-2 right-0",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"write-first-checkbox",className:"block text-sm font-medium text-gray-700 mb-1",children:"Write First"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:_,onChange:D=>L(D.target.checked),className:"h-4 w-4 text-blue-600 rounded",title:"Enable write-first mode",id:"write-first-checkbox"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable write-first"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{M(!1),L(e.writeFirst||!1)},className:"px-3 py-1 border rounded-md hover:bg-gray-100 text-sm",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>{l(s,{...e,writeFirst:_}),M(!1)},className:"px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"Confirm"})]})]}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"Register File"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["Read Reg 1: x",x," = ",e.readData1||0]}),r.jsxs("div",{className:"text-gray-500",children:["Read Reg 2: x",m," = ",e.readData2||0]}),r.jsxs("div",{className:"text-gray-500",children:["Write Reg: x",h]}),r.jsxs("div",{className:"text-gray-500",children:["Write Data: ",y]}),r.jsxs("div",{className:"text-gray-500",children:["RegWrite: ",b?"1":"0"]}),r.jsxs("div",{className:"text-gray-500",children:["WriteFirst: ",e.writeFirst?"true":"false"]})]}),a&&r.jsx("div",{style:{height:"120px"}})]})})]})}function mj({data:e,id:s,selected:i}){const l=le(N=>N.updateNodeData),a=le(N=>N.disableUIUpdates),[u,d]=Q.useState([]),[f,x]=F.useState(!1),[m,h]=F.useState(e.portCount||2),y=nt(),b=rt(),v=Q.useRef({}),j=e.portCount||2,w=()=>{const N={};let E=!1;const z=D=>{if(!D)return null;const R=y.find(H=>H.id===D.source);if(R!=null&&R.data&&typeof R.data=="object"){const H=D.sourceHandle;let k;if(H&&R.data[H]!==void 0){const T=R.data[H];k=typeof T=="number"?T:void 0}else if("value"in R.data){const T=R.data.value;k=typeof T=="number"?T:void 0}return k??null}return null};for(let D=0;D<j;D++){const R=b.find(k=>k.target===s&&k.targetHandle===`in${D}`),H=z(R);H!==null?(N[`in${D}`]=H,H!==v.current[`in${D}`]&&(E=!0)):N[`in${D}`]=v.current[`in${D}`]||0}const M=b.find(D=>D.target===s&&D.targetHandle==="select"),_=z(M),L=_!==null?String(_):e.select||"0";if(E||L!==e.select){v.current=N;const D=parseInt(L)%j,R=N[`in${D}`]||0;l(s,{...e,value:R,select:L}),d(Object.values(N))}};return Q.useEffect(()=>{w()},[b,s,y,e,j]),r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"MUX"}),r.jsx("button",{type:"button",onClick:()=>x(!f),className:"p-1 rounded-md hover:bg-gray-100",title:"Configure",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})})]}),f&&r.jsxs("div",{className:"absolute z-10 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-2",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Input Ports"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>h(Math.max(2,m-1)),className:"px-2 py-1 border rounded-md hover:bg-gray-100",title:"Decrease port count",children:"-"}),r.jsx("span",{className:"flex-1 text-center",children:m}),r.jsx("button",{type:"button",onClick:()=>h(Math.min(8,m+1)),className:"px-2 py-1 border rounded-md hover:bg-gray-100",title:"Increase port count",children:"+"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{x(!1),h(e.portCount||2)},className:"px-3 py-1 border rounded-md hover:bg-gray-100 text-sm",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>{l(s,{...e,portCount:m}),x(!1)},className:"px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"Confirm"})]})]}),!a&&r.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[Array.from({length:j}).map((N,E)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Input ",E,": "]}),r.jsx("span",{children:u[E]||0})]},E)),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Select: "}),r.jsx("span",{children:e.select||"0"})]})]}),a&&r.jsx("div",{style:{height:`${Math.max(60,j*20)}px`}}),Array.from({length:j}).map((N,E)=>r.jsx(ue,{type:"target",position:ne.Left,id:`in${E}`,className:"w-3 h-3 bg-blue-400",style:{top:`${20+E*60/(j-1)}%`},title:`Input ${E}`},`in${E}`)),r.jsx(ue,{type:"source",position:ne.Right,id:"out",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"Output"}),r.jsx(ue,{type:"target",position:ne.Bottom,id:"select",className:"w-3 h-3 bg-yellow-400",style:{left:"50%"},title:"Select Signal"})]})}function hj({data:e,id:s,selected:i}){const l=le(h=>h.updateNodeData),a=le(h=>h.disableUIUpdates),u=nt(),d=rt(),f=(h,y)=>{if(!h||h.length!==32)return 0;let b=0;switch(y){case"R":return 0;case"I":b=parseInt(h.substring(0,12),2),(b&2048)!==0&&(b=b|4294963200);break;case"S":const v=parseInt(h.substring(0,7),2),j=parseInt(h.substring(20,25),2);b=v<<5|j,(b&2048)!==0&&(b=b|4294963200);break;case"B":const w=parseInt(h.substring(0,1),2),N=parseInt(h.substring(1,7),2),E=parseInt(h.substring(20,24),2),z=parseInt(h.substring(24,25),2);b=w<<12|z<<11|N<<5|E<<1,(b&4096)!==0&&(b=b|4294959104);break;case"U":b=parseInt(h.substring(0,20),2)<<12;break;case"J":const M=parseInt(h.substring(0,1),2),_=parseInt(h.substring(1,11),2),L=parseInt(h.substring(11,12),2),D=parseInt(h.substring(12,20),2);b=M<<20|D<<12|L<<11|_<<1,(b&1048576)!==0&&(b=b|4292870144);break}return b},x=h=>{switch(parseInt(h,2)){case 51:return"R";case 19:case 3:case 103:return"I";case 35:return"S";case 99:return"B";case 55:case 23:return"U";case 111:return"J";default:return"R"}},m=()=>{const h=d.find(y=>y.target===s&&y.targetHandle==="instruction");if(h){const y=u.find(b=>b.id===h.source);if(y!=null&&y.data&&typeof y.data=="object"&&"value"in y.data&&typeof y.data.value=="string"){const b=y.data.value;try{const v=parseInt(b,16).toString(2).padStart(32,"0"),j=v.slice(-7),w=x(j),N=f(v,w);(N!==e.immediate||w!==e.format||v!==e.instruction)&&l(s,{...e,instruction:v,immediate:N,format:w})}catch(v){console.error(":",v)}}}};return Q.useEffect(()=>{m()},[d,u,s,e]),r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"instruction",className:"w-3 h-3 bg-blue-400",style:{top:"50%"},title:"Instruction Data"}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"Immediate Gen"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["Format: ",e.format||"R"]}),r.jsxs("div",{className:"text-gray-500",children:["Immediate: ",e.immediate!==void 0?e.immediate:0]})]}),a&&r.jsx("div",{style:{height:"50px"}})]})}),r.jsx(ue,{type:"source",position:ne.Right,id:"immediate",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"Immediate Value"})]})}function xj({data:e,id:s,selected:i}){const l=le(h=>h.updateNodeData),a=le(h=>h.disableUIUpdates),u=nt(),d=rt(),[f,x]=Q.useState("0000000"),m=()=>{const h=d.filter(w=>w.target===s);let y=!1,b=e.controlMux??0,v=e.opcode,j=e.funct3;if(h.forEach(w=>{const N=u.find(E=>E.id===w.source);if(N!=null&&N.data&&typeof N.data=="object"){const E=w.targetHandle;if(E==="controlMux"){const z=N.data[w.sourceHandle],M=typeof z=="number"?z:0;M!==b&&(b=M,y=!0)}else if(E==="opcode"){let z;if(E&&N.data[E]!==void 0?z=String(N.data[E]):"value"in N.data&&(z=String(N.data.value)),z){const M=parseInt(z).toString(2).padStart(7,"0");M!==v&&(v=M,x(M),y=!0)}}else if(E==="funct3"){let z;if(E&&N.data[E]!==void 0?z=String(N.data[E]):"value"in N.data&&(z=String(N.data.value)),z){const M=parseInt(z).toString(2).padStart(3,"0");M!==j&&(j=M,y=!0)}}}}),y){let w;if(b===1)w={regWrite:0,memRead:0,memWrite:0,memWidth:2,aluOp:0,aluSrc1:0,aluSrc2:0,memToReg:0};else if(v)switch(v.slice(0,7)){case"0110011":w={regWrite:1,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("10",2),aluSrc1:0,aluSrc2:0,memToReg:0};break;case"0010011":w={regWrite:1,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("11",2),aluSrc1:0,aluSrc2:1,memToReg:0};break;case"0000011":let E=2;if(j)switch(j){case"000":case"100":E=0;break;case"001":case"101":E=1;break;case"010":default:E=2;break}w={regWrite:1,memRead:1,memWrite:0,memWidth:E,aluOp:parseInt("00",2),aluSrc1:0,aluSrc2:1,memToReg:1};break;case"0100011":let z=2;if(j)switch(j){case"000":z=0;break;case"001":z=1;break;case"010":default:z=2;break}w={regWrite:0,memRead:0,memWrite:1,memWidth:z,aluOp:parseInt("00",2),aluSrc1:0,aluSrc2:1,memToReg:0};break;case"1100011":w={regWrite:0,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("01",2),aluSrc1:0,aluSrc2:0,memToReg:0};break;case"1101111":case"1100111":w={regWrite:1,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("00",2),aluSrc1:0,aluSrc2:1,memToReg:2};break;case"0110111":w={regWrite:1,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("00",2),aluSrc1:2,aluSrc2:1,memToReg:0};break;case"0010111":w={regWrite:1,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("00",2),aluSrc1:1,aluSrc2:1,memToReg:0};break;default:w={regWrite:0,memRead:0,memWrite:0,memWidth:2,aluOp:parseInt("00",2),aluSrc1:0,aluSrc2:0,memToReg:0}}w&&l(s,{...e,...w,opcode:v,funct3:j,controlMux:b})}};return Q.useEffect(()=>{m()},[d,u,s,e]),r.jsxs("div",{className:`px-2 py-4 shadow-md rounded-md bg-white border-2 w-40 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"opcode",className:"w-3 h-3 bg-blue-400",style:{top:"10%"},title:"Instruction Opcode"}),r.jsx(ue,{type:"target",position:ne.Left,id:"funct3",className:"w-3 h-3 bg-blue-400",style:{top:"25%"},title:"Instruction Funct3"}),r.jsx(ue,{type:"target",position:ne.Top,id:"controlMux",className:"w-3 h-3 bg-yellow-400",style:{left:"50%"},title:"Control Mux (0=Normal, 1=NOP)"}),r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("div",{className:"text-lg font-bold mb-2",children:"Control Unit"}),!a&&r.jsxs("div",{className:"text-xs text-gray-500 space-y-1 w-full",children:[r.jsx("div",{children:(()=>{switch(f.slice(0,7)){case"0110011":return"R-type";case"0010011":return"I-type ALU";case"0000011":return"I-type Load";case"0100011":return"S-type";case"1100011":return"B-type";case"1101111":return"J-type (jal)";case"1100111":return"I-type (jalr)";case"0110111":return"U-type (lui)";case"0010111":return"U-type (auipc)";default:return"Unknown"}})()}),r.jsxs("div",{className:"mt-1 text-xs",children:["MUX: ",e.controlMux??0]}),r.jsxs("div",{className:"mt-1 text-xs",children:["Funct3: ",e.funct3??"000"]}),r.jsxs("div",{className:"flex flex-col gap-y-4",children:[r.jsxs("div",{id:"regWrite-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"RegWrite:"}),r.jsx("span",{children:e.regWrite??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"regWrite",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"RegWrite"})]}),r.jsxs("div",{id:"aluSrc1-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"ALUSrc1:"}),r.jsx("span",{children:e.aluSrc1??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluSrc1",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"ALUSrc1"})]}),r.jsxs("div",{id:"aluSrc2-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"ALUSrc2:"}),r.jsx("span",{children:e.aluSrc2??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluSrc2",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"ALUSrc2"})]}),r.jsxs("div",{id:"memRead-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"MemRead:"}),r.jsx("span",{children:e.memRead??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"memRead",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"MemRead"})]}),r.jsxs("div",{id:"memWrite-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"MemWrite:"}),r.jsx("span",{children:e.memWrite??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"memWrite",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"MemWrite"})]}),r.jsxs("div",{id:"memWidth-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"MemWidth:"}),r.jsx("span",{children:e.memWidth??2}),r.jsx(ue,{type:"source",position:ne.Right,id:"memWidth",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"MemWidth"})]}),r.jsxs("div",{id:"aluOp-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"ALUOp:"}),r.jsx("span",{children:e.aluOp??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluOp",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"ALUOp"})]}),r.jsxs("div",{id:"memToReg-row",className:"flex justify-between items-center relative h-6",children:[r.jsx("span",{children:"MemToReg:"}),r.jsx("span",{children:e.memToReg??0}),r.jsx(ue,{type:"source",position:ne.Right,id:"memToReg",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%",transform:"translateY(-50%)"},title:"MemToReg"})]})]})]}),a&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{height:"220px"}}),r.jsx(ue,{type:"source",position:ne.Right,id:"regWrite",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"15%"},title:"RegWrite"}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluSrc1",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"22%"},title:"ALUSrc1"}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluSrc2",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"29%"},title:"ALUSrc2"}),r.jsx(ue,{type:"source",position:ne.Right,id:"memRead",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"36%"},title:"MemRead"}),r.jsx(ue,{type:"source",position:ne.Right,id:"memWrite",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"43%"},title:"MemWrite"}),r.jsx(ue,{type:"source",position:ne.Right,id:"memWidth",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"50%"},title:"MemWidth"}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluOp",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"57%"},title:"ALUOp"}),r.jsx(ue,{type:"source",position:ne.Right,id:"memToReg",className:"w-3 h-3 bg-green-400 absolute",style:{right:"-10px",top:"64%"},title:"MemToReg"})]})]})]})}function gj({data:e,id:s,selected:i}){const l=le(L=>L.memory),a=le(L=>L.updateMemory),u=le(L=>L.updateNodeData),d=le(L=>L.disableUIUpdates),f=le(L=>L.stepCount),x=nt(),m=rt(),h=le(L=>L.cache),y=le(L=>L.updateCacheStats),b=le(L=>L.initializeCache),v=L=>{if(!L)return null;const D=x.find(R=>R.id===L.source);if(D!=null&&D.data&&typeof D.data=="object"){const R=L.sourceHandle;let H;if(R&&D.data[R]!==void 0){const k=D.data[R];H=typeof k=="number"||typeof k=="boolean"?k:void 0}else if("value"in D.data){const k=D.data.value;H=typeof k=="number"||typeof k=="boolean"?k:void 0}return H??null}return null},j=L=>{const{config:D,sets:R}=h;if(R.length===0)return null;const H=L%D.blockSize,k=Math.floor(L/D.blockSize%D.sets),T=Math.floor(L/(D.blockSize*D.sets)),I=R[k];if(!I)return null;const $=I.entries.find(P=>P.valid&&P.tag===T);if($)return $.lastAccess=f,y(!0,!1),$.data[Math.floor(H/4)];y(!1,!1);const W=L-H,S=Array(D.blockSize/4).fill(0);for(let P=0;P<D.blockSize/4;P++){const X=`0x${(W+P*4).toString(16).padStart(8,"0")}`;S[P]=l[X]||0}let O=I.entries.find(P=>!P.valid);if(O)O.valid=!0,O.tag=T,O.dirty=!1,O.data=S,O.lastAccess=f;else{const P=I.entries[I.lru];P.valid&&P.dirty&&y(!1,!0),I.lru=(I.lru+1)%D.ways,P.valid=!0,P.tag=T,P.dirty=!1,P.data=S,P.lastAccess=f,O=P}return O.data[Math.floor(H/4)]},w=(L,D)=>{const{config:R,sets:H}=h;if(H.length===0)return;const k=L%R.blockSize,T=Math.floor(L/R.blockSize%R.sets),I=Math.floor(L/(R.blockSize*R.sets)),$=H[T];if(!$)return;let W=$.entries.find(O=>O.valid&&O.tag===I);if(W){W.data[Math.floor(k/4)]=D,W.dirty=!0,W.lastAccess=f,y(!0,!1);return}if(y(!1,!1),W=$.entries.find(O=>!O.valid),W){W.valid=!0,W.tag=I,W.dirty=!0,W.data[Math.floor(k/4)]=D,W.lastAccess=f;return}const S=$.entries[$.lru];S.valid&&S.dirty&&((S.tag*R.sets+T)*R.blockSize,y(!1,!0)),$.lru=($.lru+1)%R.ways,S.valid=!0,S.tag=I,S.dirty=!0,S.data[Math.floor(k/4)]=D,S.lastAccess=f},[N,E]=Q.useState(0),[z,M]=Q.useState(!1);Q.useEffect(()=>{h.sets.length===0&&b()},[h.sets.length,b]);const _=()=>{const L=m.find(P=>P.target===s&&P.targetHandle==="address"),D=m.find(P=>P.target===s&&P.targetHandle==="memRead"),R=m.find(P=>P.target===s&&P.targetHandle==="writeData"),H=m.find(P=>P.target===s&&P.targetHandle==="memWrite"),k=m.find(P=>P.target===s&&P.targetHandle==="memWidth"),T=Number(v(L)??e.address??0),I=Number(v(D)??e.memRead??0),$=Number(v(R)??e.writeData??0),W=Number(v(H)??e.memWrite??0),S=Number(v(k)??e.memWidth??2);if(T!==(e.address||0)||I!==(e.memRead||0)||$!==(e.writeData||0)||W!==(e.memWrite||0)||S!==(e.memWidth??2)){const P=`0x${T.toString(16).padStart(8,"0")}`;let Y=0;if(I>0)switch(S){case 0:Y=l[P]||0,Y&128&&(Y=Y|4294967040);break;case 1:const X=l[P]||0;Y=(l[`0x${(T+1).toString(16).padStart(8,"0")}`]||0)<<8|X,Y&32768&&(Y=Y|4294901760);break;case 2:default:const q=l[P]||0,A=l[`0x${(T+1).toString(16).padStart(8,"0")}`]||0,V=l[`0x${(T+2).toString(16).padStart(8,"0")}`]||0;Y=(l[`0x${(T+3).toString(16).padStart(8,"0")}`]||0)<<24|V<<16|A<<8|q;break}E(T),M(I>0),u(s,{...e,address:T,memRead:I,writeData:$,memWrite:W,memWidth:S,readData:Y})}};return Q.useEffect(()=>{_()},[m,s,x,l]),Q.useEffect(()=>{z&&j(N);const L=e.address||0,D=e.writeData||0,R=e.memWrite||0,H=e.memWidth??2;if(R>0){w(L,D);const k=`0x${L.toString(16).padStart(8,"0")}`;switch(H){case 0:a({[k]:D&255});break;case 1:a({[k]:D&255,[`0x${(L+1).toString(16).padStart(8,"0")}`]:D>>8&255});break;case 2:default:a({[k]:D&255,[`0x${(L+1).toString(16).padStart(8,"0")}`]:D>>8&255,[`0x${(L+2).toString(16).padStart(8,"0")}`]:D>>16&255,[`0x${(L+3).toString(16).padStart(8,"0")}`]:D>>24&255});break}}},[f]),r.jsxs("div",{className:`px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Top,id:"memWrite",className:"w-3 h-3 bg-yellow-400",style:{left:"20%"},title:"Write Enable Signal"}),r.jsx(ue,{type:"target",position:ne.Top,id:"memRead",className:"w-3 h-3 bg-yellow-400",style:{left:"50%"},title:"Read Enable Signal"}),r.jsx(ue,{type:"target",position:ne.Top,id:"memWidth",className:"w-3 h-3 bg-yellow-400",style:{left:"80%"},title:"Memory Width (0=byte, 1=half, 2=word)"}),r.jsx(ue,{type:"target",position:ne.Left,id:"address",className:"w-3 h-3 bg-blue-400",style:{top:"30%"},title:"Memory Address"}),r.jsx(ue,{type:"target",position:ne.Left,id:"writeData",className:"w-3 h-3 bg-blue-400",style:{top:"70%"},title:"Write Data"}),r.jsx(ue,{type:"source",position:ne.Right,id:"readData",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"Read Data"}),r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"Data Memory"}),!d&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["Address: 0x",(e.address||0).toString(16).padStart(8,"0")]}),r.jsxs("div",{className:"text-gray-500",children:["Write Data: ",e.writeData||0]}),r.jsxs("div",{className:"text-gray-500",children:["Read Data: ",e.readData||0]}),r.jsxs("div",{className:"text-gray-500",children:["MemRead: ",e.memRead||0]}),r.jsxs("div",{className:"text-gray-500",children:["MemWrite: ",e.memWrite||0]}),r.jsxs("div",{className:"text-gray-500",children:["MemWidth: ",e.memWidth??2," (",e.memWidth===0?"byte":e.memWidth===1?"half":"word",")"]})]}),d&&r.jsx("div",{style:{height:"120px"}})]})]})}function yj({data:e,id:s,selected:i}){var j,w;const l=le(N=>N.updateNodeData),a=le(N=>N.disableUIUpdates),u=le(N=>N.assembledInstructions),d=nt(),f=rt(),x=()=>{u.length>0&&l(s,{...e,instructions:u.map(N=>N.hex),pc:0})},m=()=>{var E;const N=f.find(z=>z.target===s&&z.targetHandle==="pc");if(N){const z=d.find(M=>M.id===N.source);if(z!=null&&z.data&&typeof z.data=="object"&&"value"in z.data&&typeof z.data.value=="number"){const M=Math.floor(z.data.value/4);M!==e.pc&&l(s,{...e,pc:M,value:(E=e.instructions)==null?void 0:E[M]})}}};Q.useEffect(()=>{m()},[d,f,s]),Q.useEffect(()=>{const N=e.pc||0;let E="0";Array.isArray(e.instructions)&&N>=0&&N<e.instructions.length&&(E=e.instructions[N]),E!==e.value&&l(s,{...e,value:E})},[e.pc,e.instructions]);const h=e.pc||0,y=Math.max(0,h-2),b=Math.min((((j=e.instructions)==null?void 0:j.length)||0)-1,h+2),v=((w=e.instructions)==null?void 0:w.slice(y,b+1))||[];return r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"pc",className:"w-3 h-3 bg-blue-400",style:{top:"50%"},title:"Program Counter Address"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold",children:"Instruction Memory"}),!a&&r.jsxs("div",{className:"text-sm text-gray-500",children:[r.jsxs("div",{children:["Size: ",e.size||4096," bytes"]}),r.jsxs("div",{children:["Output: ",e.value==="0"||!e.value?"No instruction":e.value]}),r.jsx("div",{className:"mt-2 space-y-1 font-mono",children:v.map((N,E)=>{const z=y+E,M=z===h;return r.jsxs("div",{className:`flex items-center ${M?"text-blue-600 font-bold":"text-gray-600"}`,children:[r.jsx("span",{className:"w-24 inline-block",children:`0x${(z*4).toString(16).padStart(8,"0")}`}),r.jsxs("span",{children:[M?" ":"  ",N||"No instruction"]})]},z)})}),e.instructions&&e.instructions.length>0&&r.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Total Instructions: ",e.instructions.length]})]}),a&&r.jsx("div",{style:{height:"160px"}})]}),r.jsx("button",{type:"button",onClick:x,disabled:u.length===0,className:`px-3 py-1.5 text-sm rounded ${u.length>0?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,title:u.length===0?"Please assemble code in editor first":"Load recently assembled instructions",children:"Load"})]}),r.jsx(ue,{type:"source",position:ne.Right,id:"instruction",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"Current Instruction"})]})}function bj({data:e,id:s,selected:i}){var x,m,h,y;const l=le(b=>b.updateNodeData),a=le(b=>b.disableUIUpdates),u=nt(),d=rt(),f=()=>{const b=d.filter(z=>z.target===s);let v=e.aluOp??0,j=e.funct3??0,w=e.funct7??0,N=!1;const E=z=>{if(!z)return null;const M=u.find(_=>_.id===z.source);if(M!=null&&M.data&&typeof M.data=="object"){const _=z.sourceHandle;let L;if(_&&M.data[_]!==void 0){const D=M.data[_];L=typeof D=="number"?D:void 0}else if("value"in M.data){const D=M.data.value;L=typeof D=="number"?Number(D):void 0}return L??null}return null};if(b.forEach(z=>{const M=E(z),_=z.targetHandle;if(M!==null&&!isNaN(M))switch(_){case"aluOp":M!==v&&(v=M,N=!0);break;case"funct3":M!==j&&(j=M,N=!0);break;case"funct7":M!==w&&(w=M,N=!0);break}}),N){const z=v.toString(2).padStart(2,"0"),M=j.toString(2).padStart(3,"0"),_=w.toString(2).padStart(7,"0"),D=((H,k,T)=>{if(H==="00")return"0010";if(H==="01")switch(k){case"000":return"0110";case"001":return"0110";case"100":return"0111";case"101":return"0111";case"110":return"1010";case"111":return"1010";default:return"0110"}else if(H==="10")if(T==="0000001")switch(k){case"000":return"1100";case"001":return"1101";case"010":return"1111";case"011":return"1110";case"100":return"10000";case"101":return"10001";case"110":return"10010";case"111":return"10011";default:return"0000"}else switch(k){case"000":return T==="0000000"?"0010":"0110";case"001":return"1011";case"010":return"0111";case"011":return"1010";case"100":return"0011";case"101":return T==="0000000"?"1000":"1001";case"110":return"0001";case"111":return"0000";default:return"0000"}else if(H==="11")switch(k){case"000":return"0010";case"001":return"1011";case"010":return"0111";case"011":return"1010";case"100":return"0011";case"101":return T==="0000000"?"1000":"1001";case"110":return"0001";case"111":return"0000";default:return"0010"}return"0000"})(z,M,_),R=parseInt(D,2);l(s,{...e,aluOp:v,funct3:j,funct7:w,aluControl:R})}};return Q.useEffect(()=>{f()},[d,s]),r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Top,id:"aluOp",className:"w-3 h-3 bg-blue-400",style:{left:"50%"},title:"ALU Operation Code"}),r.jsx(ue,{type:"target",position:ne.Left,id:"funct3",className:"w-3 h-3 bg-blue-400",style:{top:"40%"},title:"Function Code 3"}),r.jsx(ue,{type:"target",position:ne.Left,id:"funct7",className:"w-3 h-3 bg-blue-400",style:{top:"60%"},title:"Function Code 7"}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"ALU Control"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["ALUOp: ",((x=e.aluOp)==null?void 0:x.toString(2).padStart(2,"0"))||"00"]}),r.jsxs("div",{className:"text-gray-500",children:["Funct3: ",((m=e.funct3)==null?void 0:m.toString(2).padStart(3,"0"))||"000"]}),r.jsxs("div",{className:"text-gray-500",children:["Funct7: ",((h=e.funct7)==null?void 0:h.toString(2).padStart(7,"0"))||"0000000"]}),r.jsxs("div",{className:"text-gray-500",children:["ALU Control: ",((y=e.aluControl)==null?void 0:y.toString(2).padStart(4,"0"))||"0000"]})]}),a&&r.jsx("div",{style:{height:"80px"}})]})}),r.jsx(ue,{type:"source",position:ne.Right,id:"aluControl",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"ALU Control Signal"})]})}function vj({data:e,id:s,selected:i}){const l=le(E=>E.updateNodeData),a=le(E=>E.disableUIUpdates),u=le(E=>E.stepCount),d=le(E=>E.updatePcValue),f=le(E=>E.pcValue),x=f??0,m=e.reset??!1,h=e.pcWrite??1,[y,b]=Q.useState(f??0),v=nt(),j=rt(),w=E=>{E!==x&&(l(s,{...e,value:E}),d(E))};Q.useEffect(()=>{m&&(b(0),d(0),l(s,{...e,reset:!1}))},[m,s,e,l,d]);const N=()=>{const E=j.find(_=>_.target===s&&_.targetHandle==="pcWrite");let z=1;if(E){const _=v.find(L=>L.id===E.source);if(_!=null&&_.data&&typeof _.data=="object"){const L=_.data[E.sourceHandle];z=typeof L=="number"?L:1}}z!==e.pcWrite&&l(s,{...e,pcWrite:z});const M=j.find(_=>_.target===s&&_.targetHandle==="next");if(M){const _=v.find(L=>L.id===M.source);_!=null&&_.data&&typeof _.data=="object"&&"value"in _.data&&typeof _.data.value=="number"&&b(_.data.value)}};return Q.useEffect(()=>{N()},[v,j,s]),Q.useEffect(()=>{m||h===1&&w(y)},[u]),r.jsxs("div",{className:`px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"next",className:"w-3 h-3 bg-blue-400",style:{top:"35%"},title:"Next Instruction Address"}),r.jsx(ue,{type:"target",position:ne.Left,id:"pcWrite",className:"w-3 h-3 bg-yellow-400",style:{top:"65%"},title:"PC Write Enable"}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"PC"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["Current: 0x",x.toString(16).padStart(8,"0")]}),r.jsxs("div",{className:"text-gray-500",children:["Next: 0x",y.toString(16).padStart(8,"0")]}),r.jsxs("div",{className:"text-gray-500",children:["PCWrite: ",h]})]}),a&&r.jsx("div",{style:{height:"70px"}})]})}),r.jsx(ue,{type:"source",position:ne.Right,id:"address",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"Current Instruction Address"})]})}function wj({data:e,id:s,selected:i}){const l=le(d=>d.updateNodeData),a=e.value??0,u=d=>{a!==d&&l(s,{...e,value:d})};return Q.useEffect(()=>{e.value!==a&&u(e.value??0)},[e.value]),r.jsxs("div",{className:`px-2 py-1 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{className:"w-6 h-6 flex items-center justify-center bg-gray-200 hover:bg-gray-300 rounded-full",onClick:()=>u(a-1),children:"-"}),r.jsx("div",{className:"text-xl font-bold text-gray-700",children:a}),r.jsx("button",{className:"w-6 h-6 flex items-center justify-center bg-gray-200 hover:bg-gray-300 rounded-full",onClick:()=>u(a+1),children:"+"})]}),r.jsx(ue,{type:"source",position:ne.Right,id:"value",className:"w-2 h-2 bg-green-400",style:{top:"50%"},title:"Constant Output Value"})]})}function Nj({data:e,id:s,selected:i}){const l=le(w=>w.updateNodeData),a=le(w=>w.disableUIUpdates),u=le(w=>w.stepCount),d=e.value??0,f=e.name||"R",x=e.reset??!1,[m,h]=Q.useState(0),y=nt(),b=rt(),v=w=>{l(s,{...e,value:w})};Q.useEffect(()=>{x&&(v(0),h(0),l(s,{...e,value:0,reset:!1}))},[x,s,e,l]);const j=()=>{const w=b.find(N=>N.target===s&&N.targetHandle==="input");if(w){const N=y.find(E=>E.id===w.source);if(N!=null&&N.data&&typeof N.data=="object"){const E=w.sourceHandle;let z;if(E&&N.data[E]!==void 0){const M=N.data[E];z=typeof M=="number"?M:void 0}else if("value"in N.data){const M=N.data.value;z=typeof M=="number"?M:void 0}z!==void 0&&h(z)}}};return Q.useEffect(()=>{j()},[y,b,s]),Q.useEffect(()=>{x||v(m)},[u]),r.jsxs("div",{className:`px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:f}),!a&&r.jsx("div",{className:"text-xl font-bold text-gray-700",children:d})]}),r.jsx(ue,{type:"target",position:ne.Left,id:"input",className:"w-2 h-2 bg-blue-400",style:{top:"50%"},title:"Input Value"}),r.jsx(ue,{type:"source",position:ne.Right,id:"output",className:"w-2 h-2 bg-green-400",style:{top:"50%"},title:"Output Value"})]})}function jj({data:e,id:s,selected:i}){const l=le(m=>m.updateNodeData),a=e.value??0,u=nt(),d=rt(),f=m=>{a!==m&&l(s,{...e,value:m,outputValue:m})};F.useEffect(()=>{e.value!==a&&f(e.value??0)},[e.value]);const x=()=>{const m=d.find(y=>y.target===s);if(!m){f(0);return}const h=u.find(y=>y.id===m.source);if(h!=null&&h.data&&typeof h.data=="object"){const y=m.sourceHandle;let b;y&&h.data[y]!==void 0?b=h.data[y]:"value"in h.data&&(b=h.data.value),f(typeof b=="string"||typeof b=="number"?b:0)}else f(0)};return F.useEffect(()=>{x()},[u,d,s]),r.jsxs("div",{className:`px-2 py-1 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"input",className:"w-2 h-2 bg-blue-400",style:{top:"50%"},title:"Input Value"}),r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"text-base font-medium",children:typeof a=="number"?a:String(a)})}),r.jsx(ue,{type:"source",position:ne.Right,id:"output",className:"w-2 h-2 bg-green-400",style:{top:"50%"},title:"Output Value"})]})}function Sj({data:e,id:s,selected:i}){const l=le(v=>v.updateNodeData),a=le(v=>v.disableUIUpdates),[u,d]=Q.useState(0),[f,x]=Q.useState(0),m=nt(),h=rt(),y=F.useRef({a:0,b:0}),b=()=>{const v=h.find(M=>M.target===s&&M.targetHandle==="input-a"),j=h.find(M=>M.target===s&&M.targetHandle==="input-b"),w=M=>{if(!M)return null;const _=m.find(L=>L.id===M.source);if(_!=null&&_.data&&typeof _.data=="object"){const L=M.sourceHandle;let D;if(L&&_.data[L]!==void 0){const R=_.data[L];D=typeof R=="number"?R:void 0}else if("value"in _.data){const R=_.data.value;D=typeof R=="number"?Number(R):void 0}return D??null}return null},N=w(v),E=w(j);if(N!==null&&N!==y.current.a||E!==null&&E!==y.current.b){const M=N??y.current.a,_=E??y.current.b,L=M+_;y.current={a:M,b:_},d(M),x(_),l(s,{...e,value:L})}};return Q.useEffect(()=>{b()},[h,s,m,e]),r.jsxs("div",{className:"relative",style:{width:"80px",height:"80px"},children:[r.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",className:"absolute top-0 left-0",children:[r.jsx("path",{d:"M10,0 L50,0 Q80,0 80,40 Q80,80 50,80 L10,80 L10,0 Z",fill:"white",stroke:i?"#3b82f6":"#d1d5db",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",vectorEffect:"non-scaling-stroke"}),r.jsx("text",{x:"40",y:"30",fontSize:"24",textAnchor:"middle",dominantBaseline:"middle",fill:"#374151",children:"+"}),!a&&r.jsx("text",{x:"40",y:"55",fontSize:"18",textAnchor:"middle",dominantBaseline:"middle",fill:"#374151",fontWeight:"bold",children:e.value??0})]}),r.jsx(ue,{type:"target",position:ne.Left,id:"input-a",className:"w-3 h-3 bg-blue-400",style:{top:"30%",left:"0"},title:"Input A"}),r.jsx(ue,{type:"target",position:ne.Left,id:"input-b",className:"w-3 h-3 bg-blue-400",style:{top:"70%",left:"0"},title:"Input B"}),r.jsx(ue,{type:"source",position:ne.Right,id:"output",className:"w-3 h-3 bg-green-400",style:{top:"50%",right:"0"},title:"Output Sum"})]})}function Ej({data:e,id:s,selected:i}){const l=le(j=>j.updateNodeData),a=nt(),u=rt(),d=Q.useRef({value:0}),[f,x]=Q.useState(!1),[m,h]=Q.useState(e.portCount||2),y=e.portCount||2,b=j=>{if(!j)return null;const w=a.find(N=>N.id===j.source);if(w!=null&&w.data&&typeof w.data=="object"){const N=j.sourceHandle;let E;return N&&w.data[N]!==void 0?E=w.data[N]:"value"in w.data&&(E=w.data.value),typeof E!="string"&&typeof E!="number"&&(E=0),E??null}return null},v=()=>{const j=u.find(N=>N.target===s&&N.targetHandle==="input"),w=b(j);w!==null&&w!==d.current.value&&(d.current.value=w,l(s,{...e,value:w}))};return Q.useEffect(()=>{v()},[u,s,a,e]),r.jsxs("div",{className:`relative w-8 shadow-md rounded-full bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,style:{height:`${Math.max(32,y*16)}px`},children:[r.jsx("button",{onClick:()=>x(!f),className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-1 rounded-md hover:bg-gray-100 z-10",title:"Configure",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),f&&r.jsxs("div",{className:"absolute z-10 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-2",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Count"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>h(Math.max(2,m-1)),className:"px-2 py-1 border rounded-md hover:bg-gray-100",title:"Decrease Branches",children:"-"}),r.jsx("span",{className:"flex-1 text-center",children:m}),r.jsx("button",{onClick:()=>h(Math.min(8,m+1)),className:"px-2 py-1 border rounded-md hover:bg-gray-100",title:"Increase Branches",children:"+"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>{x(!1),h(e.portCount||2)},className:"px-3 py-1 border rounded-md hover:bg-gray-100 text-sm",children:"Cancel"}),r.jsx("button",{onClick:()=>{l(s,{...e,portCount:m}),x(!1)},className:"px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"Confirm"})]})]}),r.jsx(ue,{type:"target",position:ne.Left,id:"input",className:"w-2 h-2 bg-blue-400",style:{top:"50%"},title:"Input"}),Array.from({length:y}).map((j,w)=>r.jsx(ue,{type:"source",position:ne.Right,id:`output-${w+1}`,className:"w-2 h-2 bg-green-400",style:{top:`${(w+1)*(100/(y+1))}%`},title:`Output ${w+1}`},`output-${w+1}`))]})}function Cj({data:e,id:s,selected:i}){const l=le(N=>N.updateNodeData),a=le(N=>N.disableUIUpdates),u=nt(),d=rt(),f=F.useRef(void 0),x=()=>{const N=d.find(E=>E.target===s);if(N){const E=u.find(z=>z.id===N.source);if(E!=null&&E.data&&typeof E.data=="object"&&"value"in E.data){const z=E.data.value;if(z!==f.current){f.current=z;const M=z?parseInt(z,16).toString(2).padStart(32,"0"):"0".repeat(32),_=M.slice(-7),L=M.slice(-12,-7),D=M.slice(-15,-12),R=M.slice(-20,-15),H=M.slice(-25,-20),k=M.slice(-32,-25);l(s,{...e,value:z,opcode:parseInt(_,2),rd:parseInt(L,2),funct3:parseInt(D,2),rs1:parseInt(R,2),rs2:parseInt(H,2),funct7:parseInt(k,2)})}}}};Q.useEffect(()=>{x()},[d,s,u]);const m=e.value?parseInt(e.value,16).toString(2).padStart(32,"0"):"0".repeat(32),h=m.slice(-7),y=m.slice(-12,-7),b=m.slice(-15,-12),v=m.slice(-20,-15),j=m.slice(-25,-20),w=m.slice(-32,-25);return r.jsxs("div",{className:`w-40 py-4 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,className:"w-2 h-2 bg-blue-400",style:{top:"50%"},title:"Instruction Input"}),r.jsxs("div",{className:"flex flex-col space-y-2 px-2",children:[!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"opcode:"}),r.jsx("span",{className:"font-mono",children:h}),r.jsx(ue,{type:"source",position:ne.Right,id:"opcode",className:"w-2 h-2 bg-green-400",style:{top:"1.5rem"},title:"Operation Code"})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"rd:"}),r.jsx("span",{className:"font-mono",children:y}),r.jsx(ue,{type:"source",position:ne.Right,id:"rd",className:"w-2 h-2 bg-green-400",style:{top:"3rem"},title:"Destination Register"})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"funct3:"}),r.jsx("span",{className:"font-mono",children:b}),r.jsx(ue,{type:"source",position:ne.Right,id:"funct3",className:"w-2 h-2 bg-green-400",style:{top:"4.5rem"},title:"Function Code 3"})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"rs1:"}),r.jsx("span",{className:"font-mono",children:v}),r.jsx(ue,{type:"source",position:ne.Right,id:"rs1",className:"w-2 h-2 bg-green-400",style:{top:"6rem"},title:"Source Register 1"})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"rs2:"}),r.jsx("span",{className:"font-mono",children:j}),r.jsx(ue,{type:"source",position:ne.Right,id:"rs2",className:"w-2 h-2 bg-green-400",style:{top:"7.5rem"},title:"Source Register 2"})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"funct7:"}),r.jsx("span",{className:"font-mono",children:w}),r.jsx(ue,{type:"source",position:ne.Right,id:"funct7",className:"w-2 h-2 bg-green-400",style:{top:"9rem"},title:"Function Code 7"})]})]}),a&&r.jsxs("div",{className:"relative",style:{height:"180px"},children:[r.jsx(ue,{type:"source",position:ne.Right,id:"opcode",className:"w-2 h-2 bg-green-400 absolute",style:{top:"1.5rem",right:"-10px"},title:"Operation Code"}),r.jsx(ue,{type:"source",position:ne.Right,id:"rd",className:"w-2 h-2 bg-green-400 absolute",style:{top:"3rem",right:"-10px"},title:"Destination Register"}),r.jsx(ue,{type:"source",position:ne.Right,id:"funct3",className:"w-2 h-2 bg-green-400 absolute",style:{top:"4.5rem",right:"-10px"},title:"Function Code 3"}),r.jsx(ue,{type:"source",position:ne.Right,id:"rs1",className:"w-2 h-2 bg-green-400 absolute",style:{top:"6rem",right:"-10px"},title:"Source Register 1"}),r.jsx(ue,{type:"source",position:ne.Right,id:"rs2",className:"w-2 h-2 bg-green-400 absolute",style:{top:"7.5rem",right:"-10px"},title:"Source Register 2"}),r.jsx(ue,{type:"source",position:ne.Right,id:"funct7",className:"w-2 h-2 bg-green-400 absolute",style:{top:"9rem",right:"-10px"},title:"Function Code 7"})]})]})]})}function kj({data:e,id:s,selected:i}){var h,y;const l=le(b=>b.updateNodeData),a=le(b=>b.disableUIUpdates),u=nt(),d=rt(),f=Q.useRef({funct3:0,opcode:0,zero:0}),x=b=>{if(!b)return null;const v=u.find(j=>j.id===b.source);if(v!=null&&v.data&&typeof v.data=="object"){const j=b.sourceHandle;let w;if(j&&v.data[j]!==void 0){const N=v.data[j];w=typeof N=="number"?N:void 0}else if("value"in v.data){const N=v.data.value;w=typeof N=="number"?N:void 0}return w??null}return null},m=()=>{const b=d.filter(j=>j.target===s);let v=!1;if(b.forEach(j=>{const w=x(j),N=j.targetHandle;if(w!==null&&!isNaN(w))switch(N){case"funct3":f.current.funct3!==w&&(f.current.funct3=w,v=!0);break;case"opcode":f.current.opcode!==w&&(f.current.opcode=w,v=!0);break;case"zero":f.current.zero!==w&&(f.current.zero=w,v=!0);break}}),v){const j=f.current.funct3.toString(2).padStart(3,"0"),w=f.current.opcode.toString(2).padStart(7,"0"),N=f.current.zero;let E=0,z=0;if(w==="1101111")E=1,z=0;else if(w==="1100111")E=1,z=1;else if(w==="1100011")switch(j){case"000":E=N?1:0;break;case"001":E=N?0:1;break;case"100":case"110":E=N?0:1;break;case"101":case"111":E=N?1:0;break}l(s,{...e,funct3:f.current.funct3,opcode:f.current.opcode,zero:N,jump:E,jalr:z})}};return Q.useEffect(()=>{m()},[u,d,s]),r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx(ue,{type:"target",position:ne.Left,id:"funct3",className:"w-3 h-3 bg-blue-400",style:{top:"30%"},title:"Function Code 3"}),r.jsx(ue,{type:"target",position:ne.Left,id:"opcode",className:"w-3 h-3 bg-blue-400",style:{top:"50%"},title:"Operation Code"}),r.jsx(ue,{type:"target",position:ne.Left,id:"zero",className:"w-3 h-3 bg-blue-400",style:{top:"70%"},title:"ALU Zero Flag"}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"ml-2",children:[r.jsx("div",{className:"text-lg font-bold",children:"Jump Control"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-gray-500",children:["Funct3: ",((h=e.funct3)==null?void 0:h.toString(2).padStart(3,"0"))||"000"]}),r.jsxs("div",{className:"text-gray-500",children:["Opcode: ",((y=e.opcode)==null?void 0:y.toString(2).padStart(7,"0"))||"0000000"]}),r.jsxs("div",{className:"text-gray-500",children:["Zero: ",e.zero||0]}),r.jsxs("div",{className:"text-gray-500",children:["Jump: ",e.jump||0]}),r.jsxs("div",{className:"text-gray-500",children:["Jalr: ",e.jalr||0]})]}),a&&r.jsx("div",{style:{height:"100px"}})]})}),r.jsx(ue,{type:"source",position:ne.Right,id:"jump",className:"w-3 h-3 bg-green-400",style:{top:"40%"},title:"Jump Control Signal"}),r.jsx(ue,{type:"source",position:ne.Right,id:"jalr",className:"w-3 h-3 bg-green-400",style:{top:"60%"},title:"JALR Control Signal"})]})}function Ij({data:e,id:s,selected:i}){const l=le(R=>R.updateNodeData),a=le(R=>R.stepCount),u=le(R=>R.disableUIUpdates),d=e.name||"IF/ID",f=e.reset??!1,x=e.portCount??1,m=e.values??Array(x).fill(0),h=e.writeEnable??1,y=e.flush??0,[b,v]=Q.useState(Array(x).fill(0)),[j,w]=F.useState(!1),[N,E]=F.useState({name:d,portCount:x}),z=nt(),M=rt(),_=R=>{l(s,{...e,values:R})};Q.useEffect(()=>{if(f){const R=Array(x).fill(0);_(R),v(R);const H=R.reduce((k,T,I)=>(k[`output-${I}`]=0,k),{});l(s,{...e,values:R,reset:!1,...H})}},[f,x]);const L=()=>{const R=[...b];let H=!1;if(d==="IF/ID"){const k=M.find(I=>I.target===s&&I.targetHandle==="writeEnable");let T=1;if(k){const I=z.find($=>$.id===k.source);if(I!=null&&I.data&&typeof I.data=="object"){const $=I.data[k.sourceHandle];T=typeof $=="number"?$:1}}T!==e.writeEnable&&l(s,{...e,writeEnable:T})}if(d==="IF/ID"||d==="ID/EX"){const k=M.find(I=>I.target===s&&I.targetHandle==="flush");let T=0;if(k){const I=z.find($=>$.id===k.source);if(I!=null&&I.data&&typeof I.data=="object"){const $=I.data[k.sourceHandle];T=typeof $=="number"?$:0}}T!==e.flush&&l(s,{...e,flush:T})}for(let k=0;k<x;k++){const T=M.find(I=>I.target===s&&I.targetHandle===`input-${k}`);if(T){const I=z.find($=>$.id===T.source);if(I!=null&&I.data&&typeof I.data=="object"){const $=T.sourceHandle;let W;if($&&I.data[$]!==void 0){const S=I.data[$];W=typeof S=="number"||typeof S=="string"?S:void 0}else if("value"in I.data){const S=I.data.value;W=typeof S=="number"||typeof S=="string"?S:void 0}W!==void 0&&W!==R[k]&&(R[k]=W,H=!0)}}}H&&v(R)};Q.useEffect(()=>{L()},[z,M,s,x]),Q.useEffect(()=>{if(!f){if(y===1){const R=Array(x).fill(0);_(R);const H=R.reduce((k,T,I)=>(k[`output-${I}`]=0,k),{});l(s,{...e,values:R,...H,flush:0}),v(R);return}if(d!=="IF/ID"||h===1){const R=[...b];_(R);const H=R.reduce((k,T,I)=>(k[`output-${I}`]=T,k),{});l(s,{...e,values:R,...H})}}},[a]),m.reduce((R,H,k)=>(R[`output-${k}`]=H,R),{});const D=Math.max(160,x*60);return r.jsx("div",{className:`relative py-4 shadow-md rounded-md bg-white border-2 w-[120px] ${i?"border-blue-500":"border-gray-200"}`,style:{height:D},children:r.jsxs("div",{className:"flex flex-col items-center h-full",children:[r.jsxs("div",{className:"flex items-center justify-between w-full px-2 mb-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:d}),r.jsx("button",{onClick:()=>w(!j),className:"p-1 rounded-md hover:bg-gray-100",title:"Configure",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})})]}),r.jsxs("div",{className:"flex justify-center w-full",children:[d==="IF/ID"&&r.jsx(ue,{type:"target",position:ne.Top,id:"writeEnable",className:"w-3 h-3 bg-blue-400",style:{left:"30%",top:-6},title:"Write Enable"}),(d==="IF/ID"||d==="ID/EX")&&r.jsx(ue,{type:"target",position:ne.Top,id:"flush",className:"w-3 h-3 bg-red-400",style:{left:"70%",top:-6},title:"Flush"}),d!=="IF/ID"&&d!=="ID/EX"&&r.jsx("div",{style:{height:"15px"}})]}),!u&&r.jsxs("div",{className:"w-full mb-4 px-2",children:[d==="IF/ID"&&r.jsxs("div",{className:"text-xs text-gray-600",children:["Write: ",h]}),(d==="IF/ID"||d==="ID/EX")&&r.jsxs("div",{className:"text-xs text-gray-600",children:["Flush: ",y]})]}),j&&r.jsxs("div",{className:"absolute z-10 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-2",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Register Type"}),r.jsxs("select",{className:"w-full border rounded px-2 py-1 text-sm",value:d,onChange:R=>{const H=R.target.value;E(k=>({...k,name:H}))},children:[r.jsx("option",{value:"IF/ID",children:"IF/ID"}),r.jsx("option",{value:"ID/EX",children:"ID/EX"}),r.jsx("option",{value:"EX/MEM",children:"EX/MEM"}),r.jsx("option",{value:"MEM/WB",children:"MEM/WB"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port Count"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>E(R=>({...R,portCount:Math.max(1,(R.portCount??x)-1)})),className:"px-2 py-1 border rounded-md hover:bg-gray-100",children:"-"}),r.jsx("span",{className:"text-sm",children:N.portCount}),r.jsx("button",{onClick:()=>E(R=>({...R,portCount:Math.min(20,(R.portCount??x)+1)})),className:"px-2 py-1 border rounded-md hover:bg-gray-100",children:"+"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>w(!1),className:"px-3 py-1.5 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:()=>{if(N.name!==d||N.portCount!==x){const R=N.portCount??x,H=Array(R).fill(0);for(let k=0;k<Math.min(x,R);k++)H[k]=m[k];l(s,{...e,name:N.name,portCount:R,values:H}),v(H)}w(!1)},className:"px-3 py-1.5 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600",children:"Apply"})]})]}),r.jsx("div",{className:"flex-1 w-full relative",children:Array.from({length:x}).map((R,H)=>{const k=H*(100/x)+100/(2*x);return r.jsxs("div",{className:"flex w-full items-center justify-between absolute left-0 right-0 px-2",style:{top:`${k}%`},children:[r.jsx(ue,{type:"target",position:ne.Left,id:`input-${H}`,className:"w-3 h-3 bg-blue-400",style:{left:-6},title:`Input ${H}`}),!u&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-xs text-gray-500 mx-2",children:["In: ",b[H]]}),r.jsx("div",{className:"text-xs font-medium text-gray-700 mx-2",children:m[H]})]}),r.jsx(ue,{type:"source",position:ne.Right,id:`output-${H}`,className:"w-3 h-3 bg-green-400",style:{right:-6},title:`Output ${H}`})]},H)})})]})})}function Rj({data:e,id:s,selected:i}){const l=le(h=>h.updateNodeData),a=le(h=>h.disableUIUpdates),u=nt(),d=rt(),f=Q.useRef({rs1:0,rs2:0,exMemRd:0,memWbRd:0,exMemRegWrite:0,memWbRegWrite:0}),x=()=>{const h=d.find(k=>k.target===s&&k.targetHandle==="rs1"),y=d.find(k=>k.target===s&&k.targetHandle==="rs2"),b=d.find(k=>k.target===s&&k.targetHandle==="exMemRd"),v=d.find(k=>k.target===s&&k.targetHandle==="memWbRd"),j=d.find(k=>k.target===s&&k.targetHandle==="exMemRegWrite"),w=d.find(k=>k.target===s&&k.targetHandle==="memWbRegWrite");let N=0,E=0,z=0,M=0,_=0,L=0;if(h){const k=u.find(T=>T.id===h.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=h.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}N=I??0}}if(y){const k=u.find(T=>T.id===y.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=y.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}E=I??0}}if(b){const k=u.find(T=>T.id===b.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=b.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}z=I??0}}if(v){const k=u.find(T=>T.id===v.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=v.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}M=I??0}}if(j){const k=u.find(T=>T.id===j.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=j.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}_=I??0}}if(w){const k=u.find(T=>T.id===w.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=w.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}L=I??0}}let D=0,R=0;z!==0&&z===N&&_===1?D=2:M!==0&&M===N&&L===1&&(D=1),z!==0&&z===E&&_===1?R=2:M!==0&&M===E&&L===1&&(R=1),(N!==f.current.rs1||E!==f.current.rs2||z!==f.current.exMemRd||M!==f.current.memWbRd||_!==f.current.exMemRegWrite||L!==f.current.memWbRegWrite)&&(f.current={rs1:N,rs2:E,exMemRd:z,memWbRd:M,exMemRegWrite:_,memWbRegWrite:L},l(s,{...e,rs1:N,rs2:E,exMemRd:z,memWbRd:M,exMemRegWrite:_,memWbRegWrite:L,forwardA:D,forwardB:R}))},m=Q.useMemo(()=>d.filter(h=>h.target===s).map(h=>{const y=u.find(b=>b.id===h.source);return y!=null&&y.data&&typeof y.data=="object"?y.data[h.sourceHandle]:null}),[u,d,s]);return Q.useEffect(()=>{x()},[m]),r.jsxs("div",{className:`px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx("div",{className:"text-sm font-bold mb-2",children:"Forwarding Unit"}),r.jsx(ue,{type:"target",position:ne.Left,id:"rs1",className:"w-3 h-3 bg-blue-400",style:{top:"35%"},title:"ID/EX.Rs1 - Current instruction's rs1 register number"}),r.jsx(ue,{type:"target",position:ne.Left,id:"rs2",className:"w-3 h-3 bg-blue-400",style:{top:"65%"},title:"ID/EX.Rs2 - Current instruction's rs2 register number"}),r.jsx(ue,{type:"target",position:ne.Right,id:"exMemRd",className:"w-3 h-3 bg-blue-400",style:{top:"25%"},title:"EX/MEM.Rd - Previous instruction's destination register"}),r.jsx(ue,{type:"target",position:ne.Right,id:"exMemRegWrite",className:"w-3 h-3 bg-blue-400",style:{top:"40%"},title:"EX/MEM.RegWrite - Previous instruction's register write control signal"}),r.jsx(ue,{type:"target",position:ne.Right,id:"memWbRd",className:"w-3 h-3 bg-blue-400",style:{top:"60%"},title:"MEM/WB.Rd - Two instructions ago's destination register"}),r.jsx(ue,{type:"target",position:ne.Right,id:"memWbRegWrite",className:"w-3 h-3 bg-blue-400",style:{top:"75%"},title:"MEM/WB.RegWrite - Two instructions ago's register write control signal"}),!a&&r.jsxs("div",{className:"text-xs text-gray-600 mt-2 border-t pt-1 border-gray-100",children:[r.jsx("div",{className:"font-semibold",children:"Inputs:"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"ID/EX.Rs1:"}),r.jsx("span",{children:e.rs1||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"ID/EX.Rs2:"}),r.jsx("span",{children:e.rs2||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"EX/MEM.Rd:"}),r.jsx("span",{children:e.exMemRd||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"MEM/WB.Rd:"}),r.jsx("span",{children:e.memWbRd||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"EX/MEM.RegWrite:"}),r.jsx("span",{children:e.exMemRegWrite||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"MEM/WB.RegWrite:"}),r.jsx("span",{children:e.memWbRegWrite||0})]})]}),!a&&r.jsxs("div",{className:"text-xs text-gray-600 mt-2 border-t pt-1 border-gray-100",children:[r.jsx("div",{className:"font-semibold",children:"Outputs:"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Forward A:"}),r.jsx("span",{children:e.forwardA||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Forward B:"}),r.jsx("span",{children:e.forwardB||0})]})]}),a&&r.jsx("div",{style:{height:"150px"}}),r.jsx(ue,{type:"source",position:ne.Top,id:"forwardA",className:"w-3 h-3 bg-green-400",style:{left:"35%"},title:"Forward A - ALU operand A selection signal"}),r.jsx(ue,{type:"source",position:ne.Top,id:"forwardB",className:"w-3 h-3 bg-green-400",style:{left:"65%"},title:"Forward B - ALU operand B selection signal"})]})}function Mj({data:e,id:s,selected:i}){const l=le(h=>h.updateNodeData),a=le(h=>h.disableUIUpdates),u=nt(),d=rt(),f=Q.useRef({idExMemRead:0,idExRt:0,ifIdRs:0,ifIdRt:0}),x=()=>{const h=H=>{if(!H)return null;const k=u.find(T=>T.id===H.source);if(k!=null&&k.data&&typeof k.data=="object"){const T=H.sourceHandle;let I;if(T&&k.data[T]!==void 0){const $=k.data[T];I=typeof $=="number"?$:void 0}else if("value"in k.data){const $=k.data.value;I=typeof $=="number"?$:void 0}return I??null}return null},y=d.find(H=>H.target===s&&H.targetHandle==="idExMemRead"),b=d.find(H=>H.target===s&&H.targetHandle==="idExRt"),v=d.find(H=>H.target===s&&H.targetHandle==="ifIdRs"),j=d.find(H=>H.target===s&&H.targetHandle==="ifIdRt"),w=h(y)??0,N=h(b)??0,E=h(v)??0,z=h(j)??0;let M=1,_=1,L=0,D=!1;w===1&&(N===E||N===z)&&N!==0&&(M=0,_=0,L=1,D=!0),(w!==f.current.idExMemRead||N!==f.current.idExRt||E!==f.current.ifIdRs||z!==f.current.ifIdRt)&&(f.current={idExMemRead:w,idExRt:N,ifIdRs:E,ifIdRt:z},l(s,{...e,idExMemRead:w,idExRt:N,ifIdRs:E,ifIdRt:z,pcWrite:M,ifIdWrite:_,controlMux:L,hazardDetected:D}))};Q.useEffect(()=>{x()},[u,d]);const m=e.hazardDetected||!1;return r.jsxs("div",{className:`px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":m?"border-red-500":"border-gray-200"}`,children:[r.jsxs("div",{className:"text-sm font-bold mb-2 flex items-center justify-between",children:[r.jsx("span",{children:"Hazard Detection"}),!a&&m&&r.jsx("span",{className:"ml-2 px-1 py-0.5 text-xs bg-red-100 text-red-800 rounded",children:"Hazard!"})]}),r.jsx(ue,{type:"target",position:ne.Left,id:"idExMemRead",className:"w-3 h-3 bg-blue-400",style:{top:"20%"},title:"ID/EX.MemRead"}),r.jsx(ue,{type:"target",position:ne.Left,id:"idExRt",className:"w-3 h-3 bg-blue-400",style:{top:"40%"},title:"ID/EX.Rt"}),r.jsx(ue,{type:"target",position:ne.Left,id:"ifIdRs",className:"w-3 h-3 bg-blue-400",style:{top:"60%"},title:"IF/ID.Rs"}),r.jsx(ue,{type:"target",position:ne.Left,id:"ifIdRt",className:"w-3 h-3 bg-blue-400",style:{top:"80%"},title:"IF/ID.Rt"}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-xs text-gray-600 mt-2 border-t pt-1 border-gray-100",children:[r.jsx("div",{className:"font-semibold",children:"Inputs:"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"ID/EX.MemRead:"}),r.jsx("span",{children:e.idExMemRead||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"ID/EX.Rt:"}),r.jsx("span",{children:e.idExRt||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"IF/ID.Rs:"}),r.jsx("span",{children:e.ifIdRs||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"IF/ID.Rt:"}),r.jsx("span",{children:e.ifIdRt||0})]})]}),r.jsxs("div",{className:`text-xs mt-2 pt-1 border-t ${m?"text-red-600 border-red-200":"text-gray-600 border-gray-100"}`,children:[r.jsx("div",{className:"font-semibold",children:"Outputs:"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"PC Write:"}),r.jsx("span",{children:e.pcWrite!==void 0?e.pcWrite:1})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"IF/ID Write:"}),r.jsx("span",{children:e.ifIdWrite!==void 0?e.ifIdWrite:1})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Control Mux:"}),r.jsx("span",{children:e.controlMux!==void 0?e.controlMux:0})]}),r.jsx("div",{className:"mt-1 text-center",children:m?r.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-0.5 rounded font-medium",children:"Load-Use Hazard Detected!"}):r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded font-medium",children:"No Hazard"})})]})]}),a&&r.jsx("div",{style:{height:"180px"}}),r.jsx(ue,{type:"source",position:ne.Right,id:"pcWrite",className:"w-3 h-3 bg-green-400",style:{top:"25%"},title:"PC Write"}),r.jsx(ue,{type:"source",position:ne.Right,id:"ifIdWrite",className:"w-3 h-3 bg-green-400",style:{top:"50%"},title:"IF/ID Write"}),r.jsx(ue,{type:"source",position:ne.Right,id:"controlMux",className:"w-3 h-3 bg-green-400",style:{top:"75%"},title:"Control Mux"})]})}function _j({data:e,id:s,selected:i}){const l=le(h=>h.updateNodeData),a=le(h=>h.disableUIUpdates),u=nt(),d=rt(),f=Q.useRef({branchTaken:0}),x=h=>{if(!h)return null;const y=u.find(b=>b.id===h.source);if(y!=null&&y.data&&typeof y.data=="object"){const b=h.sourceHandle;let v;if(b&&y.data[b]!==void 0){const j=y.data[b];v=typeof j=="number"?j:void 0}else if("value"in y.data){const j=y.data.value;v=typeof j=="number"?j:void 0}return v??null}return null},m=()=>{const h=d.find(N=>N.target===s&&N.targetHandle==="branchTaken"),y=x(h)??0;let b=0,v=0,j=!1;y===1&&(b=1,v=1,j=!0);const w=y!==f.current.branchTaken;f.current.branchTaken=y,w&&l(s,{...e,branchTaken:y,ifIdFlush:b,idExFlush:v,hazardDetected:j})};return Q.useEffect(()=>{m()},[u,d,s]),r.jsxs("div",{className:`relative px-4 py-2 shadow-md rounded-md bg-white border-2 ${i?"border-blue-500":"border-gray-200"}`,children:[r.jsx("div",{className:"text-lg font-bold mb-2",children:"Branch Hazard Unit"}),r.jsx(ue,{type:"target",position:ne.Left,id:"branchTaken",className:"w-3 h-3 bg-blue-400",style:{top:"50%"},title:"Branch Taken Signal"}),!a&&r.jsxs("div",{className:`text-xs mt-2 pt-1 border-t ${e.hazardDetected?"text-red-600 border-red-200":"text-gray-600 border-gray-100"}`,children:[r.jsx("div",{className:"font-semibold",children:"Inputs:"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Branch Taken:"}),r.jsx("span",{children:e.branchTaken!==void 0?e.branchTaken:0})]}),r.jsx("div",{className:"font-semibold mt-2",children:"Outputs:"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"IF/ID Flush:"}),r.jsx("span",{children:e.ifIdFlush!==void 0?e.ifIdFlush:0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"ID/EX Flush:"}),r.jsx("span",{children:e.idExFlush!==void 0?e.idExFlush:0})]}),r.jsx("div",{className:"mt-1 text-center",children:e.hazardDetected?r.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-0.5 rounded font-medium",children:"Control Hazard Detected!"}):r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded font-medium",children:"No Control Hazard"})})]}),a&&r.jsx("div",{style:{height:"120px"}}),r.jsx(ue,{type:"source",position:ne.Right,id:"ifIdFlush",className:"w-3 h-3 bg-red-400",style:{top:"40%"},title:"IF/ID Flush Signal"}),r.jsx(ue,{type:"source",position:ne.Right,id:"idExFlush",className:"w-3 h-3 bg-red-400",style:{top:"60%"},title:"ID/EX Flush Signal"})]})}const Fu=(e,s,i,l)=>Math.sqrt(Math.pow(i-e,2)+Math.pow(l-s,2)),zj=(e,s,i,l,a,u)=>{const d=e-i,f=s-l,x=a-i,m=u-l,h=d*x+f*m,y=x*x+m*m;let b=-1;y!==0&&(b=h/y);let v,j;return b<0?(v=i,j=l):b>1?(v=a,j=u):(v=i+b*x,j=l+b*m),{x:v,y:j,distance:Fu(e,s,v,j),t:b}},Zp=(e,s,i,l,a=[])=>{let u=`M ${e},${s}`;return a.forEach(d=>{u+=` L ${d.x},${d.y}`}),u+=` L ${i},${l}`,u},Pj=(e,s,i,l,a=[],u="straight")=>{if(u==="straight")return Zp(e,s,i,l,a);if(u==="step"){if(a.length===0){const f=(e+i)/2;return`M ${e},${s} H ${f} V ${l} H ${i}`}let d=`M ${e},${s}`;return a.forEach((f,x)=>{x===0?d+=` H ${f.x} V ${f.y}`:d+=` H ${f.x} V ${f.y}`}),d+=` H ${i} V ${l}`,d}return Zp(e,s,i,l)};function Aj({id:e,sourceX:s,sourceY:i,targetX:l,targetY:a,style:u={},markerEnd:d,data:f,selected:x}){const m=ua(),[h,y]=F.useState(null),b=f||{},v=b.intermediatePoints||[],j=b.lineType||"straight",w=Pj(s,i,l,a,v,j),N=F.useCallback(R=>{if(!x||(R.stopPropagation(),R.target.classList.contains("point-handle")))return;const H=m.screenToFlowPosition({x:R.clientX,y:R.clientY});let k={index:-1,point:{x:0,y:0,distance:1/0}},T=[{x:s,y:i},...v,{x:l,y:a}];for(let U=0;U<T.length-1;U++){const q=zj(H.x,H.y,T[U].x,T[U].y,T[U+1].x,T[U+1].y);q.distance<k.point.distance&&(k={index:U,point:q})}if(k.index===-1)return;const I=24,$=12,S=z(k.point.x,k.point.y,m,15);let O,P;S.isSnapped?(O=S.x,P=S.y):(O=E(k.point.x,I,$),P=E(k.point.y,I,$));const Y={x:O,y:P},X=[...v];X.splice(k.index,0,Y),m.setEdges(U=>U.map(q=>q.id===e?{...q,data:{...q.data,intermediatePoints:X}}:q))},[e,s,i,l,a,v,m,x]),E=(R,H,k=10)=>{const T=Math.round(R/H)*H;return Math.abs(R-T)<=k?T:R},z=(R,H,k,T=15)=>{const I=k.getNodes();let $={x:R,y:H,isSnapped:!1},W=T;return I.forEach(S=>{const O=S.position.x+(S.width||0)/2,P=S.position.y+(S.height||0)/2,Y=Fu(R,H,O,P);Y<W&&(W=Y,$={x:O,y:P,isSnapped:!0}),[{x:S.position.x,y:S.position.y},{x:S.position.x+(S.width||0),y:S.position.y},{x:S.position.x,y:S.position.y+(S.height||0)},{x:S.position.x+(S.width||0),y:S.position.y+(S.height||0)}].forEach(U=>{const q=Fu(R,H,U.x,U.y);q<W&&(W=q,$={x:U.x,y:U.y,isSnapped:!0})})}),$},[M,_]=F.useState(!1),L=F.useCallback((R,H)=>{R.preventDefault(),R.stopPropagation(),y(H),_(!0);const k=I=>{I.preventDefault(),I.stopPropagation();const $=m.screenToFlowPosition({x:I.clientX,y:I.clientY}),W=24,S=12,P=z($.x,$.y,m,15);let Y,X,U=!1;P.isSnapped?(Y=P.x,X=P.y,U=!0):(Y=E($.x,W,S),X=E($.y,W,S),U=Math.abs(Y-$.x)<=S||Math.abs(X-$.y)<=S);const q=[...v];q[H]={x:Y,y:X},U?document.body.classList.add("snapping-active"):document.body.classList.remove("snapping-active"),m.setEdges(A=>A.map(V=>V.id===e?{...V,data:{...V.data,intermediatePoints:q}}:V))},T=I=>{I&&(I.preventDefault(),I.stopPropagation()),y(null),_(!1),window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",T),document.body.classList.remove("dragging-point"),document.body.classList.remove("snapping-active")};window.addEventListener("mousemove",k),window.addEventListener("mouseup",T),document.body.classList.add("dragging-point")},[e,v,m]),D=F.useCallback((R,H)=>{R.preventDefault(),R.stopPropagation();const k=[...v];k.splice(H,1),m.setEdges(T=>T.map(I=>I.id===e?{...I,data:{...I.data,intermediatePoints:k}}:I))},[e,v,m]);return F.useEffect(()=>()=>{document.body.classList.remove("dragging-point"),document.body.classList.remove("snapping-active")},[]),F.useEffect(()=>{if(!document.getElementById("editable-edge-styles")){const R=document.createElement("style");R.id="editable-edge-styles",R.innerHTML=`
        .snapping-active .point-handle {
          filter: drop-shadow(0 0 5px #3b82f6);
          transform: scale(1.2);
          transition: transform 0.1s ease-out;
        }
        .dragging-point {
          cursor: grabbing !important;
        }
      `,document.head.appendChild(R)}return()=>{const R=document.getElementById("editable-edge-styles");R&&document.head.removeChild(R)}},[]),r.jsxs(r.Fragment,{children:[r.jsx("path",{className:"react-flow__edge-interaction",d:w,strokeWidth:20,stroke:"transparent",fill:"none",onClick:N}),r.jsx("path",{className:"react-flow__edge-path",d:w,id:e,style:u,markerEnd:d}),x&&v.map((R,H)=>r.jsxs("g",{className:"editable-edge-point-group","data-id":`${e}-${H}`,"data-testid":`edge-point-${e}-${H}`,transform:`translate(${R.x}, ${R.y})`,pointerEvents:"all",children:[r.jsx("circle",{r:15,fill:"transparent",style:{cursor:"grab"},onMouseDown:k=>L(k,H)}),r.jsx("circle",{className:"point-handle",r:7,fill:h===H?"#ff0072":"#ff6b00",stroke:"#fff",strokeWidth:2,onMouseDown:k=>L(k,H),onContextMenu:k=>D(k,H),style:{cursor:"grab"}})]},`${e}-${H}`))]})}const Tj={alu:fj,register:pj,mux:mj,"imm-gen":hj,control:xj,memory:gj,"instruction-memory":yj,"alu-control":bj,pc:vj,constant:wj,"single-register":Nj,"pipeline-register":Ij,label:jj,add:Sj,fork:Ej,"instr-distributer":Cj,"jump-control":kj,"forwarding-unit":Rj,"hazard-detection-unit":Mj,"branch-hazard-unit":_j},Lj={editableEdge:Aj},Dj={pc:{min:1,max:1},alu:{min:1,max:1},register:{min:1,max:1},"instruction-memory":{min:1,max:1},memory:{min:1,max:1},control:{min:1,max:1},"alu-control":{min:1,max:1}};function $j(){const{nodes:e,edges:s,addNode:i,addEdge:l,setSelectedNode:a,setSelectedEdge:u,selectedNode:d,selectedEdge:f,removeNode:x,removeEdge:m,isSimulating:h,toggleSimulation:y,resetSimulation:b,stepSimulation:v,updateNodes:j,disableUIUpdates:w,toggleUIUpdates:N}=le(),[E,z]=F.useState("smoothstep"),[M,_]=F.useState(En.Loose),[L,D]=F.useState(!1),[R,H]=F.useState("#999"),[k,T]=F.useState(3),[I,$]=F.useState(!1),[W,S]=F.useState("step");Q.useEffect(()=>{fetch("/Interactive-RISC-V-Simulator/datapath/basic-datapath.json").then(J=>J.json()).then(J=>{le.getState().loadCircuit(JSON.stringify(J))}).catch(J=>{console.error("Error loading basic datapath:",J)})},[]);const O=F.useCallback(()=>{const J=[],ie={};e.forEach(ce=>{ce.type&&(ie[ce.type]=(ie[ce.type]||0)+1)}),Object.entries(Dj).forEach(([ce,{min:je,max:ke}])=>{const Re=ie[ce]||0;Re<je?J.push(`Missing required component: ${ce}`):Re>ke&&J.push(`Too many ${ce} components, maximum allowed: ${ke}`)});const pe=new Set;s.forEach(ce=>{pe.add(ce.source),pe.add(ce.target)}),e.forEach(ce=>{pe.has(ce.id)||J.push(`Component ${ce.type} (${ce.id}) is not connected to any other component`)}),J.length===0?alert("Datapath validation passed! All required components are properly configured."):alert(`Datapath validation failed:
`+J.join(`
`))},[e,s]),P=F.useCallback(()=>{a(null),u(null),le.setState(J=>({edges:J.edges.map(ie=>({...ie,selected:!1,data:{...ie.data,isHighlighted:!1},style:{...ie.style,stroke:R,strokeWidth:k},markerEnd:{type:"arrow",width:20,height:20,color:R}}))}))},[a,u,R,k]),Y=F.useCallback(J=>{const ie=Uh(J,e);j(ie)},[e,j]),X=F.useCallback(J=>{const ie=iN(J,s);le.setState(pe=>({edges:ie}))},[s]),U=F.useCallback((J,ie)=>{J.stopPropagation(),u(ie),le.setState(pe=>({edges:pe.edges.map(ce=>({...ce,selected:ce.id===ie.id,data:{...ce.data,isHighlighted:!1},style:{...ce.style,stroke:ce.id===ie.id?"#3b82f6":R,strokeWidth:ce.id===ie.id?k+1:k,strokeDasharray:ce.type==="editableEdge"&&ce.id===ie.id?"5,5":void 0},markerEnd:{type:"arrow",width:20,height:20,color:ce.id===ie.id?"#3b82f6":R}}))}))},[u,R,k]),q=F.useCallback(J=>{const ie=e.find(je=>je.id===J.source),pe=e.find(je=>je.id===J.target);if(ie&&pe&&ie.type==="constant"&&pe.type==="label"){const je=ie.data.value??0;le.getState().updateNodeData(pe.id,{...pe.data,value:je})}const ce={...J,type:E,animated:L,style:{stroke:R,strokeWidth:k},markerEnd:{type:"arrow",width:20,height:20,color:R},data:E==="editableEdge"?{intermediatePoints:[],lineType:W}:void 0,selectable:!0,focusable:!0,updatable:!0};l(ce)},[l,E,L,R,k,e,W]),A=F.useCallback(J=>{J.preventDefault();const ie=J.dataTransfer.getData("application/reactflow");if(!ie)return;const pe={x:J.clientX-J.currentTarget.getBoundingClientRect().left,y:J.clientY-J.currentTarget.getBoundingClientRect().top},ce={id:`${ie}-${Date.now()}`,type:ie,position:pe,data:{label:ie.toUpperCase()}};i(ce)},[i]),V=F.useCallback(J=>{J.preventDefault(),J.dataTransfer.dropEffect="move"},[]),K=F.useCallback((J,ie)=>{a(ie);const pe=s.filter(ce=>ce.source===ie.id||ce.target===ie.id);le.setState(ce=>({edges:ce.edges.map(je=>({...je,data:{...je.data,isHighlighted:pe.some(ke=>ke.id===je.id)},style:{...je.style,stroke:je.selected?"#3b82f6":pe.some(ke=>ke.id===je.id)?"#ff6b00":R,strokeWidth:je.selected||pe.some(ke=>ke.id===je.id)?k+1:k},markerEnd:{type:"arrow",width:20,height:20,color:je.selected?"#3b82f6":pe.some(ke=>ke.id===je.id)?"#ff6b00":R}}))}))},[a,s,R,k]),re=[{value:"default",label:"default"},{value:"step",label:"step"},{value:"smoothstep",label:"smoothstep"},{value:"editableEdge",label:"editable"}],oe={type:E,animated:L,style:{stroke:R,strokeWidth:k},markerEnd:{type:"arrow",width:20,height:20,color:R}},ae=[{value:En.Strict,label:"Strict"},{value:En.Loose,label:"Loose"}];return r.jsx("div",{className:"w-full h-full",children:r.jsxs(tx,{nodes:e,edges:s.map(J=>{var ie,pe,ce,je,ke;return{...J,style:{...oe.style,stroke:J.selected?"#3b82f6":(ie=J.data)!=null&&ie.isHighlighted?"#ff6b00":R,strokeWidth:J.selected||(pe=J.data)!=null&&pe.isHighlighted?k+1:k,strokeDasharray:J.type==="editableEdge"&&J.selected?"5,5":void 0},markerEnd:{type:"arrow",width:20,height:20,color:J.selected?"#3b82f6":(ce=J.data)!=null&&ce.isHighlighted?"#ff6b00":R},data:{...J.data,...J.type==="editableEdge"&&{intermediatePoints:((je=J.data)==null?void 0:je.intermediatePoints)||[],lineType:((ke=J.data)==null?void 0:ke.lineType)||"step"}},selectable:!0,focusable:!0,updatable:!0,interactionWidth:20}}),onConnect:q,onDrop:A,onDragOver:V,onNodeClick:K,onEdgeClick:U,onNodesChange:Y,onEdgesChange:X,onPaneClick:P,nodeTypes:Tj,edgeTypes:Lj,nodesConnectable:!0,nodesDraggable:!0,edgesUpdatable:!0,edgesFocusable:!0,selectNodesOnDrag:!1,defaultEdgeOptions:oe,connectionMode:M,minZoom:.2,maxZoom:3,panOnScroll:!0,panOnDrag:!f,fitView:!0,children:[r.jsx(dj,{variant:Kt.Dots,gap:24,size:1.5,color:"#bbb"}),r.jsx(ij,{}),f&&f.type==="editableEdge"&&r.jsx(Yl,{position:"bottom-center",className:"bg-white p-2 rounded-lg shadow-lg mb-4",children:r.jsxs("div",{className:"text-xs text-gray-600",children:[r.jsx("strong",{children:"Editable Edge:"})," Click on edge to add points  Drag points to reposition  Right-click points to delete"]})}),r.jsx(Yl,{position:"top-right",className:"bg-white p-2 rounded-lg shadow-lg mr-4 mt-4",children:r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("div",{className:"flex items-center justify-between mb-1",children:r.jsxs("button",{onClick:()=>$(!I),className:"text-sm text-gray-600 hover:text-gray-900 flex items-center",children:["Setting ",I?"":""]})}),I&&r.jsxs("div",{className:"space-y-2 p-2 bg-gray-50 rounded",children:[r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Edge Type"}),r.jsx("select",{value:E,onChange:J=>{const ie=J.target.value;z(ie),le.getState().updateEdgeType(ie),ie==="editableEdge"&&le.setState(pe=>({edges:pe.edges.map(ce=>{var je,ke;return{...ce,data:{...ce.data,intermediatePoints:((je=ce.data)==null?void 0:je.intermediatePoints)||[],lineType:((ke=ce.data)==null?void 0:ke.lineType)||"step"}}})}))},className:"px-2 py-1 rounded border border-gray-200 text-sm",children:re.map(J=>r.jsx("option",{value:J.value,children:J.label},J.value))})]}),E==="editableEdge"&&r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Line Type"}),r.jsxs("select",{value:W,onChange:J=>{const ie=J.target.value;S(ie),le.setState(pe=>({edges:pe.edges.map(ce=>({...ce,data:{...ce.data,...ce.type==="editableEdge"&&{lineType:ie}}}))}))},className:"px-2 py-1 rounded border border-gray-200 text-sm",children:[r.jsx("option",{value:"step",children:"Step Line"}),r.jsx("option",{value:"straight",children:"Straight Line"})]})]}),r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Connection Mode"}),r.jsx("select",{value:M,onChange:J=>{_(J.target.value),le.getState().updateConnectionMode(J.target.value)},className:"px-2 py-1 rounded border border-gray-200 text-sm",children:ae.map(J=>r.jsx("option",{value:J.value,children:J.label},J.value))})]}),r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Edge Color"}),r.jsx("input",{type:"color",value:R,onChange:J=>H(J.target.value),className:"w-full h-6 rounded border border-gray-200"})]}),r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Edge Width"}),r.jsx("input",{type:"range",min:"1",max:"5",value:k,onChange:J=>T(parseInt(J.target.value)),className:"w-full"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:L,onChange:J=>{D(J.target.checked),le.getState().updateEdgeAnimated(J.target.checked)},className:"rounded border-gray-300",id:"edge-animation",title:"Toggle edge animation"}),r.jsx("label",{htmlFor:"edge-animation",className:"text-xs text-gray-600",children:"Animation"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:()=>N(),className:"rounded border-gray-300",id:"disable-ui-updates",title:"Disable UI updates for better performance"}),r.jsx("label",{htmlFor:"disable-ui-updates",className:"text-xs text-gray-600",children:"Disable UI Updates"})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:O,className:"p-2 rounded hover:bg-gray-100 transition-colors",title:"Validate Datapath",children:r.jsx(Fy,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{f?(m(f.id),u(null)):d&&(x(d.id),a(null))},className:"p-2 rounded hover:bg-gray-100 transition-colors",title:"Delete selected component or edge",disabled:!f&&!d,children:r.jsx(c1,{className:"w-5 h-5"})})]})]})})]})})}function Oj(){const[e,s]=F.useState(!1),[i,l]=F.useState(!1),a=le(f=>f.selectedNode),u=le(f=>f.updateNodeData);if(!a)return null;const d=()=>{switch(a.type){case"constant":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Constant"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"A constant value source that outputs a fixed, predetermined value to other components. These values are hardcoded and don't change during execution."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsx("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," Provides the constant value (usually 32-bit) to connected components without requiring any inputs"]})}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The constant component simply outputs its predetermined value at all times. It's commonly used for providing fixed values like '4' for PC incrementation, immediate values, or memory offsets. The output never changes regardless of clock cycles or other signals."})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"pc":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Program Counter"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Program Counter (PC) is a special register that holds the memory address of the current instruction being executed. It's a critical component for instruction sequencing in the processor."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input:"})," Next instruction address (32-bit value) to be loaded on the next clock edge"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," Current instruction address (32-bit value) used to fetch the current instruction"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Clock:"})," System clock signal that triggers the update of the PC value"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Program Counter operates synchronously on the clock edge:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Event"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Action"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"System Reset"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"PC = 0x00000000"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Rising Clock Edge"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"PC = Input value (typically PC+4 or branch/jump target)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Between Clock Edges"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"PC maintains its current value (stable output)"})]})]})]}),r.jsx("p",{className:"mt-1",children:"The PC is always word-aligned (divisible by 4 in RISC-V) to ensure proper instruction alignment."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"fork":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Fork"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"A signal distribution component that copies an input signal to multiple outputs without modification. Essential for fan-out when a single signal needs to be routed to multiple destinations."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input:"})," Source signal (32-bit value) to be distributed"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Outputs:"})," Multiple identical copies of the input signal, each maintaining the same bit-width and value as the input"]})]}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The fork component operates as a simple wire splitter with no logical processing. It continuously passes the input value to all outputs with no delay or transformation. Each output exactly mirrors the input at all times. This component is particularly important when a signal (like an instruction, register value, or control signal) needs to be used by multiple components simultaneously."})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"No configuration needed"})]})]});case"add":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Add"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"An adder component that performs binary addition on two 32-bit input values and produces their sum. This is a fundamental arithmetic component used throughout the processor."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input A:"})," First 32-bit operand for addition"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input B:"})," Second 32-bit operand for addition"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," 32-bit sum result (A + B)"]})]}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The adder performs standard binary addition between inputs A and B, treating them as 32-bit two's complement integers. It operates combinationally (no clock required) and produces output immediately when inputs change. Common uses include incrementing the PC by 4, calculating memory addresses (base + offset), and computing branch target addresses (PC + immediate). Unlike the ALU, it only performs addition and doesn't handle other operations."})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"No configuration needed"})]})]});case"mux":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Multiplexer"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"A configurable N-to-1 multiplexer that selects and routes one input from multiple input values based on a control signal. Essential for implementing data path selection and conditional operations in the processor."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input 0-N:"})," Multiple 32-bit input values (configurable from 2 to 8 inputs)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Select:"})," Control signal determining which input to route to the output. For an N-input mux, this requires log(N) bits"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," The selected 32-bit input value that is passed through"]})]}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The multiplexer operates combinationally by evaluating the select signal and routing the corresponding input to the output. For example, with select=0, input0 is routed; with select=1, input1 is routed, and so on. The operation is immediate with no clock required. The select value is interpreted modulo the number of inputs (select % inputs.length). Multiplexers are critical for implementing choice points in the datapath, such as ALU input selection, register write data selection, and next PC determination."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Configuration"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Port Count:"})," Number of input ports (2-8)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Selection:"})," Input index is determined by select signal modulo port count"]})]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"No configuration needed"})]})]});case"imm-gen":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Immediate Generator "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The Immediate Generator extracts and processes immediate values embedded within RISC-V instructions. It performs proper sign extension and field arrangement based on the instruction format (I, S, B, U, J) to produce a 32-bit immediate value for use in the datapath."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Instruction:"})," Complete 32-bit instruction input containing immediate fields"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," Properly formatted and sign-extended 32-bit immediate value"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Immediate Generator operates combinationally by examining the instruction opcode to determine the format type, then extracting and processing the immediate bits accordingly:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Format"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Immediate Extraction"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Extension"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"I-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"imm[11:0] = inst[31:20]"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Sign-extended to 32 bits"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"S-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"imm[11:0] = inst[31:25] + inst[11:7]"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Sign-extended to 32 bits"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"B-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"imm[12:0] = inst[31] + inst[7] + inst[30:25] + inst[11:8] + 0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Sign-extended to 32 bits"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"U-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"imm[31:12] = inst[31:12], lower 12 bits set to zero"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Zero-extended"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"J-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"imm[20:0] = inst[31] + inst[19:12] + inst[20] + inst[30:21] + 0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Sign-extended to 32 bits"})]})]})]})]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"No configuration needed"})]})]});case"pc-mux":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"PC Multiplexer "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The PC Multiplexer determines the next Program Counter value by selecting between sequential execution (PC+4) and branch/jump target addresses based on control signals. This component enables control flow changes in the processor."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input 0:"})," PC+4 value for sequential execution"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input 1:"})," Branch/jump target address calculated from PC and immediate"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Select:"})," Control signal (typically from Branch-AND-Zero or Jump logic) that determines which address to use next"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," Selected next PC value that will be loaded into the PC register"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The PC Multiplexer operates combinationally based on the select signal:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Select Value"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Output"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Program Flow"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Input 0 (PC+4)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Sequential execution"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Input 1 (Branch/Jump target)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Control flow change"})]})]})]}),r.jsx("p",{className:"mt-1",children:"The select signal is typically generated by branch/jump control logic based on instruction type and condition evaluation."})]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"No configuration needed"})]})]});case"alu":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"ALU "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Arithmetic Logic Unit (ALU) performs all computational operations in the processor including arithmetic (add, subtract), logical (AND, OR, XOR), comparison, and shifting operations on 32-bit operands based on the control signal."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input A:"})," First 32-bit operand from register file or PC"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input B:"})," Second 32-bit operand from register file or immediate generator"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ALU Control:"})," 4-bit operation selection signal from ALU Control unit"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," 32-bit result of the selected operation"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Zero Flag:"})," 1-bit flag set when result equals zero, used for branch decisions"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The ALU operates combinationally based on the ALU Control input:"}),r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"font-medium mb-1",children:"Basic Operations:"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Control"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Description"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"AND"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Bitwise AND (A & B)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0001"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"OR"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Bitwise OR (A | B)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0010"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ADD"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Addition (A + B)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0011"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"XOR"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Bitwise XOR (A ^ B)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0110"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SUB"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Subtraction (A - B)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0111"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLT"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Set if less than (signed)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SRL"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Logical right shift"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1001"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SRA"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Arithmetic right shift"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1010"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLTU"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Set if less than (unsigned)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1011"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLL"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Logical left shift"})]})]})]})})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"font-medium mb-1",children:"M-Extension Operations:"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Control"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Description"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1100"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MUL"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Multiplication (lower 32 bits)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1101"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MULH"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Multiplication high (signedsigned)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1110"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MULHU"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Multiplication high (unsignedunsigned)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1111"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MULHSU"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Multiplication high (signedunsigned)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"10000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"DIV"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Division (signed)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"10001"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"DIVU"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Division (unsigned)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"10010"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"REM"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Remainder (signed)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"10011"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"REMU"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Remainder (unsigned)"})]})]})]})})]}),r.jsx("p",{children:"The Zero flag is set when the output is exactly zero, primarily used for branch instructions."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"alu-control":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"ALU Control"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The ALU Control unit translates the high-level ALUOp signals from the main control unit and instruction function fields (funct3, funct7) into specific 4-bit control signals that determine the exact operation the ALU will perform."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ALUOp:"})," 2-bit control signal from main Control Unit indicating operation class"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Funct7:"})," 7-bit function code from instruction bits 31-25, used for R-type operation differentiation"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Funct3:"})," 3-bit function code from instruction bits 14-12, specifies operation within type"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Operation:"})," 4-bit output control signal specifying the exact ALU operation to perform"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The ALU Control uses combinational logic to decode the instruction:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"ALUOp"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Instruction Type"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"00"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Load/Store"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ADD (0010)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:3,children:"01"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:3,children:"Branch"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"BEQ/BNE: funct3=000/001  SUB (0110)"})]}),r.jsx("tr",{children:r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"BLT/BGE: funct3=100/101  SLT (0111)"})}),r.jsx("tr",{children:r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"BLTU/BGEU: funct3=110/111  SLTU (1010)"})})]})]}),r.jsx("p",{className:"mb-1",children:"R-type instructions (ALUOp=10):"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"funct7"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"funct3"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:8,children:"0000000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ADD (0010)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"001"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLL (1011)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"010"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLT (0111)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"011"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLTU (1010)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"100"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"XOR (0011)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"101"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SRL (1000)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"110"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"OR (0001)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"111"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"AND (0000)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:2,children:"0100000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SUB (0110)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"101"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SRA (1001)"})]}),r.jsxs("tr",{children:[r.jsxs("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:8,children:["0000001",r.jsx("br",{}),"(M-extension)"]}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MUL (1100)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"001"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MULH (1101)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"010"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MULHSU (1111)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"011"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MULHU (1110)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"100"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"DIV (10000)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"101"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"DIVU (10001)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"110"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"REM (10010)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"111"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"REMU (10011)"})]})]})]}),r.jsx("p",{className:"mb-1",children:"I-type ALU instructions (ALUOp=11):"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"funct3"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"000"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ADDI (0010)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"001"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLLI (1011)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"010"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLTI (0111)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"011"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SLTIU (1010)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"100"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"XORI (0011)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"101"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"SRLI/SRAI (1000/1001) based on funct7"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"110"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ORI (0001)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"111"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ANDI (0000)"})]})]})]}),r.jsx("p",{className:"mt-1",children:"The mapping ensures that the ALU performs the correct operation for each instruction type, with full support for RV32I and RV32M instruction sets."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"forwarding-unit":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Forwarding Unit"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Forwarding Unit detects data hazards in pipelined execution by comparing register numbers between instructions. It generates forwarding control signals to bypass values from later pipeline stages when needed, eliminating pipeline stalls for data dependencies."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ID/EX.Rs1:"})," Current instruction's first source register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ID/EX.Rs2:"})," Current instruction's second source register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"EX/MEM.Rd:"})," Previous instruction's destination register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"EX/MEM.RegWrite:"})," Previous instruction's register write enable signal"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MEM/WB.Rd:"})," Two instructions ago's destination register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MEM/WB.RegWrite:"})," Two instructions ago's register write enable signal"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ForwardA:"})," 2-bit control signal for ALU operand A forwarding (0=no forward, 1=MEM/WB, 2=EX/MEM)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ForwardB:"})," 2-bit control signal for ALU operand B forwarding (0=no forward, 1=MEM/WB, 2=EX/MEM)"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Forwarding Unit operates combinationally to detect and resolve data hazards:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Port"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Condition"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Value"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:3,children:"ForwardA (Rs1)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"EX/MEM.RegWrite=1 and EX/MEM.Rd=Rs1 and EX/MEM.Rd0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"2 (Forward from EX/MEM)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MEM/WB.RegWrite=1 and MEM/WB.Rd=Rs1 and MEM/WB.Rd0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (Forward from MEM/WB)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Otherwise"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (No forwarding)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",rowSpan:3,children:"ForwardB (Rs2)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"EX/MEM.RegWrite=1 and EX/MEM.Rd=Rs2 and EX/MEM.Rd0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"2 (Forward from EX/MEM)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MEM/WB.RegWrite=1 and MEM/WB.Rd=Rs2 and MEM/WB.Rd0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (Forward from MEM/WB)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Otherwise"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (No forwarding)"})]})]})]}),r.jsx("p",{className:"mt-1",children:"This logic ensures correct values are forwarded to ALU inputs when data dependencies exist between instructions."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"hazard-detection-unit":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Hazard Detection Unit"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Hazard Detection Unit identifies load-use data hazards where a load instruction is followed by an instruction that uses the loaded data. It generates stall signals to pause the pipeline for one cycle when such hazards are detected."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ID/EX.MemRead:"})," Previous instruction's memory read enable signal"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ID/EX.Rt:"})," Previous instruction's target register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"IF/ID.Rs:"})," Current instruction's first source register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"IF/ID.Rt:"})," Current instruction's second source register number"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"PC Write:"})," Output signal to freeze PC (0=stall, 1=normal)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"IF/ID Write:"})," Output signal to freeze IF/ID pipeline register (0=stall, 1=normal)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Control Mux:"})," Output signal to zero out control signals (1=insert NOP, 0=normal)"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Hazard Detection Unit operates combinationally:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Condition"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"PC Write"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"IF/ID Write"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Control Mux"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ID/EX.MemRead=1 and (ID/EX.Rt=IF/ID.Rs or ID/EX.Rt=IF/ID.Rt) and ID/EX.Rt0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (freeze)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (freeze)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (insert NOP)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Otherwise"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (normal)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (normal)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (normal)"})]})]})]}),r.jsx("p",{className:"mt-1",children:"This creates a one-cycle bubble in the pipeline to allow the load instruction to complete before the dependent instruction proceeds."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"branch-hazard-unit":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Branch Hazard Unit"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Branch Hazard Unit resolves control hazards that occur when branch instructions are taken. It flushes the pipeline stages containing incorrectly fetched instructions, effectively implementing the flush method of control hazard resolution."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"branchTaken:"})," Input signal indicating that a branch is taken (connect to Jump Control's jump output)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ifIdFlush:"})," Output signal to flush the IF/ID pipeline register (1=flush, 0=normal)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"idExFlush:"})," Output signal to flush the ID/EX pipeline register (1=flush, 0=normal)"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Branch Hazard Unit operates combinationally:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"branchTaken"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"ifIdFlush"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"idExFlush"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (branch taken)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (flush)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1 (flush)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (branch not taken)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (normal)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0 (normal)"})]})]})]}),r.jsx("p",{className:"mt-1",children:"This flushes the pipeline stages containing instructions that were incorrectly fetched after the branch, effectively inserting NOPs and preventing the execution of instructions that should be skipped due to the branch. This is a critical component for correct program flow in pipelined processors."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"register":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Register File "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The Register File contains 32 general-purpose 32-bit registers (x0-x31) that store data during program execution. Register x0 is hardwired to zero, while the remaining registers are readable and writable storage locations for instruction operands and results."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Read Register 1:"})," 5-bit address selecting the first register to read"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Read Register 2:"})," 5-bit address selecting the second register to read"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Write Register:"})," 5-bit address selecting the register to write to"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Write Data:"})," 32-bit data to write to the selected register"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"RegWrite:"})," 1-bit control signal enabling register write when high"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Clock:"})," System clock that synchronizes register writes"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Read Data 1:"})," 32-bit data output from the first selected register"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Read Data 2:"})," 32-bit data output from the second selected register"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Register File operates with different timing for reads and writes:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Timing"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Behavior"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Read Data 1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Combinational (no clock)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Registers[Read Register 1] (0 if address is 0)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Read Data 2"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Combinational (no clock)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Registers[Read Register 2] (0 if address is 0)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Write"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Synchronous (rising clock edge)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"If RegWrite=1 and Write Register0, then Registers[Write Register] = Write Data"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Read-after-Write"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Same cycle"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Some implementations forward the new value if read address matches write address"})]})]})]}),r.jsx("p",{className:"mt-1",children:"The Register File supports simultaneous reads and writes, with register x0 hardwired to zero (writes to x0 are ignored)."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"instruction-memory":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Instruction Memory "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Instruction Memory is a read-only memory unit that stores the program instructions to be executed. In the RISC-V architecture, it holds 32-bit instructions that are fetched sequentially unless a branch or jump occurs."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Address:"})," 32-bit input address from which to fetch an instruction. Only the lower bits are typically used depending on memory size"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Instruction:"})," 32-bit output containing the instruction at the specified address"]})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"memory":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Memory"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Data Memory is a read-write memory unit that stores program data. It handles all load (read) and store (write) operations, enabling programs to maintain state and manipulate data during execution."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Address:"})," 32-bit memory location to read from or write to. Only lower bits are used based on memory size"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Write Data:"})," 32-bit data to be written to memory when MemWrite is active"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MemWrite:"})," 1-bit control signal enabling memory write operations when high (1)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MemRead:"})," 1-bit control signal enabling memory read operations when high (1)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Clock:"})," System clock signal that synchronizes write operations"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Read Data:"})," 32-bit data output from the specified address when MemRead is active"]})]}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Cache Configuration"}),r.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"The cache is fully configurable through the Cache View panel. You can adjust:"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Cache Lines:"})," Number of cache lines as 2^n (default n=4)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Block Size:"})," Size of each cache block in words (1 word = 4 bytes)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Associativity:"})," Number of ways as 2^n (default n=0, direct-mapped)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Replacement Policy:"})," LRU (Least Recently Used)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Write Policy:"})," Write-back with dirty bit"]})]}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"The number of sets is automatically calculated based on the formula: sets = lines / ways."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Data Memory operates with different timing for reads and writes:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Operation"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Control Signal"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Behavior"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Read"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MemRead = 1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"First checks cache. If hit, returns data from cache. If miss, fetches from memory and stores in cache."})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Write"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MemWrite = 1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"On rising clock edge, writes 32-bit data to both cache and memory."})]})]})]}),r.jsx("p",{className:"mb-1",children:"Cache operation details:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Aspect"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Behavior"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Cache Replacement"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"On cache miss with no free way, LRU policy selects victim block. If dirty, writes back to memory first."})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Addressing"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Byte-addressable, but most operations work with word (4-byte) alignments."})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Alignment"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"For word operations, addresses should be multiples of 4. Some implementations handle unaligned accesses with penalties."})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Architecture"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Data memory is completely separate from instruction memory."})]})]})]})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"control":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Control Unit"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Control Unit decodes RISC-V instructions and generates control signals that coordinate the operation of various datapath components. It examines the opcode field of the instruction to determine the instruction type and required operations."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Instruction[6:0]:"})," Opcode field of the instruction"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ALUSrc1[1:0]:"})," 2-bit control signal selecting ALU's first input (0: Register, 1: PC for AUIPC, 2: Zero for LUI)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ALUSrc2:"})," Control signal selecting ALU's second input (0: Register, 1: Immediate)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MemtoReg:"})," Control signal selecting write-back data source (0: ALU Result, 1: Memory Data, 2: PC+4)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"RegWrite:"})," Enable signal for register file writing"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MemRead:"})," Enable signal for memory reading"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"MemWrite:"})," Enable signal for memory writing"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Branch:"})," Control signal indicating branch instruction"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"ALUOp[1:0]:"})," Control signal for ALU operation type"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Control Unit operates combinationally based on the instruction opcode:"}),r.jsxs("table",{className:"w-full border-collapse text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Type"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"RegWrite"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"ALUSrc1"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"ALUSrc2"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"MemtoReg"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"MemRead"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"MemWrite"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Branch"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"ALUOp"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"R-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"10"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"I-type (ALU)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"11"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"I-type (Load)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"00"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"S-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"-"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"00"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"B-type"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"-"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"01"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"AUIPC"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"00"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"LUI"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"2"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"00"})]})]})]})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"jump-control":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Jump Control "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-xs text-blue-700",children:"The Jump Control unit determines whether to take a branch or jump by evaluating control signals and comparison results. It generates the final PC selection signal that controls instruction flow."}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-xs text-blue-700 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Branch:"})," 1-bit control signal from main control unit indicating a branch instruction"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Zero:"})," 1-bit flag from ALU indicating if the comparison result is zero"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Jump:"})," 1-bit control signal from main control unit indicating an unconditional jump instruction"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"PCSrc:"})," 1-bit output control signal for the PC multiplexer (0=PC+4, 1=branch/jump target)"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Jump Control uses simple combinational logic to determine the next PC value:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Instruction Type"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Condition"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"PCSrc"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Result"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Branch (BEQ)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Branch=1 AND Zero=1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Take branch"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Branch (BEQ)"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Branch=1 AND Zero=0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Continue to PC+4"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Jump"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Jump=1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Always take jump"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Other"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Branch=0 AND Jump=0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Continue to PC+4"})]})]})]}),r.jsx("p",{className:"mt-1",children:"This component is critical for implementing all control flow changes in the processor, determining when to deviate from sequential execution."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"instr-distributer":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Instruction Distributer"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"The Instruction Distributer is a dedicated decoder that parses a 32-bit RISC-V instruction into its individual fields according to the instruction format. It extracts and routes fields like opcode, registers, and function codes to their respective destination components."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Instruction:"})," Complete 32-bit instruction input directly from instruction memory"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Opcode:"})," 7-bit output (bits 6-0) identifying the instruction type, routed to Control Unit"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"rd:"})," 5-bit destination register address output (bits 11-7), routed to Register File"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"rs1:"})," 5-bit first source register address output (bits 19-15), routed to Register File"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"rs2:"})," 5-bit second source register address output (bits 24-20), routed to Register File"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"funct3:"})," 3-bit function code output (bits 14-12), routed to ALU Control and branch logic"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"funct7:"})," 7-bit function code output (bits 31-25), routed to ALU Control"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"imm:"})," 32-bit immediate field sent to the Immediate Generator for formatting"]})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"pipeline-register":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Pipeline Register "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Pipeline registers separate the different stages of a pipelined processor, storing all required data and control signals between pipeline stages. They enable overlapped execution of multiple instructions by providing stage isolation."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Inputs:"})," Multiple data and control signals from the previous pipeline stage (varies by stage, includes values like PC, instruction, register values, control signals)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Clock:"})," System clock signal that triggers the register update"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Stall:"})," Control signal that prevents register update when high, effectively pausing that pipeline stage"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Flush:"})," Control signal that clears register contents when high, effectively canceling instructions in that stage"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Outputs:"})," Registered copies of all input signals, passed to the next pipeline stage"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"Pipeline registers operate synchronously on the rising edge of the clock:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Mode"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Behavior"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Normal"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"On each clock edge, all input values are captured and appear at the outputs, allowing them to be used by the next stage."})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Stall"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"When the Stall signal is high, the register retains its current value regardless of input changes, effectively pausing that stage of the pipeline."})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Flush"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"When the Flush signal is high, all outputs are set to zero or NOP values, effectively canceling the instruction in that stage."})]})]})]}),r.jsx("p",{className:"mb-1",children:"The four standard pipeline registers in a classic RISC-V pipeline are:"}),r.jsxs("table",{className:"w-full border-collapse text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Register"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Location"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Stored Signals"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"IF/ID"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Between Instruction Fetch and Instruction Decode stages"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Instruction and PC value"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ID/EX"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Between Instruction Decode and Execute stages"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Register values, control signals, and immediate values"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"EX/MEM"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Between Execute and Memory Access stages"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"ALU results, memory data, and control signals"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"MEM/WB"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Between Memory Access and Write Back stages"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Data for writeback and control signals"})]})]})]})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"single-register":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Single Register"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"A sequential storage element that captures and holds a 32-bit data value on the clock edge when enabled. Used for temporary value storage, state preservation between cycles, and pipeline stage separation."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsxs("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input:"})," 32-bit data value to be stored on the next clock edge when Write Enable is active"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Clock:"})," System clock signal that triggers register state update"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Write Enable:"})," 1-bit control signal that permits register update when high (1)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Output:"})," 32-bit stored data value that persists until a new value is written"]})]}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Single Register operates synchronously:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Condition"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Behavior"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Rising clock edge AND Write Enable = 1"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"The value at the input port is captured and stored internally, immediately appearing at the output port"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Rising clock edge AND Write Enable = 0"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"The register maintains its current value regardless of input changes"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Between clock edges"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"The output continuously provides the last stored value with no additional delay"})]})]})]}),r.jsx("p",{className:"mt-1",children:"Used for inserting controlled delays, storing state between operations, and buffering values between pipeline stages."})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration needed"})]})]});case"label":return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Label "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Component Description"}),r.jsx("p",{className:"text-sm text-blue-700",children:"A Label is a visual annotation component that displays text or signals in the datapath diagram. It doesn't affect circuit functionality but provides explanatory information or shows signal values during simulation."}),r.jsx("h4",{className:"text-sm font-medium text-blue-800 mt-2 mb-1",children:"Ports"}),r.jsx("ul",{className:"text-sm text-blue-700 list-disc pl-5",children:r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Input:"})," Optional data input (32-bit value) that can be displayed alongside the label text"]})}),r.jsx("h4",{className:"text-xs font-medium text-blue-800 mt-2 mb-1",children:"Execution Logic"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"mb-1",children:"The Label operates with minimal logic:"}),r.jsxs("table",{className:"w-full border-collapse text-xs mb-2",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Aspect"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Behavior"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Display"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Shows the configured text string at all times"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Signal Monitoring"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"If connected to an input signal, can display the value in decimal, hex, or binary format"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Signal Interaction"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Passive component that doesn't modify any signals passing through the circuit"})]})]})]}),r.jsx("p",{className:"mb-1",children:"Common uses for labels:"}),r.jsxs("table",{className:"w-full border-collapse text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-100",children:[r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Purpose"}),r.jsx("th",{className:"border border-blue-200 px-1 py-0.5 text-left",children:"Examples"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Datapath Sections"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:'"Fetch Stage", "Execute Stage"'})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Signal Types"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:'"Control Signals", "Address Bus"'})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Value Monitoring"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:'"Current PC", "ALU Result"'})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Documentation"}),r.jsx("td",{className:"border border-blue-200 px-1 py-0.5",children:"Explanatory notes in the circuit diagram"})]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label Text"}),r.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:a.data.label||"",onChange:f=>u(a.id,{label:f.target.value})})]})]})]});default:return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-medium",children:[a.type," Configuration"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"No configuration options available"})]})}};return r.jsxs("div",{className:"absolute bottom-0 bg-white border-l border-t border-gray-200 shadow-lg transition-all duration-300 rounded-t-lg overflow-hidden",style:{width:i?"40rem":"20rem",right:"0rem",maxHeight:"calc(100vh - 5rem)",transform:e?"translateY(0)":"translateY(calc(100% - 2.5rem))",opacity:e?1:.95},children:[r.jsxs("div",{className:"p-2 border-b border-gray-200 bg-white hover:bg-gray-50 transition-colors flex justify-between items-center",children:[r.jsxs("button",{className:"flex items-center text-left focus:outline-none group flex-grow",onClick:()=>s(!e),children:[r.jsx("span",{className:"font-medium text-gray-800 group-hover:text-blue-600 transition-colors",children:"Component Description"}),e?r.jsx(qu,{className:"w-4 h-4 ml-2"}):r.jsx(Xu,{className:"w-4 h-4 ml-2"})]}),e&&r.jsx("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-100 focus:outline-none",onClick:()=>l(!i),title:i?"Narrow panel":"Widen panel",children:i?r.jsx(By,{className:"w-4 h-4 text-gray-600"}):r.jsx(Hy,{className:"w-4 h-4 text-gray-600"})})]}),r.jsx("div",{className:"overflow-y-auto bg-white",style:{maxHeight:e?"calc(100vh - 8rem)":0,transition:"max-height 200ms ease-in-out"},children:r.jsx("div",{className:"p-4",children:d()})})]})}class ve extends Error{constructor(i,l){const u=`${!i.startsWith("Line")&&(l!=null&&l.lineNumber)?`Line ${l.lineNumber}: `:""}
${i}
${l!=null&&l.instruction?`Instruction: ${l.instruction}`:""}
${l!=null&&l.suggestion?`Suggestion: ${l.suggestion}`:""}`;super(u);$t(this,"lineNumber");$t(this,"instruction");$t(this,"errorType");$t(this,"suggestion");this.name="AssemblerError",this.lineNumber=l==null?void 0:l.lineNumber,this.instruction=l==null?void 0:l.instruction,this.errorType=(l==null?void 0:l.errorType)||"Syntax Error",this.suggestion=l==null?void 0:l.suggestion}}const Kp={zero:0,ra:1,sp:2,gp:3,tp:4,t0:5,t1:6,t2:7,s0:8,fp:8,s1:9,a0:10,a1:11,a2:12,a3:13,a4:14,a5:15,a6:16,a7:17,s2:18,s3:19,s4:20,s5:21,s6:22,s7:23,s8:24,s9:25,s10:26,s11:27,t3:28,t4:29,t5:30,t6:31},Ge=e=>{if(e in Kp)return Kp[e];const s=e.match(/x(\d+)/);if(!s)throw new ve(`Invalid register format: ${e}`,{errorType:"Register Error",suggestion:"Registers should use x0-x31 format (e.g., x0, x1) or ABI names (e.g., zero, ra, sp, etc)"});const i=parseInt(s[1]);if(i<0||i>31)throw new ve(`Register number must be between 0-31: ${e}`,{errorType:"Register Error",suggestion:"Please check if the register number is within valid range (0-31)"});return i},Dr=(e,s,i,l)=>{let a;const u=e.match(/^%hi\(([a-zA-Z0-9_\.]+)\)$/),d=e.match(/^%lo\(([a-zA-Z0-9_\.]+)\)$/);if(u||d){if(!i)throw new ve("Cannot use %hi or %lo without a label map",{errorType:"Relocation Error",suggestion:"Relocation operators %hi and %lo can only be used with defined labels"});const m=u?u[1]:d[1];if(!(m in i))throw new ve(`Undefined label in %hi/%lo: ${m}`,{errorType:"Label Error",suggestion:"Please ensure the label is defined in the code"});const h=i[m];u?a=h>>12&1048575:(a=h&4095,a&2048&&(a=a|4294963200))}else l&&e in l?a=l[e]:e.startsWith("0x")?(a=parseInt(e.slice(2),16),a>=1<<s-1&&(a-=1<<s)):a=parseInt(e);const f=(1<<s-1)-1,x=-(1<<s-1);if(isNaN(a))throw new ve(`Invalid immediate format: ${e}`,{errorType:"Immediate Error",suggestion:"Immediate values can be in decimal (e.g., 42), hexadecimal (e.g., 0xff), or relocation operators (%hi(label), %lo(label))"});if(s===13||s===21){if(a%2!==0)throw new ve(`Branch/jump target must be 2-byte aligned: ${e}`,{errorType:"Alignment Error",suggestion:"Branch and jump instruction targets must be multiples of 2"});a=a>>1}if(a<x||a>f)throw new ve(`Immediate must be between ${x} and ${f}: ${e}`,{errorType:"Immediate Range Error",suggestion:`Please ensure the immediate is within valid range (${x} to ${f})`});return a},Uu=(e,s,i)=>{const l=e.split("#")[0].trim(),a=l.split(/[\s,]+/).filter(Boolean),u=a[0].toLowerCase();switch(u){case"li":{if(a.length!==3)throw new ve(`Syntax error in li instruction: requires 2 operands
Correct format: li rd, immediate
  - rd: target register (e.g., x1, t0)
  - immediate: immediate value (e.g., 42, 0xff)
Current input: ${l}`,{lineNumber:s});const d=a[1];let f;if(i&&a[2]in i)f=i[a[2]];else try{if(f=a[2].startsWith("0x")?parseInt(a[2].slice(2),16):parseInt(a[2]),isNaN(f))throw new Error}catch{throw new ve(`Invalid immediate format in li instruction: ${a[2]}
Supported formats:
  - Decimal number (e.g., 42)
  - Hexadecimal number (e.g., 0xff)`,{lineNumber:s})}if(f>=-2048&&f<2048)return[`addi ${d}, x0, ${f}`];{let x=f>>12,m=f&4095;return m>=2048&&(m=m-4096,x=x+1),x===0&&m!==0&&f<0?[`addi ${d}, x0, ${m}`]:m===0?[`lui ${d}, ${x}`]:[`lui ${d}, ${x}`,`addi ${d}, ${d}, ${m}`]}}case"la":{if(a.length!==3)throw new ve("Syntax error in la instruction: requires 2 operands",{errorType:"Operand Error",instruction:l,suggestion:"la instruction format: la rd, symbol (e.g., la a0, msg)",lineNumber:s});const d=a[1],f=a[2];return[`lui ${d}, %LA_HI_${f}%`,`addi ${d}, ${d}, %LA_LO_${f}%`]}case"mv":{if(a.length!==3)throw new ve("mv instruction requires 2 operands",{lineNumber:s});return[`addi ${a[1]}, ${a[2]}, 0`]}case"j":{if(a.length!==2)throw new ve("j instruction requires 1 operand",{lineNumber:s});return[`jal x0, ${a[1]}`]}case"jal":return a.length===2?[`jal x1, ${a[1]}`]:[l];case"jalr":{if(a.length===3&&a[2].includes("(")){const d=a[2].match(/(\-?[0-9]+|\%lo\([a-zA-Z0-9_\.]+\))\(([a-zA-Z0-9]+)\)/);if(d){const f=d[1],x=d[2];return[`jalr ${a[1]}, ${x}, ${f}`]}}else if(a.length===2)return[`jalr x1, ${a[1]}, 0`];return[l]}case"call":{if(a.length!==2)throw new ve("call instruction requires 1 operand",{lineNumber:s,errorType:"Operand Error",instruction:l,suggestion:"call instruction format: call label (e.g., call function_name)"});return[`jal ra, ${a[1]}`]}case"ret":return["jalr x0, ra, 0"];case"nop":return["addi x0, x0, 0"];case"lb":case"lh":case"lw":case"ld":case"lbu":case"lhu":case"lwu":{if(a.length===3&&!a[2].includes("(")){const d=a[1],f=a[2];return[`auipc ${d}, %LA_HI_${f}%`,`${u} ${d}, %LOAD_OFFSET_${f}%, ${d}`]}return[l]}case"sb":case"sh":case"sw":case"sd":{if(a.length===4&&!a[2].includes("(")){const d=a[1],f=a[2],x=a[3];return[`auipc ${x}, %LA_HI_${f}%`,`${u} ${d}, %STORE_OFFSET_${f}%, ${x}`]}return[l]}case"not":{if(a.length!==3)throw new ve("not instruction requires 2 operands",{lineNumber:s});return[`xori ${a[1]}, ${a[2]}, -1`]}case"neg":{if(a.length!==3)throw new ve("neg instruction requires 2 operands",{lineNumber:s});return[`sub ${a[1]}, x0, ${a[2]}`]}case"seqz":{if(a.length!==3)throw new ve("seqz instruction requires 2 operands",{lineNumber:s});return[`sltiu ${a[1]}, ${a[2]}, 1`]}case"snez":{if(a.length!==3)throw new ve("snez instruction requires 2 operands",{lineNumber:s});return[`sltu ${a[1]}, x0, ${a[2]}`]}case"sltz":{if(a.length!==3)throw new ve("sltz instruction requires 2 operands",{lineNumber:s});return[`slt ${a[1]}, ${a[2]}, x0`]}case"sgtz":{if(a.length!==3)throw new ve("sgtz instruction requires 2 operands",{lineNumber:s});return[`slt ${a[1]}, x0, ${a[2]}`]}case"beqz":{if(a.length!==3)throw new ve("beqz instruction requires 2 operands",{lineNumber:s});return[`beq ${a[1]}, x0, ${a[2]}`]}case"bnez":{if(a.length!==3)throw new ve("bnez instruction requires 2 operands",{lineNumber:s});return[`bne ${a[1]}, x0, ${a[2]}`]}case"blez":{if(a.length!==3)throw new ve("blez instruction requires 2 operands",{lineNumber:s});return[`bge x0, ${a[1]}, ${a[2]}`]}case"bgez":{if(a.length!==3)throw new ve("bgez instruction requires 2 operands",{lineNumber:s});return[`bge ${a[1]}, x0, ${a[2]}`]}case"bltz":{if(a.length!==3)throw new ve("bltz instruction requires 2 operands",{lineNumber:s});return[`blt ${a[1]}, x0, ${a[2]}`]}case"bgtz":{if(a.length!==3)throw new ve("bgtz instruction requires 2 operands",{lineNumber:s});return[`blt x0, ${a[1]}, ${a[2]}`]}case"bgt":{if(a.length!==4)throw new ve("bgt instruction requires 3 operands",{lineNumber:s});return[`blt ${a[2]}, ${a[1]}, ${a[3]}`]}case"ble":{if(a.length!==4)throw new ve("ble instruction requires 3 operands",{lineNumber:s});return[`bge ${a[2]}, ${a[1]}, ${a[3]}`]}case"bgtu":{if(a.length!==4)throw new ve("bgtu instruction requires 3 operands",{lineNumber:s});return[`bltu ${a[2]}, ${a[1]}, ${a[3]}`]}case"bleu":{if(a.length!==4)throw new ve("bleu instruction requires 3 operands",{lineNumber:s});return[`bgeu ${a[2]}, ${a[1]}, ${a[3]}`]}case"jr":{if(a.length!==2)throw new ve("jr instruction requires 1 operand",{lineNumber:s});return[`jalr x0, ${a[1]}, 0`]}case"tail":{if(a.length!==2)throw new ve("tail instruction requires 1 operand",{lineNumber:s});return[`jal x0, ${a[1]}`]}default:return[l]}},Fj=(e,s,i,l,a)=>{const u=e.split("#")[0].trim(),d=u.split(/[\s,]+/).filter(Boolean),f=d[0].toLowerCase();switch(f){case"add":case"sub":case"and":case"or":case"xor":case"sll":case"srl":case"sra":case"slt":case"sltu":case"mul":case"mulh":case"mulhsu":case"mulhu":case"div":case"divu":case"rem":case"remu":{if(d.length!==4)throw new ve(`${f} instruction requires 3 operands`,{errorType:"Operand Error",instruction:u,suggestion:`${f} instruction format: ${f} rd, rs1, rs2 (e.g., ${f} x1, x2, x3)`,lineNumber:l});return{type:"R",opcode:"0110011",rd:Ge(d[1]),rs1:Ge(d[2]),rs2:Ge(d[3]),funct3:f==="add"||f==="sub"||f==="mul"?"000":f==="sll"||f==="mulh"?"001":f==="slt"||f==="mulhsu"?"010":f==="sltu"||f==="mulhu"?"011":f==="xor"||f==="div"?"100":f==="srl"||f==="sra"||f==="divu"?"101":f==="or"||f==="rem"?"110":"111",funct7:f==="mul"||f==="mulh"||f==="mulhsu"||f==="mulhu"||f==="div"||f==="divu"||f==="rem"||f==="remu"?"0000001":f==="sub"||f==="sra"?"0100000":"0000000"}}case"addi":case"andi":case"ori":case"xori":case"slti":case"sltiu":case"slli":case"srli":case"srai":{if(d.length!==4)throw new ve(`${f} instruction requires 3 operands`,{errorType:"Operand Error",instruction:u,suggestion:`${f} instruction format: ${f} rd, rs1, imm (e.g., ${f} x1, x2, 10)`});return{type:"I",opcode:"0010011",rd:Ge(d[1]),rs1:Ge(d[2]),imm:Dr(d[3],12,i,a),funct3:f==="addi"?"000":f==="slli"?"001":f==="slti"?"010":f==="sltiu"?"011":f==="xori"?"100":f==="srli"||f==="srai"?"101":f==="ori"?"110":"111",funct7:f==="srai"?"0100000":f==="slli"||f==="srli"?"0000000":void 0}}case"lb":case"lh":case"lw":case"lbu":case"lhu":{if(d.length!==3)throw new ve(`${f} instruction requires 2 operands with offset`);const[x,m]=d.slice(1),h=m.match(/(%lo\([a-zA-Z0-9_\.]+\)|\-?[0-9]+|[a-zA-Z][a-zA-Z0-9_]*)\(([a-zA-Z0-9]+)\)/);if(!h)throw new ve(`Invalid memory access format: ${m}`,{errorType:"Memory Access Format Error",instruction:u,suggestion:"Memory access format should be: offset(register), %lo(symbol)(register), or CONSTANT(register), e.g., 4(x2), %lo(data_var)(x2), or OFFSET(x2)"});return{type:"I",opcode:"0000011",rd:Ge(x),rs1:Ge(h[2]),imm:Dr(h[1],12,i,a),funct3:f==="lb"?"000":f==="lh"?"001":f==="lw"?"010":f==="lbu"?"100":"101"}}case"sb":case"sh":case"sw":{if(d.length!==3)throw new ve(`${f} instruction requires 2 operands with offset`);const[x,m]=d.slice(1),h=m.match(/(%lo\([a-zA-Z0-9_\.]+\)|\-?[0-9]+|[a-zA-Z][a-zA-Z0-9_]*)\(([a-zA-Z0-9]+)\)/);if(!h)throw new ve(`Invalid memory access format: ${m}`,{errorType:"Memory Access Format Error",instruction:u,suggestion:"Memory access format should be: offset(register), %lo(symbol)(register), or CONSTANT(register), e.g., 4(x2), %lo(data_var)(x2), or OFFSET(x2)"});return{type:"S",opcode:"0100011",rs1:Ge(h[2]),rs2:Ge(x),imm:Dr(h[1],12,i,a),funct3:f==="sb"?"000":f==="sh"?"001":"010"}}case"beq":case"bne":case"blt":case"bge":case"bltu":case"bgeu":{if(d.length!==4)throw new ve(`${f} instruction requires 3 operands`,{errorType:"Operand Error",instruction:u,suggestion:`${f} instruction format: ${f} rs1, rs2, offset/label (e.g., ${f} x1, x2, label)`});const x=d[3];let m;return x in i?m=i[x]-s:m=Dr(x,13,void 0,a),{type:"B",opcode:"1100011",rs1:Ge(d[1]),rs2:Ge(d[2]),imm:m,funct3:f==="beq"?"000":f==="bne"?"001":f==="blt"?"100":f==="bge"?"101":f==="bltu"?"110":"111"}}case"lui":case"auipc":{if(d.length!==3)throw new ve(`${f} instruction requires 2 operands`);return{type:"U",opcode:f==="lui"?"0110111":"0010111",rd:Ge(d[1]),imm:Dr(d[2],20,i,a)}}case"jal":{if(d.length!==3)throw new ve(`${f} instruction requires 2 operands`);const x=d[2];let m;return x in i?m=i[x]-s:m=Dr(x,21,void 0,a),{type:"J",opcode:"1101111",rd:Ge(d[1]),imm:m}}case"jalr":{if(d.length!==4)throw new ve(`${f} instruction requires 3 operands`,{errorType:"Operand Error",instruction:u,suggestion:`${f} instruction format: ${f} rd, rs1, imm (e.g., ${f} x1, x2, 0)`});return{type:"I",opcode:"1100111",rd:Ge(d[1]),rs1:Ge(d[2]),imm:Dr(d[3],12,i,a),funct3:"000"}}case"ecall":{if(d.length!==1)throw new ve(`${f} instruction does not require operands`,{errorType:"Operand Error",instruction:u,suggestion:"ecall instruction format: ecall"});return{type:"I",opcode:"1110011",rd:0,rs1:0,imm:0,funct3:"000"}}case"ebreak":{if(d.length!==1)throw new ve(`${f} instruction does not require operands`,{errorType:"Operand Error",instruction:u,suggestion:"ebreak instruction format: ebreak"});return{type:"I",opcode:"1110011",rd:0,rs1:0,imm:1,funct3:"000"}}default:throw new ve(`Unsupported instruction: ${f}`,{errorType:"Unknown Instruction",instruction:u,suggestion:"Please check if the instruction spelling is correct, or refer to the list of supported instructions"})}},_i=e=>{let s=parseInt(e.opcode,2);const i=(l,a)=>{const u=1<<a-1;return l&u?l|-1<<a:l};switch(e.type){case"R":s=parseInt(e.opcode,2)&127,s|=(e.rd&31)<<7,s|=(parseInt(e.funct3,2)&7)<<12,s|=(e.rs1&31)<<15,s|=(e.rs2&31)<<20,s|=(parseInt(e.funct7,2)&127)<<25;break;case"I":const l=e.imm;s|=(e.rd&31)<<7,s|=(parseInt(e.funct3,2)&7)<<12,s|=(e.rs1&31)<<15,e.funct7?(s|=(parseInt(e.funct7,2)&127)<<25,s|=(l&31)<<20>>>0):s|=(l&4095)<<20>>>0;break;case"S":const a=i(e.imm,12);s|=(a&31)<<7,s|=(parseInt(e.funct3,2)&7)<<12,s|=(e.rs1&31)<<15,s|=(e.rs2&31)<<20,s|=a>>5<<25;break;case"B":const u=i(e.imm,13);s|=(u&4096)>>12<<31,s|=(u&2016)>>5<<25,s|=(u&30)>>1<<8,s|=(u&2048)>>11<<7,s|=(parseInt(e.funct3,2)&7)<<12,s|=(e.rs1&31)<<15,s|=(e.rs2&31)<<20;break;case"U":s|=(e.rd&31)<<7,s|=(e.imm&1048575)<<12;break;case"J":const d=i(e.imm,21);s|=(d&1048576)>>20<<31,s|=(d&1044480)>>12<<12,s|=(d&2048)>>11<<20,s|=(d&2046)>>1<<21,s|=(e.rd&31)<<7,s|=111;break}return`0x${(s>>>0).toString(16).padStart(8,"0")}`};class Uj{constructor(){$t(this,"labelMap",{});$t(this,"equMap",{});$t(this,"currentAddress",0);$t(this,"currentSegment","text");$t(this,"textAddress",0);$t(this,"dataAddress",0);$t(this,"GP_BASE",268435456)}getLabelMap(){return this.labelMap}getEquMap(){return this.equMap}parseEquValue(s){if(s in this.equMap)return this.equMap[s];if(s.startsWith("0x")){const l=parseInt(s.slice(2),16);if(isNaN(l))throw new Error(`Invalid hexadecimal value: ${s}`);return l}const i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid numeric value: ${s}`);return i}assemble(s){this.labelMap={},this.equMap={},this.currentAddress=0,this.currentSegment="text",this.textAddress=0,this.dataAddress=this.GP_BASE;let i=0,l=!1;const a=[];s.split(`
`).forEach((x,m)=>{const h=m+1,y=x.split("#")[0].trim();if(!y)return;const b={text:y,hasLabel:!1,lineNumber:h},v=y.match(/^([a-zA-Z0-9_\.]+):/);if(v){b.hasLabel=!0,b.label=v[1];const j=y.substring(v[0].length).trim();j&&(b.instr=j)}else b.instr=y;a.push(b)}),i=0,l=!1;for(let x=0;x<a.length;x++){const m=a[x];if(m.instr===".text"){l=!1,i=0;continue}else if(m.instr===".data"){l=!0,i=this.GP_BASE;continue}if(m.hasLabel&&(this.labelMap[m.label]=i),m.instr){if(m.instr.startsWith(".equ")){const h=m.instr.split(/[\s,]+/).filter(Boolean);if(h.length===2)if(m.hasLabel&&m.label)try{let y=this.parseEquValue(h[1]);this.equMap[m.label]=y}catch{throw new ve(`Invalid value in .equ directive: ${h[1]}`,{errorType:"Directive Error",instruction:m.instr,lineNumber:m.lineNumber,suggestion:"Value must be a valid number (decimal or hex) or a previously defined constant"})}else throw new ve("Missing label for .equ directive",{errorType:"Directive Error",instruction:m.instr,lineNumber:m.lineNumber,suggestion:"Format should be: symbol: .equ value"});else if(h.length===3)try{let y=this.parseEquValue(h[2]);this.equMap[h[1]]=y}catch{throw new ve(`Invalid value in .equ directive: ${h[2]}`,{errorType:"Directive Error",instruction:m.instr,lineNumber:m.lineNumber,suggestion:"Value must be a valid number (decimal or hex) or a previously defined constant"})}else throw new ve("Invalid .equ directive format",{errorType:"Directive Error",instruction:m.instr,lineNumber:m.lineNumber,suggestion:"Format should be: symbol: .equ value or .equ symbol, value"});continue}if(m.instr.startsWith(".globl"))continue;if(l){if(m.instr.startsWith(".word")){const h=m.instr.split(/[\s,]+/).slice(1);i+=4*h.length}else if(m.instr.startsWith(".byte")){const h=m.instr.split(/[\s,]+/).slice(1);i+=h.length}else if(m.instr.startsWith(".half")){const h=m.instr.split(/[\s,]+/).slice(1);i+=2*h.length}else if(m.instr.startsWith(".ascii")||m.instr.startsWith(".asciz")||m.instr.startsWith(".string")){const h=m.instr.match(/"(.*)"/);if(h){const y=h[1],b=m.instr.startsWith(".asciz")||m.instr.startsWith(".string")?y.length+1:y.length;i+=b}}else if(m.instr.startsWith(".space")||m.instr.startsWith(".zero")){const h=m.instr.split(/[\s,]+/).slice(1);if(h.length>0){const y=parseInt(h[0]);isNaN(y)||(i+=y)}}}else try{const h=Uu(m.instr,m.lineNumber,this.equMap);i+=4*h.length}catch(h){throw h instanceof ve?new ve(h.message,{...h,lineNumber:m.lineNumber}):new ve(`Error processing instruction: ${h instanceof Error?h.message:String(h)}`,{lineNumber:m.lineNumber,instruction:m.instr})}}}this.currentAddress=0,this.currentSegment="text";const u=[],d={};let f="text";for(const x of a){if(x.instr===".text"){f="text",this.currentAddress=u.filter(h=>h.segment==="text").reduce((h,y)=>h+4,0);continue}else if(x.instr===".data"){f="data",this.currentAddress=this.GP_BASE+u.filter(h=>h.segment==="data").reduce((h,y)=>y.data?h+y.data.length:h,0);continue}if(!x.instr)continue;const m=x.instr;if(!m.startsWith(".globl")){if(f==="text"){if(!m.startsWith("."))try{Uu(m,x.lineNumber,this.equMap).forEach((y,b)=>{try{if(y.includes("%LA_HI_")||y.includes("%LA_LO_")||y.includes("%LOAD_OFFSET_")||y.includes("%STORE_OFFSET_")){let N=y.match(/%LA_(HI|LO)_([a-zA-Z0-9_\.]+)%/),E=y.match(/%LOAD_OFFSET_([a-zA-Z0-9_\.]+)%/),z=y.match(/%STORE_OFFSET_([a-zA-Z0-9_\.]+)%/);if(N){const M=N[1],_=N[2];if(!(_ in this.labelMap))throw new ve(`Undefined label: ${_}`,{errorType:"Label Error",instruction:y,suggestion:"Please ensure the label is defined in the code",lineNumber:x.lineNumber});const L=this.labelMap[_];if(M==="HI"){const D=L>=this.GP_BASE?65536:L>>>12,R=y.split(/[\s,]+/).filter(Boolean),H=R[0].toLowerCase(),k=R[1],T={type:"U",opcode:H==="lui"?"0110111":"0010111",rd:Ge(k),imm:D},I=_i(T),$=(parseInt(I.slice(2),16)>>>0).toString(2).padStart(32,"0");u.push({hex:I,binary:$,assembly:`${H} ${k}, 0x${D.toString(16)}`,source:x.text,segment:"text",address:this.currentAddress,originalLineNumber:x.lineNumber})}else if(M==="LO"){let D=L>=this.GP_BASE?L-this.GP_BASE:L&4095;const R=y.split(/[\s,]+/).filter(Boolean),H=R[1],k=R[2];(D<-2048||D>2047)&&console.warn(`Warning: ${_} offset ${D} exceeds 12-bit signed integer range`);const T={type:"I",opcode:"0010011",rd:Ge(H),rs1:Ge(k),imm:D,funct3:"000"},I=_i(T),$=(parseInt(I.slice(2),16)>>>0).toString(2).padStart(32,"0");u.push({hex:I,binary:$,assembly:`addi ${H}, ${k}, ${D}`,source:x.text,segment:"text",address:this.currentAddress,originalLineNumber:x.lineNumber})}this.currentAddress+=4;return}else if(E){const M=E[1];if(!(M in this.labelMap))throw new ve(`Undefined label: ${M}`,{errorType:"Label Error",instruction:y,suggestion:"Please ensure the label is defined in the code",lineNumber:x.lineNumber});const _=this.labelMap[M];let L;_>=this.GP_BASE?(L=_-(this.currentAddress+268435456)+4,(L<-2048||L>2047)&&console.warn(`Warning: ${M} offset ${L} exceeds 12-bit signed integer range`)):L=_&4095;const D=y.split(/[\s,]+/).filter(Boolean),R=D[0].toLowerCase(),H=D[1],k=D[3],T={type:"I",opcode:"0000011",rd:Ge(H),rs1:Ge(k),imm:L,funct3:R==="lb"?"000":R==="lh"?"001":R==="lw"?"010":R==="lbu"?"100":R==="lhu"?"101":R==="lwu"?"110":"011"},I=_i(T),$=(parseInt(I.slice(2),16)>>>0).toString(2).padStart(32,"0");u.push({hex:I,binary:$,assembly:`${R} ${H}, ${L}(${k})`,source:x.text,segment:"text",address:this.currentAddress,originalLineNumber:x.lineNumber}),this.currentAddress+=4;return}else if(z){const M=z[1];if(!(M in this.labelMap))throw new ve(`Undefined label: ${M}`,{errorType:"Label Error",instruction:y,suggestion:"Please ensure the label is defined in the code",lineNumber:x.lineNumber});const _=this.labelMap[M];let L;_>=this.GP_BASE?(L=_-(this.currentAddress+268435456)+4,(L<-2048||L>2047)&&console.warn(`Warning: ${M} offset ${L} exceeds 12-bit signed integer range`)):L=_&4095;const D=y.split(/[\s,]+/).filter(Boolean),R=D[0].toLowerCase(),H=D[1],k=D[3],T={type:"S",opcode:"0100011",rs1:Ge(k),rs2:Ge(H),imm:L,funct3:R==="sb"?"000":R==="sh"?"001":R==="sw"?"010":"011"},I=_i(T),$=(parseInt(I.slice(2),16)>>>0).toString(2).padStart(32,"0");u.push({hex:I,binary:$,assembly:`${R} ${H}, ${L}(${k})`,source:x.text,segment:"text",address:this.currentAddress,originalLineNumber:x.lineNumber}),this.currentAddress+=4;return}}const v=Fj(y,this.currentAddress,this.labelMap,x.lineNumber,this.equMap),j=_i(v),w=(parseInt(j.slice(2),16)>>>0).toString(2).padStart(32,"0");u.push({hex:j,binary:w,assembly:y,source:x.text,segment:"text",address:this.currentAddress,originalLineNumber:x.lineNumber}),this.currentAddress+=4}catch(v){throw v instanceof ve?new ve(v.message,{...v,lineNumber:x.lineNumber}):new ve(`Error processing instruction: ${v instanceof Error?v.message:String(v)}`,{lineNumber:x.lineNumber,instruction:y})}})}catch(h){throw h instanceof ve?h:new ve(`Error processing instruction: ${h instanceof Error?h.message:String(h)}`,{lineNumber:x.lineNumber,instruction:m})}}else if(f==="data")try{let h=[],y=0;if(m.startsWith(".word")){const v=m.split(/[\s,]+/).slice(1).map(j=>j.startsWith("0x")?parseInt(j.slice(2),16):parseInt(j));h=[],v.forEach(j=>{h.push(j&255),h.push(j>>8&255),h.push(j>>16&255),h.push(j>>24&255)}),y=4*v.length,v.forEach((j,w)=>{const N=this.currentAddress+w*4;d[N]=j&255,d[N+1]=j>>8&255,d[N+2]=j>>16&255,d[N+3]=j>>24&255}),u.push({hex:"0x"+v.map(j=>j.toString(16).padStart(8,"0")).join(""),binary:v.map(j=>j.toString(2).padStart(32,"0")).join(""),assembly:m,source:x.text,segment:"data",address:this.currentAddress,data:v,originalLineNumber:x.lineNumber}),v.forEach((j,w)=>{const N=this.currentAddress+w*4;d[N]=j&255,d[N+1]=j>>8&255,d[N+2]=j>>16&255,d[N+3]=j>>24&255})}else if(m.startsWith(".byte")){const v=m.split(/[\s,]+/).slice(1).map(j=>j.startsWith("0x")?parseInt(j.slice(2),16)&255:j.startsWith("'")&&j.endsWith("'")&&j.length===3?j.charCodeAt(1)&255:parseInt(j)&255);v.forEach((j,w)=>{d[this.currentAddress+w]=j}),h=v,y=v.length,u.push({hex:"0x"+v.map(j=>j.toString(16).padStart(2,"0")).join(""),binary:v.map(j=>j.toString(2).padStart(8,"0")).join(""),assembly:m,source:x.text,segment:"data",address:this.currentAddress,data:v,originalLineNumber:x.lineNumber})}else if(m.startsWith(".half")){const v=m.split(/[\s,]+/).slice(1).map(j=>j.startsWith("0x")?parseInt(j.slice(2),16)&65535:parseInt(j)&65535);v.forEach((j,w)=>{const N=this.currentAddress+w*2;d[N]=j&255,d[N+1]=j>>8&255}),h=[],v.forEach(j=>{h.push(j&255),h.push(j>>8&255)}),y=2*v.length,u.push({hex:"0x"+v.map(j=>j.toString(16).padStart(4,"0")).join(""),binary:v.map(j=>j.toString(2).padStart(16,"0")).join(""),assembly:m,source:x.text,segment:"data",address:this.currentAddress,data:v,originalLineNumber:x.lineNumber})}else if(m.startsWith(".ascii")||m.startsWith(".asciz")||m.startsWith(".string")){const b=m.match(/"(.*)"/);if(b){const v=b[1],j=Array.from(v).map(w=>w.charCodeAt(0));(m.startsWith(".asciz")||m.startsWith(".string"))&&j.push(0),h=j,y=j.length,u.push({hex:"0x"+j.map(w=>w.toString(16).padStart(2,"0")).join(""),binary:j.map(w=>w.toString(2).padStart(8,"0")).join(""),assembly:m,source:x.text,segment:"data",address:this.currentAddress,data:j,originalLineNumber:x.lineNumber})}}else if(m.startsWith(".space")||m.startsWith(".zero")){const b=m.split(/\s+/).slice(1);if(b.length>0){const v=parseInt(b[0]);if(!isNaN(v)){const j=new Array(v).fill(0);h=j,y=v,u.push({hex:"0x"+j.map(w=>w.toString(16).padStart(2,"0")).join(""),binary:j.map(w=>w.toString(2).padStart(8,"0")).join(""),assembly:m,source:x.text,segment:"data",address:this.currentAddress,data:j,originalLineNumber:x.lineNumber})}}}h.length>0&&(h.forEach((b,v)=>{d[this.currentAddress+v]=b}),this.currentAddress+=y)}catch(h){throw h instanceof ve?new ve(h.message,{...h,lineNumber:x.lineNumber}):new ve(`Error processing data: ${h instanceof Error?h.message:String(h)}`,{lineNumber:x.lineNumber,instruction:m})}}}if(u.length>0){const x={};Object.entries(d).forEach(([m,h])=>{x[`0x${parseInt(m).toString(16).padStart(8,"0")}`]=h}),u[0].memoryData=x}return u}}function Wj(e,s,i){return s in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,e}function Qp(e,s){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);s&&(l=l.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,l)}return i}function Jp(e){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?Qp(Object(i),!0).forEach(function(l){Wj(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Qp(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Bj(e,s){if(e==null)return{};var i={},l=Object.keys(e),a,u;for(u=0;u<l.length;u++)a=l[u],!(s.indexOf(a)>=0)&&(i[a]=e[a]);return i}function Hj(e,s){if(e==null)return{};var i=Bj(e,s),l,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)l=u[a],!(s.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}function Vj(e,s){return qj(e)||Xj(e,s)||Yj(e,s)||Gj()}function qj(e){if(Array.isArray(e))return e}function Xj(e,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var i=[],l=!0,a=!1,u=void 0;try{for(var d=e[Symbol.iterator](),f;!(l=(f=d.next()).done)&&(i.push(f.value),!(s&&i.length===s));l=!0);}catch(x){a=!0,u=x}finally{try{!l&&d.return!=null&&d.return()}finally{if(a)throw u}}return i}}function Yj(e,s){if(e){if(typeof e=="string")return em(e,s);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return em(e,s)}}function em(e,s){(s==null||s>e.length)&&(s=e.length);for(var i=0,l=new Array(s);i<s;i++)l[i]=e[i];return l}function Gj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zj(e,s,i){return s in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,e}function tm(e,s){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);s&&(l=l.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,l)}return i}function nm(e){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?tm(Object(i),!0).forEach(function(l){Zj(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tm(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Kj(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return function(l){return s.reduceRight(function(a,u){return u(a)},l)}}function Di(e){return function s(){for(var i=this,l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return a.length>=e.length?e.apply(this,a):function(){for(var d=arguments.length,f=new Array(d),x=0;x<d;x++)f[x]=arguments[x];return s.apply(i,[].concat(a,f))}}}function Ql(e){return{}.toString.call(e).includes("Object")}function Qj(e){return!Object.keys(e).length}function Gi(e){return typeof e=="function"}function Jj(e,s){return Object.prototype.hasOwnProperty.call(e,s)}function eS(e,s){return Ql(s)||br("changeType"),Object.keys(s).some(function(i){return!Jj(e,i)})&&br("changeField"),s}function tS(e){Gi(e)||br("selectorType")}function nS(e){Gi(e)||Ql(e)||br("handlerType"),Ql(e)&&Object.values(e).some(function(s){return!Gi(s)})&&br("handlersType")}function rS(e){e||br("initialIsRequired"),Ql(e)||br("initialType"),Qj(e)&&br("initialContent")}function sS(e,s){throw new Error(e[s]||e.default)}var iS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},br=Di(sS)(iS),zl={changes:eS,selector:tS,handler:nS,initial:rS};function oS(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};zl.initial(e),zl.handler(s);var i={current:e},l=Di(cS)(i,s),a=Di(aS)(i),u=Di(zl.changes)(e),d=Di(lS)(i);function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return zl.selector(m),m(i.current)}function x(m){Kj(l,a,u,d)(m)}return[f,x]}function lS(e,s){return Gi(s)?s(e.current):s}function aS(e,s){return e.current=nm(nm({},e.current),s),s}function cS(e,s,i){return Gi(s)?s(e.current):Object.keys(i).forEach(function(l){var a;return(a=s[l])===null||a===void 0?void 0:a.call(s,e.current[l])}),i}var uS={create:oS},dS={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function fS(e){return function s(){for(var i=this,l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return a.length>=e.length?e.apply(this,a):function(){for(var d=arguments.length,f=new Array(d),x=0;x<d;x++)f[x]=arguments[x];return s.apply(i,[].concat(a,f))}}}function pS(e){return{}.toString.call(e).includes("Object")}function mS(e){return e||rm("configIsRequired"),pS(e)||rm("configType"),e.urls?(hS(),{paths:{vs:e.urls.monacoBase}}):e}function hS(){console.warn(sx.deprecation)}function xS(e,s){throw new Error(e[s]||e.default)}var sx={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},rm=fS(xS)(sx),gS={config:mS},yS=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return function(a){return i.reduceRight(function(u,d){return d(u)},a)}};function ix(e,s){return Object.keys(s).forEach(function(i){s[i]instanceof Object&&e[i]&&Object.assign(s[i],ix(e[i],s[i]))}),Jp(Jp({},e),s)}var bS={type:"cancelation",msg:"operation is manually canceled"};function gu(e){var s=!1,i=new Promise(function(l,a){e.then(function(u){return s?a(bS):l(u)}),e.catch(a)});return i.cancel=function(){return s=!0},i}var vS=uS.create({config:dS,isInitialized:!1,resolve:null,reject:null,monaco:null}),ox=Vj(vS,2),eo=ox[0],da=ox[1];function wS(e){var s=gS.config(e),i=s.monaco,l=Hj(s,["monaco"]);da(function(a){return{config:ix(a.config,l),monaco:i}})}function NS(){var e=eo(function(s){var i=s.monaco,l=s.isInitialized,a=s.resolve;return{monaco:i,isInitialized:l,resolve:a}});if(!e.isInitialized){if(da({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),gu(yu);if(window.monaco&&window.monaco.editor)return lx(window.monaco),e.resolve(window.monaco),gu(yu);yS(jS,ES)(CS)}return gu(yu)}function jS(e){return document.body.appendChild(e)}function SS(e){var s=document.createElement("script");return e&&(s.src=e),s}function ES(e){var s=eo(function(l){var a=l.config,u=l.reject;return{config:a,reject:u}}),i=SS("".concat(s.config.paths.vs,"/loader.js"));return i.onload=function(){return e()},i.onerror=s.reject,i}function CS(){var e=eo(function(i){var l=i.config,a=i.resolve,u=i.reject;return{config:l,resolve:a,reject:u}}),s=window.require;s.config(e.config),s(["vs/editor/editor.main"],function(i){lx(i),e.resolve(i)},function(i){e.reject(i)})}function lx(e){eo().monaco||da({monaco:e})}function kS(){return eo(function(e){var s=e.monaco;return s})}var yu=new Promise(function(e,s){return da({resolve:e,reject:s})}),Jl={config:wS,init:NS,__getMonacoInstance:kS},IS={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},bu=IS,RS={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},MS=RS;function _S({children:e}){return Q.createElement("div",{style:MS.container},e)}var zS=_S,PS=zS;function AS({width:e,height:s,isEditorReady:i,loading:l,_ref:a,className:u,wrapperProps:d}){return Q.createElement("section",{style:{...bu.wrapper,width:e,height:s},...d},!i&&Q.createElement(PS,null,l),Q.createElement("div",{ref:a,style:{...bu.fullWidth,...!i&&bu.hide},className:u}))}var TS=AS,ax=F.memo(TS);function LS(e){F.useEffect(e,[])}var dd=LS;function DS(e,s,i=!0){let l=F.useRef(!0);F.useEffect(l.current||!i?()=>{l.current=!1}:e,s)}var Ft=DS;function $i(){}function Rs(e,s,i,l){return $S(e,l)||OS(e,s,i,l)}function $S(e,s){return e.editor.getModel(cx(e,s))}function OS(e,s,i,l){return e.editor.createModel(s,i,l?cx(e,l):void 0)}function cx(e,s){return e.Uri.parse(s)}function FS({original:e,modified:s,language:i,originalLanguage:l,modifiedLanguage:a,originalModelPath:u,modifiedModelPath:d,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:x=!1,theme:m="light",loading:h="Loading...",options:y={},height:b="100%",width:v="100%",className:j,wrapperProps:w={},beforeMount:N=$i,onMount:E=$i}){let[z,M]=F.useState(!1),[_,L]=F.useState(!0),D=F.useRef(null),R=F.useRef(null),H=F.useRef(null),k=F.useRef(E),T=F.useRef(N),I=F.useRef(!1);dd(()=>{let O=Jl.init();return O.then(P=>(R.current=P)&&L(!1)).catch(P=>(P==null?void 0:P.type)!=="cancelation"&&console.error("Monaco initialization: error:",P)),()=>D.current?S():O.cancel()}),Ft(()=>{if(D.current&&R.current){let O=D.current.getOriginalEditor(),P=Rs(R.current,e||"",l||i||"text",u||"");P!==O.getModel()&&O.setModel(P)}},[u],z),Ft(()=>{if(D.current&&R.current){let O=D.current.getModifiedEditor(),P=Rs(R.current,s||"",a||i||"text",d||"");P!==O.getModel()&&O.setModel(P)}},[d],z),Ft(()=>{let O=D.current.getModifiedEditor();O.getOption(R.current.editor.EditorOption.readOnly)?O.setValue(s||""):s!==O.getValue()&&(O.executeEdits("",[{range:O.getModel().getFullModelRange(),text:s||"",forceMoveMarkers:!0}]),O.pushUndoStop())},[s],z),Ft(()=>{var O,P;(P=(O=D.current)==null?void 0:O.getModel())==null||P.original.setValue(e||"")},[e],z),Ft(()=>{let{original:O,modified:P}=D.current.getModel();R.current.editor.setModelLanguage(O,l||i||"text"),R.current.editor.setModelLanguage(P,a||i||"text")},[i,l,a],z),Ft(()=>{var O;(O=R.current)==null||O.editor.setTheme(m)},[m],z),Ft(()=>{var O;(O=D.current)==null||O.updateOptions(y)},[y],z);let $=F.useCallback(()=>{var Y;if(!R.current)return;T.current(R.current);let O=Rs(R.current,e||"",l||i||"text",u||""),P=Rs(R.current,s||"",a||i||"text",d||"");(Y=D.current)==null||Y.setModel({original:O,modified:P})},[i,s,a,e,l,u,d]),W=F.useCallback(()=>{var O;!I.current&&H.current&&(D.current=R.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...y}),$(),(O=R.current)==null||O.editor.setTheme(m),M(!0),I.current=!0)},[y,m,$]);F.useEffect(()=>{z&&k.current(D.current,R.current)},[z]),F.useEffect(()=>{!_&&!z&&W()},[_,z,W]);function S(){var P,Y,X,U;let O=(P=D.current)==null?void 0:P.getModel();f||((Y=O==null?void 0:O.original)==null||Y.dispose()),x||((X=O==null?void 0:O.modified)==null||X.dispose()),(U=D.current)==null||U.dispose()}return Q.createElement(ax,{width:v,height:b,isEditorReady:z,loading:h,_ref:H,className:j,wrapperProps:w})}var US=FS;F.memo(US);function WS(){let[e,s]=F.useState(Jl.__getMonacoInstance());return dd(()=>{let i;return e||(i=Jl.init(),i.then(l=>{s(l)})),()=>i==null?void 0:i.cancel()}),e}var BS=WS;function HS(e){let s=F.useRef();return F.useEffect(()=>{s.current=e},[e]),s.current}var VS=HS,Pl=new Map;function qS({defaultValue:e,defaultLanguage:s,defaultPath:i,value:l,language:a,path:u,theme:d="light",line:f,loading:x="Loading...",options:m={},overrideServices:h={},saveViewState:y=!0,keepCurrentModel:b=!1,width:v="100%",height:j="100%",className:w,wrapperProps:N={},beforeMount:E=$i,onMount:z=$i,onChange:M,onValidate:_=$i}){let[L,D]=F.useState(!1),[R,H]=F.useState(!0),k=F.useRef(null),T=F.useRef(null),I=F.useRef(null),$=F.useRef(z),W=F.useRef(E),S=F.useRef(),O=F.useRef(l),P=VS(u),Y=F.useRef(!1),X=F.useRef(!1);dd(()=>{let A=Jl.init();return A.then(V=>(k.current=V)&&H(!1)).catch(V=>(V==null?void 0:V.type)!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>T.current?q():A.cancel()}),Ft(()=>{var V,K,re,oe;let A=Rs(k.current,e||l||"",s||a||"",u||i||"");A!==((V=T.current)==null?void 0:V.getModel())&&(y&&Pl.set(P,(K=T.current)==null?void 0:K.saveViewState()),(re=T.current)==null||re.setModel(A),y&&((oe=T.current)==null||oe.restoreViewState(Pl.get(u))))},[u],L),Ft(()=>{var A;(A=T.current)==null||A.updateOptions(m)},[m],L),Ft(()=>{!T.current||l===void 0||(T.current.getOption(k.current.editor.EditorOption.readOnly)?T.current.setValue(l):l!==T.current.getValue()&&(X.current=!0,T.current.executeEdits("",[{range:T.current.getModel().getFullModelRange(),text:l,forceMoveMarkers:!0}]),T.current.pushUndoStop(),X.current=!1))},[l],L),Ft(()=>{var V,K;let A=(V=T.current)==null?void 0:V.getModel();A&&a&&((K=k.current)==null||K.editor.setModelLanguage(A,a))},[a],L),Ft(()=>{var A;f!==void 0&&((A=T.current)==null||A.revealLine(f))},[f],L),Ft(()=>{var A;(A=k.current)==null||A.editor.setTheme(d)},[d],L);let U=F.useCallback(()=>{var A;if(!(!I.current||!k.current)&&!Y.current){W.current(k.current);let V=u||i,K=Rs(k.current,l||e||"",s||a||"",V||"");T.current=(A=k.current)==null?void 0:A.editor.create(I.current,{model:K,automaticLayout:!0,...m},h),y&&T.current.restoreViewState(Pl.get(V)),k.current.editor.setTheme(d),f!==void 0&&T.current.revealLine(f),D(!0),Y.current=!0}},[e,s,i,l,a,u,m,h,y,d,f]);F.useEffect(()=>{L&&$.current(T.current,k.current)},[L]),F.useEffect(()=>{!R&&!L&&U()},[R,L,U]),O.current=l,F.useEffect(()=>{var A,V;L&&M&&((A=S.current)==null||A.dispose(),S.current=(V=T.current)==null?void 0:V.onDidChangeModelContent(K=>{X.current||M(T.current.getValue(),K)}))},[L,M]),F.useEffect(()=>{if(L){let A=k.current.editor.onDidChangeMarkers(V=>{var re;let K=(re=T.current.getModel())==null?void 0:re.uri;if(K&&V.find(oe=>oe.path===K.path)){let oe=k.current.editor.getModelMarkers({resource:K});_==null||_(oe)}});return()=>{A==null||A.dispose()}}return()=>{}},[L,_]);function q(){var A,V;(A=S.current)==null||A.dispose(),b?y&&Pl.set(u,T.current.saveViewState()):(V=T.current.getModel())==null||V.dispose(),T.current.dispose()}return Q.createElement(ax,{width:v,height:j,isEditorReady:L,loading:x,_ref:I,className:w,wrapperProps:N})}var XS=qS,YS=F.memo(XS),GS=YS;function ZS({labelMap:e,isOpen:s,onClose:i}){const[l,a]=F.useState({x:100,y:100}),[u,d]=F.useState({width:400,height:300}),[f,x]=F.useState(!1),[m,h]=F.useState(!1),[y,b]=F.useState({x:0,y:0}),[v,j]=F.useState({x:0,y:0}),w=F.useRef(null),N=Object.entries(e).sort((M,_)=>M[1]-_[1]),E=M=>{w.current&&M.target===w.current.querySelector(".symbol-table-header")&&(x(!0),b({x:M.clientX-l.x,y:M.clientY-l.y}))},z=M=>{M.preventDefault(),h(!0),j({x:M.clientX,y:M.clientY})};return F.useEffect(()=>{const M=L=>{f?a({x:L.clientX-y.x,y:L.clientY-y.y}):m&&(d({width:u.width+(L.clientX-v.x),height:u.height+(L.clientY-v.y)}),j({x:L.clientX,y:L.clientY}))},_=()=>{x(!1),h(!1)};return(f||m)&&(document.addEventListener("mousemove",M),document.addEventListener("mouseup",_)),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",_)}},[f,m,y,v,u]),s?r.jsxs("div",{ref:w,className:"fixed bg-white border border-gray-300 rounded-md shadow-lg z-50 overflow-hidden",style:{left:`${l.x}px`,top:`${l.y}px`,width:`${u.width}px`,height:`${u.height}px`},onMouseDown:E,children:[r.jsxs("div",{className:"symbol-table-header flex justify-between items-center px-4 py-2 bg-gray-100 border-b border-gray-200 cursor-move",children:[r.jsx("h3",{className:"text-sm font-medium",children:"Symbol navigator"}),r.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:r.jsx(Am,{size:18})})]}),r.jsx("div",{className:"overflow-auto h-[calc(100%-40px)]",children:r.jsxs("table",{className:"w-full text-sm table-fixed border-collapse",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10 shadow-sm",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-2 px-3 font-medium w-1/2 whitespace-nowrap border-b border-gray-200",children:"Address"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium w-1/2 whitespace-nowrap border-b border-gray-200",children:"Symbol"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:N.length>0?N.map(([M,_],L)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"py-2 px-3 font-mono text-blue-600 text-xs whitespace-nowrap",children:`0x${_.toString(16).padStart(8,"0")}`}),r.jsx("td",{className:"py-2 px-3 font-mono text-xs whitespace-nowrap",children:M})]},L)):r.jsx("tr",{children:r.jsx("td",{colSpan:2,className:"py-8 text-center text-gray-500",children:"No symbols found"})})})]})}),r.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:z,style:{backgroundImage:"linear-gradient(135deg, transparent 50%, rgba(0,0,0,0.1) 50%)"}})]}):null}function KS(){const[e,s]=F.useState(null),[i,l]=F.useState(null),a=F.useRef(null),u=F.useRef(null),d=BS(),[f,x]=F.useState([]),[m,h]=F.useState({}),[y,b]=F.useState(!1),v=le(I=>I.editorCode),j=le(I=>I.setEditorCode),w=le(I=>I.assembledInstructions),N=le(I=>I.setAssembledInstructions),E=le(I=>I.updateNodeData),z=le(I=>I.nodes),M=le(I=>I.currentInstructionIndex),_=le(I=>I.isSimulating),L=le(I=>I.stepCount);F.useEffect(()=>{d&&(d.languages.register({id:"riscv"}),d.languages.setMonarchTokensProvider("riscv",{defaultToken:"invalid",ignoreCase:!0,tokenizer:{root:[[/#.*$/,"comment"],[/\b(x[0-9]|x[1-2][0-9]|x3[0-1]|zero|ra|sp|gp|tp|t[0-6]|s[0-9]|s1[0-1]|a[0-7])\b/,"register"],[/[a-zA-Z0-9_\.]+:/,"label"],[/\.(text|data|section|global|align|byte|half|word|dword|float|double|ascii|asciz|string|space|zero|equ)/,"directive"],[/\b(add|sub|and|or|xor|sll|srl|sra|slt|sltu|addi|andi|ori|xori|slli|srli|srai|slti|sltiu|lb|lh|lw|ld|lbu|lhu|lwu|sb|sh|sw|sd|beq|bne|blt|bge|bltu|bgeu|jal|jalr|lui|auipc|ecall|ebreak)\b/,"keyword"],[/\b(li|la|mv|not|neg|seqz|snez|sltz|sgtz|j|jal|jr|jalr|call|ret|tail|beqz|bnez|blez|bgez|bltz|bgtz|bgt|ble|bgtu|bleu|nop)\b/,"keyword.pseudo"],[/0x[0-9a-fA-F]+/,"number.hex"],[/-?[0-9]+\b/,"number"],[/%hi\([a-zA-Z0-9_\.]+\)/,"relocation"],[/%lo\([a-zA-Z0-9_\.]+\)/,"relocation"],[/\b[a-zA-Z][a-zA-Z0-9_\.]*\b/,"identifier"],[/".*?"/,"string"],[/[,()]/,"delimiter"]]}}),d.editor.defineTheme("riscv-theme",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"777777",fontStyle:"italic"},{token:"label",foreground:"0000ff",fontStyle:"bold"},{token:"directive",foreground:"800080",fontStyle:"bold"},{token:"register",foreground:"000000"},{token:"keyword",foreground:"A52A2A",fontStyle:"bold"},{token:"keyword.pseudo",foreground:"B8860B"},{token:"identifier",foreground:"0000ff"},{token:"relocation",foreground:"D2691E",fontStyle:"bold"},{token:"number.hex",foreground:"008000"},{token:"number",foreground:"008000"},{token:"string",foreground:"ff0000"},{token:"delimiter",foreground:"000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.lineHighlightBackground":"#F0F0F0"}}))},[d]);const D=I=>{u.current=I},R=I=>{if(!v||I===null||I<0||I>=w.length)return-1;const $=v.split(`
`);let W=0,S=!1;for(let O=0;O<$.length;O++){const P=$[O].split("#")[0].trim();if(P===".data"){S=!0;continue}else if(P===".text"){S=!1;continue}if(!S&&P&&!P.endsWith(":")){const Y=Uu(P);if(W+=Y.length,I<W)return O}}return-1};F.useEffect(()=>{var I;if(a.current&&M!==null&&M>=0){const $=M*4,W=`instruction-row-${M}`;let S=document.getElementById(W);if(!S&&a.current){const O=a.current.querySelectorAll("tr");for(const P of O){const Y=P.querySelector("td:first-child");if(Y&&((I=Y.textContent)!=null&&I.includes(`0x${$.toString(16).padStart(8,"0")}`))){S=P;break}}}if(!S&&a.current){const O=a.current.querySelector(".bg-yellow-50");O&&(S=O.closest("tr"))}if(S){const P=a.current.getBoundingClientRect(),Y=S.getBoundingClientRect();Y.top>=P.top&&Y.bottom<=P.bottom||S.scrollIntoView({behavior:_&&le.getState().simulationInterval<200?"auto":"smooth",block:"center"})}}if(u.current&&d){if(u.current.getModel()){const W=u.current.getModel().getAllDecorations().filter(S=>S.options.className==="monaco-highlight-line"||S.options.glyphMarginClassName==="monaco-highlight-glyph").map(S=>S.id);W.length>0&&u.current.deltaDecorations(W,[]),f.length>0&&(u.current.deltaDecorations(f,[]),x([]))}if(M!==null&&M>=0&&w.length>0){const W=w[M];if(W&&W.originalLineNumber&&W.originalLineNumber>0){const S=W.originalLineNumber-1,O=u.current.deltaDecorations([],[{range:new d.Range(S+1,1,S+1,1),options:{isWholeLine:!0,className:"monaco-highlight-line",glyphMarginClassName:"monaco-highlight-glyph"}}]);x(O)}else{const S=R(M);if(S>=0){const O=u.current.deltaDecorations([],[{range:new d.Range(S+1,1,S+1,1),options:{isWholeLine:!0,className:"monaco-highlight-line",glyphMarginClassName:"monaco-highlight-glyph"}}]);x(O)}}}}},[M,d,L,w]),F.useEffect(()=>{if(d){const I=document.createElement("style");return I.textContent=`
        .monaco-highlight-line {
          background-color: rgba(255, 255, 0, 0.2) !important;
          border-left: 3px solid gold !important;
        }
        .monaco-highlight-glyph {
          background-color: gold;
          width: 5px !important;
          margin-left: 3px;
        }
        .monaco-error-line {
          background-color: rgba(255, 0, 0, 0.2) !important;
          border-left: 3px solid red !important;
        }
        .monaco-error-glyph {
          background-color: red;
          width: 5px !important;
          margin-left: 3px;
        }
      `,document.head.appendChild(I),()=>{document.head.removeChild(I)}}},[d]),F.useEffect(()=>{if(u.current&&d&&!_&&u.current.getModel()){const $=u.current.getModel().getAllDecorations().filter(W=>W.options.className==="monaco-highlight-line"||W.options.glyphMarginClassName==="monaco-highlight-glyph").map(W=>W.id);$.length>0&&u.current.deltaDecorations($,[]),f.length>0&&(u.current.deltaDecorations(f,[]),x([]))}},[_,d]),F.useEffect(()=>{if(i!==null&&i>0&&u.current&&d){if(u.current.getModel()){const $=u.current.getModel().getAllDecorations().filter(W=>W.options.className==="monaco-error-line").map(W=>W.id);$.length>0&&u.current.deltaDecorations($,[]),u.current.deltaDecorations([],[{range:new d.Range(i,1,i,1),options:{isWholeLine:!0,className:"monaco-error-line",glyphMarginClassName:"monaco-error-glyph"}}]),u.current.revealLineInCenter(i)}}else if(i===null&&u.current&&d&&u.current.getModel()){const $=u.current.getModel().getAllDecorations().filter(W=>W.options.className==="monaco-error-line").map(W=>W.id);$.length>0&&u.current.deltaDecorations($,[])}},[i,d]);const H=()=>{s(null),l(null),le.getState().resetSimulation();try{const I=new Uj,$=I.assemble(v);if(h(I.getLabelMap()),$.length>0&&$[0].memoryData){const P=$[0].memoryData;setTimeout(()=>{le.getState().clearMemory(),setTimeout(()=>{le.getState().updateMemory(P)},10)},50),delete $[0].memoryData}const S=$.filter(P=>P.segment!=="data").map(P=>({...P,originalLineNumber:P.originalLineNumber||-1}));N(S);const O=z.find(P=>P.type==="instruction-memory");O&&E(O.id,{instructions:S.map(P=>P.hex),pc:0})}catch(I){I instanceof ve?(s(I.message),I.lineNumber&&I.lineNumber>0&&l(I.lineNumber)):I instanceof Error?s(I.message):s("")}},k=async I=>{try{const W=await(await fetch(`/Interactive-RISC-V-Simulator/test-programs/${I}.s`)).text();j(W)}catch{s("")}},T=I=>{if(!I)return"";const $=I.split(/[\s,]+/).filter(Boolean);if($.length<2)return I;const W=$[0].toLowerCase(),S=["beq","bne","blt","bge","bltu","bgeu","beqz","bnez","blez","bgez","bltz","bgtz","bgt","ble","bgtu","bleu"],O=["jal","j","call","tail"],P=["la"];let Y=I;const X=U=>`0x${U.toString(16).padStart(8,"0")}`;if(S.includes(W)){const U=$[$.length-1];if(m[U]!==void 0){const q=m[U];Y=Y.replace(U,X(q))}}else if(O.includes(W)){const U=$[$.length-1];if(m[U]!==void 0){const q=m[U];Y=Y.replace(U,X(q))}}else if(P.includes(W)){const U=$[$.length-1];if(m[U]!==void 0){const q=m[U];Y=Y.replace(U,X(q))}}else if(W==="jalr"&&$.length>=3){const q=$[$.length-1].match(/([^(]+)\(([^)]+)\)/);if(q){const A=q[1].trim();if(m[A]!==void 0){const V=m[A];Y=Y.replace(A,X(V))}}}return Y};return r.jsx("div",{className:"flex flex-col h-full",children:r.jsxs("div",{className:"flex h-full",children:[r.jsxs("div",{className:"w-1/2 p-4 border-r border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Code Editor"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{const I=document.createElement("input");I.type="file",I.accept=".txt,.s",I.onchange=$=>{var S;const W=(S=$.target.files)==null?void 0:S[0];if(W){const O=new FileReader;O.onload=P=>{var X;const Y=(X=P.target)==null?void 0:X.result;j(Y)},O.readAsText(W)}},I.click()},className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",title:"Import .txt or .s assembly code file",children:"Import"}),r.jsx("button",{type:"button",onClick:()=>{const I=new Blob([v],{type:"text/plain"}),$=URL.createObjectURL(I),W=document.createElement("a");W.href=$,W.download="assembly_code.txt",W.click(),URL.revokeObjectURL($)},className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",title:"Save current editor code as text file",children:"Export"}),r.jsxs("select",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",onChange:I=>k(I.target.value),defaultValue:"",title:"Load example RISC-V assembly program","aria-label":"Load example RISC-V assembly program",children:[r.jsx("option",{value:"",disabled:!0,children:"Load Example Program"}),r.jsx("option",{value:"bubble_sort",children:"Bubble Sort"}),r.jsx("option",{value:"quicksort",children:"Quicksort"}),r.jsx("option",{value:"binary_search",children:"Binary Search"}),r.jsx("option",{value:"fibonacci",children:"Fibonacci Program"}),r.jsx("option",{value:"gcd",children:"GCD Program"}),r.jsx("option",{value:"prime_check",children:"Prime Number Checker"}),r.jsx("option",{value:"matrix_multiply",children:"Matrix Multiplication"}),r.jsx("option",{value:"string_operations",children:"String Operations"})]}),r.jsx("button",{type:"button",onClick:H,className:"px-4 py-1.5 text-sm font-medium text-white bg-blue-500 border border-blue-600 rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Assemble"})]})]}),r.jsx(ZS,{labelMap:m,isOpen:y,onClose:()=>b(!1)}),r.jsx(GS,{height:"calc(100vh - 140px)",defaultLanguage:"riscv",language:"riscv",value:v,onChange:I=>j(I||""),theme:"riscv-theme",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,tabSize:2,renderWhitespace:"all"},onMount:D,beforeMount:I=>{I.editor.defineTheme("riscv-theme",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"777777",fontStyle:"italic"},{token:"label",foreground:"0000ff",fontStyle:"bold"},{token:"directive",foreground:"800080",fontStyle:"bold"},{token:"register",foreground:"000000"},{token:"keyword",foreground:"A52A2A",fontStyle:"bold"},{token:"keyword.pseudo",foreground:"B8860B"},{token:"identifier",foreground:"0000ff"},{token:"relocation",foreground:"D2691E",fontStyle:"bold"},{token:"number.hex",foreground:"008000"},{token:"number",foreground:"008000"},{token:"string",foreground:"ff0000"},{token:"delimiter",foreground:"000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.lineHighlightBackground":"#F0F0F0"}})}})]}),r.jsxs("div",{className:"w-1/2 p-4",children:[e&&r.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded",children:[r.jsx("h3",{className:"text-red-600 font-semibold mb-2",children:"Error Message"}),r.jsx("p",{className:"text-red-500",children:e})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Result"}),w.length>0&&r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{const I=w.map(O=>O.hex).join(`
`),$=new Blob([I],{type:"text/plain"}),W=URL.createObjectURL($),S=document.createElement("a");S.href=W,S.download="machine_code.txt",S.click(),URL.revokeObjectURL(W)},className:"px-4 py-1.5 text-sm font-medium text-white bg-blue-500 border border-blue-600 rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:"Export Code"}),r.jsxs("button",{type:"button",onClick:()=>b(!0),className:"px-4 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 flex items-center",title:"Show symbol table",children:[r.jsx(s1,{className:"w-4 h-4 mr-1"}),"Symbols"]})]})]}),r.jsx("div",{ref:a,className:"overflow-auto h-[calc(100vh-9rem)] w-full border border-gray-200 rounded-lg shadow-sm",children:r.jsxs("table",{className:"w-full text-sm table-fixed border-collapse",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10 shadow-sm",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-2.5 px-3 font-medium w-24 whitespace-nowrap border-b border-gray-200",children:"Address"}),r.jsx("th",{className:"text-left py-2.5 px-3 font-medium w-28 whitespace-nowrap border-b border-gray-200",children:"Code"}),r.jsx("th",{className:"text-left py-2.5 px-3 font-medium w-48 whitespace-nowrap border-b border-gray-200",children:"Basic"}),r.jsx("th",{className:"text-left py-2.5 px-3 font-medium whitespace-nowrap border-b border-gray-200",children:"Source"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:w.length>0?w.filter(I=>I.segment!=="data").flatMap((I,$)=>{const W=I.address!==void 0?I.address:$*4,S=Object.entries(m).filter(([Y,X])=>X===W).map(([Y])=>Y),O=S.length>0,P=[];return O&&S.forEach(Y=>{P.push(r.jsxs("tr",{className:"border-b-0 bg-red-100",children:[r.jsx("td",{className:"py-0.5 px-3 font-mono text-blue-600 text-xs font-bold whitespace-nowrap",children:`<${Y}>:`}),r.jsx("td",{colSpan:3})]},`${$}-label-${Y}`))}),P.push(r.jsxs("tr",{className:`${M*4===W?"bg-yellow-50 border border-yellow-200":""} transition-all duration-100`,id:`instruction-row-${$}`,children:[r.jsx("td",{className:"py-2 px-3 font-mono text-gray-600 text-xs whitespace-nowrap overflow-hidden text-ellipsis",children:`0x${W.toString(16).padStart(8,"0")}`}),r.jsx("td",{className:"py-2 px-3 font-mono text-blue-600 text-xs whitespace-nowrap overflow-hidden text-ellipsis",children:I.hex}),r.jsx("td",{className:"py-2 px-3 font-mono text-xs whitespace-nowrap",children:T(I.assembly)}),r.jsx("td",{className:"py-2 px-3 font-mono text-gray-600 text-xs whitespace-nowrap overflow-hidden text-ellipsis",children:I.source})]},$)),P}):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-8 text-center text-gray-500",children:'No assembly result. Please write code and click "Assemble Code"'})})})]})})]})]})]})})}function QS(){const[e,s]=F.useState("hex"),[i,l]=F.useState(null),a=le(m=>m.registers),u=le(m=>m.updateRegisters);F.useEffect(()=>{u({2:2147483632,3:268435456})},[]);const d=m=>{switch(e){case"dec":return m===0?"0":m.toString();case"hex":return`0x${(m>>>0).toString(16).padStart(8,"0")}`;default:return m.toString()}},f=m=>{try{return m.startsWith("0x")?parseInt(m.slice(2),16):parseInt(m)}catch{return 0}},x=(m,h)=>{if(m===0)return;const y=f(h);u({[m]:y})};return F.useEffect(()=>{const h=le.getState().nodes.find(y=>y.type==="register");if(h&&h.data.regWrite&&h.data.writeReg!==void 0){l(h.data.writeReg);const y=setTimeout(()=>{l(null)},500);return()=>clearTimeout(y)}},[le.getState().stepCount]),r.jsxs("div",{className:"h-full w-full bg-white overflow-y-auto p-1",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("h2",{className:"text-base font-bold",children:"Register"}),r.jsxs("select",{value:e,onChange:m=>s(m.target.value),className:"px-1.5 py-0.5 text-xs bg-gray-100 hover:bg-gray-200 rounded outline-none",children:[r.jsx("option",{value:"dec",children:"Decimal"}),r.jsx("option",{value:"hex",children:"Hexadecimal"})]})]}),r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"grid grid-cols-[2fr_1fr_3fr] gap-1 mb-0.5 text-xs font-medium bg-gray-50 p-0.5 rounded",children:[r.jsx("div",{children:"Name"}),r.jsx("div",{children:"Number"}),r.jsx("div",{className:"pl-2",children:"Value"})]}),r.jsx("div",{className:"space-y-0",children:Array.from({length:32},(m,h)=>r.jsxs("div",{className:`grid grid-cols-[2fr_1fr_3fr] gap-1 py-0.5 text-xs rounded-sm transition-colors duration-150 ${i===h?"bg-blue-50 shadow-sm":"hover:bg-gray-50"}`,children:[r.jsx("div",{className:"font-medium text-[11px]",children:h===0?"zero":h===1?"ra":h===2?"sp":h===3?"gp":h===4?"tp":h>=5&&h<=7?`t${h-5}`:h>=8&&h<=9?`s${h-8}`:h>=10&&h<=17?`a${h-10}`:h>=18&&h<=27?`s${h-16}`:h>=28&&h<=31?`t${h-25}`:`x${h}`}),r.jsx("div",{className:"text-gray-500 text-[11px]",children:h}),r.jsx("div",{className:"font-mono text-gray-600 pl-2 text-[11px]",children:h===0?d(0):r.jsx("input",{type:"text",value:d(a[h]||0),onChange:y=>x(h,y.target.value),className:"w-full bg-transparent border-b border-transparent hover:border-gray-200 focus:border-blue-400 outline-none py-0"})})]},h))})]})]})}function JS(){const e=le(T=>T.memory),s=le(T=>T.updateMemory),i=le(T=>T.assembledInstructions),l=le(T=>T.registers),[a,u]=F.useState("dec"),[d,f]=F.useState(0),[x,m]=F.useState("gp"),[h,y]=F.useState({}),b=16,v=16,j=i.filter(T=>T.segment==="text"),w=Math.ceil(j.length*4/b)||v,N=l[3]||268435456,E=l[2]||2147483632;F.useEffect(()=>{const T={};i.filter(I=>I.segment==="data"&&I.address!==void 0).forEach(I=>{const W=(I.source||"").match(/^([a-zA-Z0-9_\.]+):/);W&&I.address!==void 0&&(T[I.address]=W[1])}),y(T)},[i]),F.useEffect(()=>{x==="gp"&&f(N&-16)},[N,x]),F.useEffect(()=>{x==="sp"&&f(E&-16)},[E,x]);const z=T=>a==="hex"?(T&255).toString(16).padStart(2,"0").toUpperCase():T.toString(),M=T=>`0x${T.toString(16).padStart(8,"0")}`,_=(T,I)=>{let $;I.startsWith("0x")?$=parseInt(I.slice(2),16):$=parseInt(I,10),isNaN($)||($=$&255,s({[M(T)]:$}))},L=()=>{const T=JSON.stringify(e,null,2),I=new Blob([T],{type:"application/json"}),$=URL.createObjectURL(I),W=document.createElement("a");W.href=$,W.download="memory.json",W.click(),URL.revokeObjectURL($)},D=T=>{var $;const I=($=T.target.files)==null?void 0:$[0];if(I){const W=new FileReader;W.onload=S=>{var O;try{const P=(O=S.target)==null?void 0:O.result;if(typeof P=="string"){const Y=JSON.parse(P);s(Y)}}catch(P){console.error("Failed to import memory data:",P)}},W.readAsText(I)}},R=T=>{m(T),f(T==="gp"?N&-16:T==="sp"?E&-16:0)},H=T=>h[T]||null,k=T=>h[T]?"bg-blue-50":T%4===0&&e[M(T)]!==void 0?"bg-gray-50":"";return r.jsxs("div",{className:"h-full flex flex-col bg-white rounded-lg shadow-sm p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-1 rounded-lg",children:[r.jsx("button",{type:"button",onClick:()=>R("data"),className:`px-3 py-1.5 rounded-md transition-colors ${x==="data"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:"Data Segment"}),r.jsx("button",{type:"button",onClick:()=>R("text"),className:`px-3 py-1.5 rounded-md transition-colors ${x==="text"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:"Text Segment"}),r.jsx("button",{type:"button",onClick:()=>R("gp"),className:`px-3 py-1.5 rounded-md transition-colors ${x==="gp"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:`GP (x3): 0x${N.toString(16).padStart(8,"0")}`,children:"GP"}),r.jsx("button",{type:"button",onClick:()=>R("sp"),className:`px-3 py-1.5 rounded-md transition-colors ${x==="sp"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:`SP (x2): 0x${E.toString(16).padStart(8,"0")}`,children:"SP"})]}),r.jsxs("select",{value:a,onChange:T=>u(T.target.value),className:`px-3 py-1.5 bg-white border border-gray-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x==="text"?"opacity-50 cursor-not-allowed":""}`,title:x==="text"?"Format selection disabled in Text Segment":"Select display format","aria-label":"Select memory value display format",disabled:x==="text",children:[r.jsx("option",{value:"hex",children:"Hexadecimal"}),r.jsx("option",{value:"dec",children:"Decimal"})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-white border border-gray-200 rounded-md p-1",children:[r.jsx("button",{type:"button",onClick:()=>f(Math.max(0,d-v*b)),className:"p-1.5 rounded hover:bg-gray-100 text-gray-600 disabled:text-gray-300 disabled:hover:bg-transparent",title:"Previous Page",disabled:d===0,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),r.jsx("div",{className:"px-2 text-sm text-gray-600 select-none",children:M(d)}),r.jsx("button",{type:"button",onClick:()=>f(d+v*b),className:"p-1.5 rounded hover:bg-gray-100 text-gray-600 disabled:text-gray-300 disabled:hover:bg-transparent",title:"Next Page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{type:"button",onClick:L,className:"flex items-center px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[r.jsx(Pm,{className:"w-4 h-4 mr-2"}),"Export"]}),r.jsxs("label",{className:"flex items-center px-4 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors cursor-pointer focus-within:ring-2 focus-within:ring-gray-500 focus-within:ring-offset-2",children:[r.jsx(Rm,{className:"w-4 h-4 mr-2"}),"Import",r.jsx("input",{type:"file",accept:".json",onChange:D,className:"hidden"})]}),r.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to clear the memory?")&&le.getState().clearMemory()},className:"flex items-center px-4 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Clear Memory",children:r.jsx(zm,{className:"w-4 h-4"})})]})]}),x==="gp"&&Object.keys(h).length>0&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-50 rounded border border-gray-200",children:[r.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Data Labels"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(h).map(([T,I])=>r.jsx("button",{type:"button",className:"px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors",onClick:()=>f(parseInt(T)&-16),title:`Jump to ${I} at ${M(parseInt(T))}`,children:I},T))})]}),r.jsx("div",{className:"flex-1 overflow-auto",children:r.jsx("div",{className:"inline-block min-w-full align-middle",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg overflow-hidden",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"sticky left-0 z-10 bg-gray-50 px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-gray-200",children:"Address"}),Array.from({length:b},(T,I)=>r.jsxs("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-gray-200 last:border-r-0",children:["+",I.toString(16).toUpperCase().padStart(2,"0")]},I))]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:x==="text"?w:v},(T,I)=>{const $=x==="text"?I*b:d+I*b,W=Object.entries(h).find(([S,O])=>{const P=parseInt(S);return P>=$&&P<$+b});return r.jsxs("tr",{className:I%2===0?"bg-white":"bg-gray-50",children:[r.jsx("td",{className:"sticky left-0 z-10 whitespace-nowrap px-3 py-2 text-sm font-mono text-gray-900 border-r border-gray-200 bg-inherit w-32",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:M($)}),W&&r.jsx("span",{className:"text-xs text-blue-600 font-bold mt-1",children:W[1]})]})}),Array.from({length:b},(S,O)=>{if(x==="data"||x==="gp"||x==="sp"){const P=$+O,Y=e[M(P)]||0,X=H(P),U=`whitespace-nowrap px-3 py-2 text-sm border-r border-gray-200 last:border-r-0 ${k(P)}`;return r.jsx("td",{className:U,children:r.jsxs("div",{className:"relative",children:[X&&r.jsx("div",{className:"absolute -top-2 -left-1 text-xs text-blue-500 font-bold",children:X}),r.jsx("input",{type:"text",value:z(Y),onChange:q=>_(P,q.target.value),className:`w-full h-6 font-mono text-sm bg-transparent focus:bg-blue-50 focus:outline-none rounded text-center ${X?"mt-2":""}`,"aria-label":`Memory address ${M(P)} value`,title:X?`${X}: ${M(P)}`:M(P)}),Y>=32&&Y<=126&&r.jsx("div",{className:"absolute -bottom-2 left-0 text-xs text-gray-500 w-full text-center",children:String.fromCharCode(Y)})]})},O)}else{const P=$+O,Y=Math.floor(P/4)*4,X=P%4,U=i.find(A=>A.segment==="text"&&A.address===Y);let q="";return U&&(q=U.hex.replace("0x","").padStart(8,"0").slice(6-X*2,8-X*2)),r.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm border-r border-gray-200 last:border-r-0",children:r.jsx("div",{className:"w-full h-6 font-mono text-sm text-center",children:q})},O)}})]},I)})})]})})})]})}function e5({initialHeight:e=250,minHeight:s=50,maxHeight:i=600,initialWidth:l=500,minWidth:a=200,maxWidth:u=1e3}){const d=le(I=>I.outputMessages),f=le(I=>I.clearOutputMessages),[x,m]=F.useState(e),[h,y]=F.useState(l),[b,v]=F.useState(!1),[j,w]=F.useState(!1),[N,E]=F.useState(!1),[z,M]=F.useState(!1),_=F.useRef(e),L=F.useRef(l),D=F.useRef(null);F.useEffect(()=>{D.current&&D.current.scrollIntoView({behavior:"smooth"})},[d]),F.useEffect(()=>{const I=W=>{if(b){const S=window.innerHeight-W.clientY;S>=s&&S<=i&&(m(S),_.current=S)}},$=()=>{v(!1)};return b&&(document.addEventListener("mousemove",I),document.addEventListener("mouseup",$)),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",$)}},[b,s,i]),F.useEffect(()=>{const I=W=>{if(j){const S=W.clientX;S>=a&&S<=u&&(y(S),L.current=S)}},$=()=>{w(!1)};return j&&(document.addEventListener("mousemove",I),document.addEventListener("mouseup",$)),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",$)}},[j,a,u]);const R=I=>{I.preventDefault(),v(!0)},H=I=>{I.preventDefault(),w(!0)},k=()=>{N?(m(_.current),E(!1)):(_.current=x,m(30),E(!0))},T=()=>{z?(m(_.current),y(L.current),M(!1)):(_.current=x,L.current=h,m(i),y(u),M(!0))};return r.jsxs("div",{className:"fixed bottom-0 left-0 bg-white border-t border-r border-gray-200 shadow-lg z-10 rounded-tr-md",style:{height:`${x}px`,width:`${h}px`},children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-200 cursor-ns-resize",onMouseDown:R}),r.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-1 bg-gray-200 cursor-ew-resize",onMouseDown:H}),r.jsxs("div",{className:"px-4 py-1 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Output Console"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:f,className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-700 transition-colors rounded",title:"Clear console",children:"Clear"}),r.jsx("button",{onClick:T,className:"p-1 text-gray-500 hover:text-gray-700 transition-colors rounded",title:z?"Restore":"Maximize",children:z?r.jsx(_m,{size:16}):r.jsx(Mm,{size:16})}),r.jsx("button",{onClick:k,className:"p-1 text-gray-500 hover:text-gray-700 transition-colors rounded",title:N?"Expand":"Collapse",children:N?r.jsx(Wy,{size:16}):r.jsx(qu,{size:16})})]})]}),r.jsxs("div",{className:"p-2 overflow-y-auto font-mono text-sm text-gray-800 bg-gray-50",style:{height:"calc(100% - 32px)"},children:[d.length===0?r.jsx("div",{className:"text-gray-400 italic p-2",children:"No output yet. Run your code with ECALL instructions to see output here."}):r.jsx("pre",{className:"whitespace-pre m-0 p-0 pl-2",children:d.join("")}),r.jsx("div",{ref:D})]})]})}const t5=[{name:"R-type",fields:[{start:31,end:25,label:"funct7"},{start:24,end:20,label:"rs2"},{start:19,end:15,label:"rs1"},{start:14,end:12,label:"funct3"},{start:11,end:7,label:"rd"},{start:6,end:0,label:"opcode"}]},{name:"I-type",fields:[{start:31,end:20,label:"imm[11:0]"},{start:19,end:15,label:"rs1"},{start:14,end:12,label:"funct3"},{start:11,end:7,label:"rd"},{start:6,end:0,label:"opcode"}]},{name:"S-type",fields:[{start:31,end:25,label:"imm[11:5]"},{start:24,end:20,label:"rs2"},{start:19,end:15,label:"rs1"},{start:14,end:12,label:"funct3"},{start:11,end:7,label:"imm[4:0]"},{start:6,end:0,label:"opcode"}]},{name:"B-type",fields:[{start:31,end:25,label:"imm[12|10:5]"},{start:24,end:20,label:"rs2"},{start:19,end:15,label:"rs1"},{start:14,end:12,label:"funct3"},{start:11,end:7,label:"imm[4:1|11]"},{start:6,end:0,label:"opcode"}]},{name:"U-type",fields:[{start:31,end:12,label:"imm[31:12]"},{start:11,end:7,label:"rd"},{start:6,end:0,label:"opcode"}]},{name:"J-type",fields:[{start:31,end:12,label:"imm[20|10:1|11|19:12]"},{start:11,end:7,label:"rd"},{start:6,end:0,label:"opcode"}]}],n5=({field:e,width:s,showBitNumbers:i=!0})=>r.jsxs("div",{className:"border border-gray-300 py-1 px-0.5 text-center flex flex-col justify-center",style:{width:`${s}%`},children:[r.jsx("div",{className:"text-[10px] font-medium leading-tight",children:e.label}),i&&r.jsx("div",{className:"text-[8px] text-gray-500 mt-0.5 leading-tight",children:e.start===e.end?e.start:`${e.start}:${e.end}`})]}),r5=()=>{const e=[31,27,26,25,24,20,19,15,14,12,11,7,6,0];return r.jsx("div",{className:"flex justify-between w-full mb-0.5 px-0.5",children:e.map((s,i)=>r.jsx("div",{className:"text-[9px] text-gray-500",children:s},i))})},s5=({format:e})=>{const s=i=>(i.start-i.end+1)/32*100;return r.jsxs("div",{className:"mb-1",children:[r.jsx("h3",{className:"text-xs font-semibold mb-1",children:e.name}),r.jsx("div",{className:"flex",children:e.fields.map((i,l)=>r.jsx(n5,{field:i,width:s(i)},l))})]})},i5=()=>r.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[r.jsx("h2",{className:"text-base font-bold mb-2",children:"Core Instruction Formats"}),r.jsx(r5,{}),r.jsx("div",{className:"space-y-1",children:t5.map((e,s)=>r.jsx(s5,{format:e},s))})]}),o5=[{type:"R-Type Instructions",instructions:["add rd, rs1, rs2 - Addition","sub rd, rs1, rs2 - Subtraction","sll rd, rs1, rs2 - Logical Left Shift","slt rd, rs1, rs2 - Set Less Than (signed)","sltu rd, rs1, rs2 - Set Less Than Unsigned","xor rd, rs1, rs2 - Bitwise XOR","srl rd, rs1, rs2 - Logical Right Shift","sra rd, rs1, rs2 - Arithmetic Right Shift","or rd, rs1, rs2 - Bitwise OR","and rd, rs1, rs2 - Bitwise AND"]},{type:"I-Type Instructions",instructions:["addi rd, rs1, imm - Immediate Addition","slti rd, rs1, imm - Immediate Set Less Than (signed)","sltiu rd, rs1, imm - Immediate Set Less Than Unsigned","xori rd, rs1, imm - Immediate Bitwise XOR","ori rd, rs1, imm - Immediate Bitwise OR","andi rd, rs1, imm - Immediate Bitwise AND","slli rd, rs1, imm - Immediate Logical Left Shift","srli rd, rs1, imm - Immediate Logical Right Shift","srai rd, rs1, imm - Immediate Arithmetic Right Shift","jalr rd, rs1, imm - Jump and Link Register (I-Type)","lb rd, offset(rs1) - Load Byte","lh rd, offset(rs1) - Load Half Word","lw rd, offset(rs1) - Load Word","lbu rd, offset(rs1) - Load Byte Unsigned","lhu rd, offset(rs1) - Load Half Word Unsigned"]},{type:"S-Type Instructions",instructions:["sb rs2, offset(rs1) - Store Byte","sh rs2, offset(rs1) - Store Half Word","sw rs2, offset(rs1) - Store Word"]},{type:"B-Type Instructions",instructions:["beq rs1, rs2, offset - Branch if Equal","bne rs1, rs2, offset - Branch if Not Equal","blt rs1, rs2, offset - Branch if Less Than (signed)","bge rs1, rs2, offset - Branch if Greater Than or Equal (signed)","bltu rs1, rs2, offset - Branch if Less Than Unsigned","bgeu rs1, rs2, offset - Branch if Greater Than or Equal Unsigned"]},{type:"U-Type Instructions",instructions:["lui rd, imm - Load Upper Immediate","auipc rd, imm - Add Upper Immediate to PC"]},{type:"J-Type Instructions",instructions:["jal rd, offset - Jump and Link"]},{type:"M-Extension Instructions",instructions:["mul rd, rs1, rs2 - Multiplication (lower 32 bits)","mulh rd, rs1, rs2 - Multiplication High (signedsigned)","mulhu rd, rs1, rs2 - Multiplication High (unsignedunsigned)","mulhsu rd, rs1, rs2 - Multiplication High (signedunsigned)","div rd, rs1, rs2 - Division (signed)","divu rd, rs1, rs2 - Division (unsigned)","rem rd, rs1, rs2 - Remainder (signed)","remu rd, rs1, rs2 - Remainder (unsigned)"]},{type:"Basic Pseudo-Instructions",instructions:["li rd, imm - Load Immediate (expands to lui+addi or addi)","la rd, symbol - Load Address (expands to lui+addi)","mv rd, rs - Move (expands to addi rd, rs, 0)","call label - Call subroutine (expands to jal ra, label)","ret - Return from subroutine (expands to jalr x0, ra, 0)","nop - No Operation (expands to addi x0, x0, 0)"]},{type:"Global Load/Store Pseudo-Instructions",instructions:["lb rd, symbol - Load byte from global (auipc + lb)","lh rd, symbol - Load halfword from global (auipc + lh)","lw rd, symbol - Load word from global (auipc + lw)","lbu rd, symbol - Load byte unsigned from global (auipc + lbu)","lhu rd, symbol - Load halfword unsigned from global (auipc + lhu)","sb rs2, symbol, rt - Store byte to global (auipc + sb)","sh rs2, symbol, rt - Store halfword to global (auipc + sh)","sw rs2, symbol, rt - Store word to global (auipc + sw)"]},{type:"Arithmetic Pseudo-Instructions",instructions:["not rd, rs - One's complement (xori rd, rs, -1)","neg rd, rs - Two's complement (sub rd, x0, rs)","seqz rd, rs - Set if equal to zero (sltiu rd, rs, 1)","snez rd, rs - Set if not equal to zero (sltu rd, x0, rs)","sltz rd, rs - Set if less than zero (slt rd, rs, x0)","sgtz rd, rs - Set if greater than zero (slt rd, x0, rs)"]},{type:"Branch Pseudo-Instructions",instructions:["beqz rs, offset - Branch if equal to zero (beq rs, x0, offset)","bnez rs, offset - Branch if not equal to zero (bne rs, x0, offset)","blez rs, offset - Branch if less/equal to zero (bge x0, rs, offset)","bgez rs, offset - Branch if greater/equal to zero (bge rs, x0, offset)","bltz rs, offset - Branch if less than zero (blt rs, x0, offset)","bgtz rs, offset - Branch if greater than zero (blt x0, rs, offset)","bgt rs, rt, offset - Branch if greater than (blt rt, rs, offset)","ble rs, rt, offset - Branch if less/equal (bge rt, rs, offset)","bgtu rs, rt, offset - Branch if greater than unsigned (bltu rt, rs, offset)","bleu rs, rt, offset - Branch if less/equal unsigned (bgeu rt, rs, offset)"]},{type:"Jump Pseudo-Instructions",instructions:["j offset - Jump (jal x0, offset)","jal offset - Jump and link (jal x1, offset)","jr rs - Jump register (jalr x0, rs, 0)","jalr rs - Jump and link register (jalr x1, rs, 0)","jalr rd, imm(rs1) - Jump and link register with offset (jalr rd, rs1, imm)","tail offset - Tail call subroutine (jal x0, offset)"]},{type:"Assembly Directives",instructions:[".text - Text section declaration",".data - Data section declaration",".word w1, w2, ... - Define words (4 bytes)",".half h1, h2, ... - Define half words (2 bytes)",".byte b1, b2, ... - Define bytes",'.ascii "string" - Define ASCII string (not null terminated)','.asciz "string" - Define ASCII string (null terminated)','.string "string" - Define ASCII string (null terminated, same as .asciz)',".space size - Allocate space of specified size (filled with zeros)",".zero size - Allocate space of specified size (filled with zeros, same as .space)",".equ symbol, value - Define a constant symbol with the specified value"]},{type:"System Instructions",instructions:["ecall - Environment Call (System Call)","a7=1: Print Integer (a0 = integer to print)","a7=4: Print String (a0 = address of string)","a7=5: Read Integer (result stored in a0)","a7=8: Read String (a0 = buffer address, a1 = max length)","a7=10: Exit Program","a7=11: Print Character (a0 = character code)","a7=12: Read Character (result stored in a0)","a7=93: Exit Program (Linux compatible)","ebreak - Breakpoint (Debug Instruction)"]}];function l5(){const[e,s]=F.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>s(!e),className:"flex items-center",title:"Instruction Guide",children:r.jsx(Im,{className:"w-4 h-4"})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[100]",onClick:()=>s(!1)}),r.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[80vw] text-sm bg-white p-6 rounded-lg shadow-xl border border-gray-200 transition-all duration-300 ease-in-out z-[101] max-h-[80vh] overflow-y-auto",style:{opacity:e?1:0,scale:e?"1":"0.95"},children:[r.jsx("div",{className:"mb-6",children:r.jsx(i5,{})}),r.jsx("div",{className:"grid grid-cols-3 gap-4",children:o5.map(i=>r.jsxs("div",{className:"min-w-0 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:i.type}),r.jsx("ul",{className:"list-none space-y-2",children:i.instructions.map((l,a)=>r.jsx("li",{className:"text-xs text-gray-600 hover:text-gray-900 transition-colors duration-200",children:l},a))})]},i.type))})]})]})]})}function a5(){const e=le(N=>N.cache),s=le(N=>N.clearCache),i=le(N=>N.initializeCache),l=le(N=>N.updateCacheConfig),[a,u]=F.useState(e.config.linesExp),[d,f]=F.useState(e.config.blockSize/4),[x,m]=F.useState(e.config.waysExp),[h,y]=F.useState(null),[b,v]=F.useState(!1);Q.useEffect(()=>{e.sets.length===0&&i()},[e.sets.length,i]);const j=N=>`0x${N.toString(16).padStart(8,"0")}`,w=N=>`0x${(N>>>0).toString(16).padStart(8,"0")}`;return r.jsxs("div",{className:"h-full flex flex-col p-2 bg-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h2",{className:"text-lg font-bold",children:"Cache Status"}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to clear the cache?")&&s()},className:"flex items-center px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition-colors focus:outline-none focus:ring-1 focus:ring-red-500 focus:ring-offset-1",children:[r.jsx(zm,{className:"w-4 h-4 mr-1"}),"Clear"]})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded flex justify-between items-center",children:[r.jsx("div",{className:"text-base font-medium text-blue-600",children:"Hits"}),r.jsx("div",{className:"text-base font-bold text-blue-700",children:e.stats.hits})]}),r.jsxs("div",{className:"bg-red-50 p-3 rounded flex justify-between items-center",children:[r.jsx("div",{className:"text-base font-medium text-red-600",children:"Misses"}),r.jsx("div",{className:"text-base font-bold text-red-700",children:e.stats.misses})]}),r.jsxs("div",{className:"bg-green-50 p-3 rounded flex justify-between items-center",children:[r.jsx("div",{className:"text-base font-medium text-green-600",children:"Hit Rate"}),r.jsxs("div",{className:"text-base font-bold text-green-700",children:[(e.stats.hitRate*100).toFixed(1),"%"]})]}),r.jsxs("div",{className:"bg-purple-50 p-3 rounded flex justify-between items-center",children:[r.jsx("div",{className:"text-base font-medium text-purple-600",children:"Writebacks"}),r.jsx("div",{className:"text-base font-bold text-purple-700",children:e.stats.writebacks})]})]}),r.jsxs("div",{className:"bg-gray-50 p-2 rounded mb-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center text-left focus:outline-none",children:[r.jsx("h3",{className:"text-base font-semibold",children:"Cache Configuration"}),b?r.jsx(qu,{className:"w-4 h-4 text-gray-500 ml-2"}):r.jsx(Xu,{className:"w-4 h-4 text-gray-500 ml-2"})]}),b&&r.jsxs("button",{type:"button",onClick:()=>{if(a<0||a>10){y("Number of lines exponent must be between 0 and 10");return}if(d<=0||!Number.isInteger(d)){y("Block size must be a positive integer number of words");return}if(x<0||x>a){y("Ways exponent must be between 0 and the lines exponent");return}const N=d*4;l({linesExp:a,blockSize:N,waysExp:x}),y(null)},className:"flex items-center px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-1",children:[r.jsx(Pm,{className:"w-4 h-4 mr-1"}),"Apply"]})]}),r.jsxs("div",{className:`overflow-hidden transition-all duration-300 ${b?"max-h-[1000px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:[h&&r.jsx("div",{className:"mb-2 p-1 bg-red-100 border border-red-400 text-red-700 rounded text-xs",children:h}),r.jsx("div",{className:"mb-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:"Note: The cache is only simulated for statistics and visualization purposes. Actual memory operations directly access the memory."}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("div",{className:"mr-2",children:r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Lines (2^n)"})}),r.jsx("input",{type:"number",value:a,onChange:N=>u(Number(N.target.value)),min:"0",max:"10",step:"1",title:"Exponent for number of cache lines (2^n)",className:"w-16 rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1 px-2"})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["2^",e.config.linesExp," = ",Math.pow(2,e.config.linesExp)]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("div",{className:"mr-2",children:r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Block Size (words)"})}),r.jsx("input",{type:"number",value:d,onChange:N=>f(Number(N.target.value)),min:"1",step:"1",title:"Block size in words (1 word = 4 bytes)",className:"w-16 rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1 px-2"})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[e.config.blockSize/4," words"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("div",{className:"mr-2",children:r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ways (2^n)"})}),r.jsx("input",{type:"number",value:x,onChange:N=>m(Number(N.target.value)),min:"0",max:a,step:"1",title:"Exponent for number of ways (2^n)",className:"w-16 rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1 px-2"})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["2^",e.config.waysExp," = ",e.config.ways]})]})]})]})]}),r.jsx("div",{className:"flex-1 overflow-auto",children:r.jsx("div",{className:"bg-white border rounded",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Set"}),r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Way"}),r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Tag"}),r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"V"}),r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"D"}),r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase w-1/2",children:"Data"}),r.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Access"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.sets.length>0?e.sets.map((N,E)=>N.entries.map((z,M)=>r.jsxs("tr",{className:"text-xs hover:bg-gray-50",children:[r.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:E}),r.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:M}),r.jsx("td",{className:"px-2 py-1 whitespace-nowrap font-mono",children:j(z.tag)}),r.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:r.jsx("span",{className:`px-1 rounded text-xs ${z.valid?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:z.valid?"Y":"N"})}),r.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:r.jsx("span",{className:`px-1 rounded text-xs ${z.dirty?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:z.dirty?"Y":"N"})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("div",{className:"max-w-full overflow-x-auto",children:z.data.map((_,L)=>r.jsx("span",{className:"mr-2 font-mono text-xs",children:w(_)},L))})}),r.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:z.lastAccess})]},`${E}-${M}`))):r.jsx("tr",{className:"text-xs text-gray-500",children:r.jsx("td",{colSpan:7,className:"px-2 py-1 text-center",children:"No cache entries to display"})})})]})})})})]})}function c5({onClose:e,initialWidth:s=800,initialHeight:i=600,minWidth:l=400,minHeight:a=300,maxWidth:u=1200,maxHeight:d=800}){const f=le(W=>W.performanceStats),x=le(W=>W.togglePipelineStats),[m,h]=F.useState(s),[y,b]=F.useState(i),[v,j]=F.useState({x:window.innerWidth/2-s/2,y:window.innerHeight/2-i/2}),[w,N]=F.useState(!1),[E,z]=F.useState(!1),[M,_]=F.useState(null),[L,D]=F.useState(!1),R=F.useRef({width:s,height:i}),H=F.useRef({x:window.innerWidth/2-s/2,y:window.innerHeight/2-i/2}),k=F.useRef({x:0,y:0});F.useEffect(()=>{const W=O=>{if(w){const P=O.clientX-k.current.x,Y=O.clientY-k.current.y;j({x:Math.max(0,Math.min(window.innerWidth-m,v.x+P)),y:Math.max(0,Math.min(window.innerHeight-y,v.y+Y))}),k.current={x:O.clientX,y:O.clientY}}},S=()=>{N(!1),H.current=v};return w&&(document.addEventListener("mousemove",W),document.addEventListener("mouseup",S)),()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",S)}},[w,v,m,y]),F.useEffect(()=>{const W=O=>{if(E&&M){let P=m,Y=y,X=v.x,U=v.y;if(M.includes("e")&&(P=Math.max(l,Math.min(u,m+(O.clientX-k.current.x)))),M.includes("w")){const q=O.clientX-k.current.x;P=Math.max(l,Math.min(u,m-q)),P!==m&&(X=v.x+(m-P))}if(M.includes("s")&&(Y=Math.max(a,Math.min(d,y+(O.clientY-k.current.y)))),M.includes("n")){const q=O.clientY-k.current.y;Y=Math.max(a,Math.min(d,y-q)),Y!==y&&(U=v.y+(y-Y))}h(P),b(Y),j({x:X,y:U}),k.current={x:O.clientX,y:O.clientY}}},S=()=>{z(!1),_(null),R.current={width:m,height:y},H.current=v};return E&&(document.addEventListener("mousemove",W),document.addEventListener("mouseup",S)),()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",S)}},[E,M,m,y,v,l,u,a,d]);const T=W=>{L||(W.preventDefault(),N(!0),k.current={x:W.clientX,y:W.clientY})},I=(W,S)=>{W.preventDefault(),W.stopPropagation(),z(!0),_(S),k.current={x:W.clientX,y:W.clientY}},$=()=>{L?(h(R.current.width),b(R.current.height),j(H.current),D(!1)):(R.current={width:m,height:y},H.current=v,h(window.innerWidth-40),b(window.innerHeight-40),j({x:20,y:20}),D(!0))};return r.jsxs("div",{className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 z-50 overflow-hidden",style:{width:`${m}px`,height:`${y}px`,left:`${v.x}px`,top:`${v.y}px`},children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 cursor-move bg-white",onMouseDown:T,children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Performance Analysis"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:$,className:"p-1.5 rounded-md hover:bg-gray-100 transition-colors",title:L?"Restore":"Maximize",children:L?r.jsx(_m,{className:"h-5 w-5 text-gray-500"}):r.jsx(Mm,{className:"h-5 w-5 text-gray-500"})}),r.jsx("button",{type:"button",onClick:e,className:"p-1.5 rounded-md hover:bg-gray-100 transition-colors",title:"Close Performance Analysis",children:r.jsx(Am,{className:"h-5 w-5 text-gray-500"})})]})]}),r.jsxs("div",{className:"h-[calc(100%-57px)] overflow-auto p-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ui,{className:"w-5 h-5 text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Pipeline Statistics Collection"})]}),r.jsx("button",{type:"button",onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-blue-50 hover:bg-blue-100 transition-colors border border-blue-200",title:f.enablePipelineStats?"Disable Pipeline Statistics Collection":"Enable Pipeline Statistics Collection",children:f.enablePipelineStats?r.jsxs(r.Fragment,{children:[r.jsx(a1,{className:"w-6 h-6 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Enabled"})]}):r.jsxs(r.Fragment,{children:[r.jsx(l1,{className:"w-6 h-6 text-gray-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Disabled"})]})})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ep,{className:"w-5 h-5 text-blue-600"}),r.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Cycles"})]}),r.jsx("div",{className:"text-2xl font-bold text-blue-700",children:f.cycleCount})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ui,{className:"w-5 h-5 text-green-600"}),r.jsx("div",{className:"text-sm font-medium text-green-600",children:"Instructions"})]}),r.jsx("div",{className:"text-2xl font-bold text-green-700",children:f.instructionsExecuted})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Nu,{className:"w-5 h-5 text-purple-600"}),r.jsx("div",{className:"text-sm font-medium text-purple-600",children:"CPI"})]}),r.jsx("div",{className:"text-2xl font-bold text-purple-700",children:f.cpi.toFixed(2)})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Nu,{className:"w-5 h-5 text-amber-600"}),r.jsx("div",{className:"text-sm font-medium text-amber-600",children:"IPC"})]}),r.jsx("div",{className:"text-2xl font-bold text-amber-700",children:f.ipc.toFixed(2)})]}),r.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ep,{className:"w-5 h-5 text-teal-600"}),r.jsx("div",{className:"text-sm font-medium text-teal-600",children:"Clock Rate"})]}),r.jsx("div",{className:"text-2xl font-bold text-teal-700",children:f.clockRate>0?f.clockRate>=1e3?`${(f.clockRate/1e3).toFixed(2)} kHz`:`${f.clockRate.toFixed(2)} Hz`:"0 Hz"})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Instruction Type Distribution"}),r.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[r.jsxs("div",{className:"bg-red-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-red-600 mb-1",children:"R-Type"}),r.jsx("div",{className:"text-xl font-bold text-red-700",children:f.rTypeCount}),r.jsxs("div",{className:"text-xs text-red-500 mt-1",children:[f.totalInstructions>0?(f.rTypeCount/f.totalInstructions*100).toFixed(1):0,"%"]})]}),r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-blue-600 mb-1",children:"I-Type"}),r.jsx("div",{className:"text-xl font-bold text-blue-700",children:f.iTypeCount}),r.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[f.totalInstructions>0?(f.iTypeCount/f.totalInstructions*100).toFixed(1):0,"%"]})]}),r.jsxs("div",{className:"bg-green-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 mb-1",children:"S-Type"}),r.jsx("div",{className:"text-xl font-bold text-green-700",children:f.sTypeCount}),r.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[f.totalInstructions>0?(f.sTypeCount/f.totalInstructions*100).toFixed(1):0,"%"]})]}),r.jsxs("div",{className:"bg-yellow-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-yellow-600 mb-1",children:"B-Type"}),r.jsx("div",{className:"text-xl font-bold text-yellow-700",children:f.bTypeCount}),r.jsxs("div",{className:"text-xs text-yellow-500 mt-1",children:[f.totalInstructions>0?(f.bTypeCount/f.totalInstructions*100).toFixed(1):0,"%"]})]}),r.jsxs("div",{className:"bg-purple-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-purple-600 mb-1",children:"U-Type"}),r.jsx("div",{className:"text-xl font-bold text-purple-700",children:f.uTypeCount}),r.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[f.totalInstructions>0?(f.uTypeCount/f.totalInstructions*100).toFixed(1):0,"%"]})]}),r.jsxs("div",{className:"bg-indigo-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-indigo-600 mb-1",children:"J-Type"}),r.jsx("div",{className:"text-xl font-bold text-indigo-700",children:f.jTypeCount}),r.jsxs("div",{className:"text-xs text-indigo-500 mt-1",children:[f.totalInstructions>0?(f.jTypeCount/f.totalInstructions*100).toFixed(1):0,"%"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ju,{className:"w-5 h-5 text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Branch Statistics"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Branches"}),r.jsx("span",{className:"font-medium",children:f.branchCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Branches Taken"}),r.jsx("span",{className:"font-medium",children:f.branchTakenCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Branches Not Taken"}),r.jsx("span",{className:"font-medium",children:f.branchNotTakenCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Branch Mispredictions"}),r.jsx("span",{className:"font-medium",children:f.branchMispredictionCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Misprediction Rate"}),r.jsxs("span",{className:"font-medium",children:[f.branchCount>0?(f.branchMispredictionCount/f.branchCount*100).toFixed(2):0,"%"]})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ks,{className:"w-5 h-5 text-green-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Memory Statistics"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Memory Reads"}),r.jsx("span",{className:"font-medium",children:f.memoryReadCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Memory Writes"}),r.jsx("span",{className:"font-medium",children:f.memoryWriteCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Memory Operations"}),r.jsx("span",{className:"font-medium",children:f.memoryReadCount+f.memoryWriteCount})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Memory Operation Ratio"}),r.jsxs("span",{className:"font-medium",children:[f.instructionsExecuted>0?((f.memoryReadCount+f.memoryWriteCount)/f.instructionsExecuted*100).toFixed(2):0,"%"]})]})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[r.jsx("div",{className:"mb-4",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Pipeline Stall Analysis"})}),r.jsxs("div",{className:`grid grid-cols-4 gap-4 ${f.enablePipelineStats?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"bg-red-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-red-600 mb-1",children:"Data Hazards"}),r.jsx("div",{className:"text-xl font-bold text-red-700",children:f.dataHazardStalls})]}),r.jsxs("div",{className:"bg-amber-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-amber-600 mb-1",children:"Control Hazards"}),r.jsx("div",{className:"text-xl font-bold text-amber-700",children:f.controlHazardStalls})]}),r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-blue-600 mb-1",children:"Memory Stalls"}),r.jsx("div",{className:"text-xl font-bold text-blue-700",children:f.memoryStalls})]}),r.jsxs("div",{className:"bg-purple-50 p-3 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium text-purple-600 mb-1",children:"Total Stalls"}),r.jsx("div",{className:"text-xl font-bold text-purple-700",children:f.totalStalls})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Execution Time"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Execution Time"}),r.jsxs("span",{className:"font-medium",children:[(f.executionTimeMs/1e3).toFixed(3)," seconds"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Clock Rate (Actual)"}),r.jsx("span",{className:"font-medium",children:f.clockRate>0?f.clockRate>=1e3?`${(f.clockRate/1e3).toFixed(2)} kHz`:`${f.clockRate.toFixed(2)} Hz`:"0 Hz"})]})]})]})]}),r.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:W=>I(W,"se")}),r.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 cursor-sw-resize",onMouseDown:W=>I(W,"sw")}),r.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 cursor-ne-resize",onMouseDown:W=>I(W,"ne")}),r.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 cursor-nw-resize",onMouseDown:W=>I(W,"nw")}),r.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-1 cursor-s-resize",onMouseDown:W=>I(W,"s")}),r.jsx("div",{className:"absolute top-0 left-4 right-4 h-1 cursor-n-resize",onMouseDown:W=>I(W,"n")}),r.jsx("div",{className:"absolute left-0 top-4 bottom-4 w-1 cursor-w-resize",onMouseDown:W=>I(W,"w")}),r.jsx("div",{className:"absolute right-0 top-4 bottom-4 w-1 cursor-e-resize",onMouseDown:W=>I(W,"e")})]})}class u5 extends Q.Component{constructor(i){super(i);$t(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()});this.state={hasError:!1}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,l){console.error("Error caught by ErrorBoundary:",i,l),this.setState({errorInfo:l})}render(){var i,l;return this.state.hasError?this.props.fallback||r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md max-w-2xl mx-auto mt-8",children:[r.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error Occurred"}),r.jsx("p",{className:"mt-1 text-sm text-red-700 font-medium",children:((i=this.state.error)==null?void 0:i.message)||"An error occurred during rendering"}),((l=this.state.error)==null?void 0:l.stack)&&r.jsxs("div",{className:"mt-3 p-3 bg-red-100 rounded-md overflow-auto max-h-60",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Error Stack:"}),r.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap",children:this.state.error.stack})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:this.handleReset,className:"px-3 py-1 text-sm font-medium text-white bg-gray-600 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Reload App"})})]}):this.props.children}}function Al({isActive:e,onClick:s,children:i}){return r.jsx("button",{className:`px-4 py-2 flex items-center space-x-2 ${e?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"}`,onClick:s,children:i})}function d5(){const[e,s]=F.useState("code"),[i,l]=F.useState(!1),[a,u]=F.useState(!1),d=()=>r.jsxs("div",{className:"h-full flex",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{style:{display:e==="code"?"flex":"none"},className:"h-full",children:r.jsx("div",{className:"flex-1",children:r.jsx(KS,{})})}),r.jsx("div",{style:{display:e==="memory"?"flex":"none"},className:"h-full",children:r.jsx("div",{className:"flex-1 p-4",children:r.jsx(JS,{})})}),r.jsx("div",{style:{display:e==="cache"?"flex":"none"},className:"h-full",children:r.jsx("div",{className:"flex-1 p-4",children:r.jsx(a5,{})})}),r.jsx("div",{style:{display:e==="datapath"?"flex":"none"},className:"h-full",children:r.jsx(d1,{leftPanel:r.jsx(C1,{}),centerPanel:r.jsxs("div",{className:"h-full relative",children:[r.jsx("div",{className:"absolute inset-0",children:r.jsx($j,{})}),r.jsx(Oj,{})]}),defaultLeftSize:20,defaultRightSize:0})})]}),r.jsx("div",{className:"w-64 border-l border-gray-200 bg-white",children:r.jsx(QS,{})})]}),f=le(m=>m.isSimulating),x=le(m=>m.outputMessages);return r.jsxs("div",{className:"flex flex-col h-screen bg-gray-200",children:[r.jsx("header",{className:"bg-white border-b border-gray-200 flex-shrink-0 shadow-sm",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"flex items-center h-14",children:[r.jsx("div",{className:"flex items-center mr-8 min-w-[160px]",children:r.jsx("a",{href:"https://github.com/Haoziwan/Interactive-RISC-V-Simulator",target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:opacity-80 transition-opacity",title:"View on GitHub",children:r.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent whitespace-nowrap",children:"RISC-V Simulator"})})}),r.jsxs("div",{className:"flex-1 flex justify-center items-center space-x-2",children:[r.jsxs("div",{className:"flex bg-gray-50 rounded-lg p-1 space-x-1",children:[r.jsxs(Al,{isActive:e==="code",onClick:()=>s("code"),children:[r.jsx(Vy,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Editor"})]}),r.jsxs(Al,{isActive:e==="datapath",onClick:()=>s("datapath"),children:[r.jsx(Ui,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Datapath"})]}),r.jsxs(Al,{isActive:e==="memory",onClick:()=>s("memory"),children:[r.jsx(ks,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Memory"})]}),r.jsxs(Al,{isActive:e==="cache",onClick:()=>s("cache"),children:[r.jsx(Zy,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Cache"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>le.getState().toggleSimulation(),className:"p-2.5 rounded-lg hover:bg-gray-100 transition-colors text-gray-700 hover:text-blue-600",title:f?"Pause Simulation":"Start Simulation",children:f?r.jsx(Ky,{className:"w-5 h-5"}):r.jsx(Qy,{className:"w-5 h-5"})}),r.jsx("button",{type:"button",onClick:()=>le.getState().stepBackSimulation(),className:"p-2.5 rounded-lg hover:bg-gray-100 transition-colors text-gray-700 hover:text-blue-600",title:"Step Back",disabled:f,children:r.jsx(n1,{className:"w-5 h-5"})}),r.jsx("button",{type:"button",onClick:()=>le.getState().stepSimulation(),className:"p-2.5 rounded-lg hover:bg-gray-100 transition-colors text-gray-700 hover:text-blue-600",title:"Single Step",disabled:f,children:r.jsx(r1,{className:"w-5 h-5"})}),r.jsx("button",{type:"button",onClick:()=>le.getState().assembleCode(),className:"p-2.5 rounded-lg hover:bg-gray-100 transition-colors text-gray-700 hover:text-blue-600",title:"Reset Simulation",children:r.jsx(e1,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx("input",{type:"range",min:"0",max:"2000",step:"100",value:le(m=>m.simulationInterval),onChange:m=>le.setState({simulationInterval:parseInt(m.target.value)}),className:"w-32 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",title:"Simulation Interval (ms) (not the actual exec interval)"}),r.jsxs("span",{className:"text-sm text-gray-600 min-w-[4rem]",children:[le(m=>m.simulationInterval),"ms"]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[r.jsx("div",{className:"p-1.5 rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:r.jsx(l5,{})}),r.jsx("button",{type:"button",onClick:()=>u(!a),className:"p-1.5 rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",title:"Performance Analysis",children:r.jsx(Nu,{className:"w-4 h-4"})}),r.jsxs("button",{type:"button",onClick:()=>l(!i),className:`flex items-center gap-1 text-xs px-2 py-1 rounded-md transition-colors ${x.length>0?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:i?"Hide Output Console":"Show Output Console",children:[r.jsx("span",{children:i?"Hide Output":"Show Output"}),x.length>0&&r.jsx("span",{className:"ml-0.5 px-1 py-0.5 text-xs bg-blue-500 text-white rounded-full",children:x.length})]})]})]})})}),r.jsx("main",{className:"flex-1 overflow-hidden",children:r.jsx(u5,{children:d()})}),i&&r.jsx(e5,{initialWidth:500,minWidth:250,maxWidth:1e3,initialHeight:250,maxHeight:600}),a&&r.jsx(c5,{onClose:()=>u(!1)})]})}sy.createRoot(document.getElementById("root")).render(r.jsx(F.StrictMode,{children:r.jsx(d5,{})}));
